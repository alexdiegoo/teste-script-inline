<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script async>
        function _regeneratorValues(e) {
  if (null != e) {
    var t = e[('function' == typeof Symbol && Symbol.iterator) || '@@iterator'],
      r = 0;
    if (t) return t.call(e);
    if ('function' == typeof e.next) return e;
    if (!isNaN(e.length))
      return {
        next: function next() {
          return (e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e });
        },
      };
  }
  throw new TypeError(typeof e + ' is not iterable');
}
function _inheritsLoose(t, o) {
  ((t.prototype = Object.create(o.prototype)), (t.prototype.constructor = t), _setPrototypeOf(t, o));
}
function _setPrototypeOf(t, e) {
  return (
    (_setPrototypeOf = Object.setPrototypeOf
      ? Object.setPrototypeOf.bind()
      : function (t, e) {
          return ((t.__proto__ = e), t);
        }),
    _setPrototypeOf(t, e)
  );
}
function _regenerator() {
  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e,
    t,
    r = 'function' == typeof Symbol ? Symbol : {},
    n = r.iterator || '@@iterator',
    o = r.toStringTag || '@@toStringTag';
  function i(r, n, o, i) {
    var c = n && n.prototype instanceof Generator ? n : Generator,
      u = Object.create(c.prototype);
    return (
      _regeneratorDefine2(
        u,
        '_invoke',
        (function (r, n, o) {
          var i,
            c,
            u,
            f = 0,
            p = o || [],
            y = !1,
            G = {
              p: 0,
              n: 0,
              v: e,
              a: d,
              f: d.bind(e, 4),
              d: function d(t, r) {
                return ((i = t), (c = 0), (u = e), (G.n = r), a);
              },
            };
          function d(r, n) {
            for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) {
              var o,
                i = p[t],
                d = G.p,
                l = i[2];
              r > 3
                ? (o = l === n) && ((u = i[(c = i[4]) ? 5 : ((c = 3), 3)]), (i[4] = i[5] = e))
                : i[0] <= d &&
                  ((o = r < 2 && d < i[1])
                    ? ((c = 0), (G.v = n), (G.n = i[1]))
                    : d < l && (o = r < 3 || i[0] > n || n > l) && ((i[4] = r), (i[5] = n), (G.n = l), (c = 0)));
            }
            if (o || r > 1) return a;
            throw ((y = !0), n);
          }
          return function (o, p, l) {
            if (f > 1) throw TypeError('Generator is already running');
            for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y; ) {
              i || (c ? (c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : (G.n = u)) : (G.v = u));
              try {
                if (((f = 2), i)) {
                  if ((c || (o = 'next'), (t = i[o]))) {
                    if (!(t = t.call(i, u))) throw TypeError('iterator result is not an object');
                    if (!t.done) return t;
                    ((u = t.value), c < 2 && (c = 0));
                  } else
                    (1 === c && (t = i.return) && t.call(i),
                      c < 2 && ((u = TypeError("The iterator does not provide a '" + o + "' method")), (c = 1)));
                  i = e;
                } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break;
              } catch (t) {
                ((i = e), (c = 1), (u = t));
              } finally {
                f = 1;
              }
            }
            return { value: t, done: y };
          };
        })(r, o, i),
        !0,
      ),
      u
    );
  }
  var a = {};
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}
  t = Object.getPrototypeOf;
  var c = [][n]
      ? t(t([][n]()))
      : (_regeneratorDefine2((t = {}), n, function () {
          return this;
        }),
        t),
    u = (GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c));
  function f(e) {
    return (
      Object.setPrototypeOf
        ? Object.setPrototypeOf(e, GeneratorFunctionPrototype)
        : ((e.__proto__ = GeneratorFunctionPrototype), _regeneratorDefine2(e, o, 'GeneratorFunction')),
      (e.prototype = Object.create(u)),
      e
    );
  }
  return (
    (GeneratorFunction.prototype = GeneratorFunctionPrototype),
    _regeneratorDefine2(u, 'constructor', GeneratorFunctionPrototype),
    _regeneratorDefine2(GeneratorFunctionPrototype, 'constructor', GeneratorFunction),
    (GeneratorFunction.displayName = 'GeneratorFunction'),
    _regeneratorDefine2(GeneratorFunctionPrototype, o, 'GeneratorFunction'),
    _regeneratorDefine2(u),
    _regeneratorDefine2(u, o, 'Generator'),
    _regeneratorDefine2(u, n, function () {
      return this;
    }),
    _regeneratorDefine2(u, 'toString', function () {
      return '[object Generator]';
    }),
    (_regenerator = function _regenerator() {
      return { w: i, m: f };
    })()
  );
}
function _regeneratorDefine2(e, r, n, t) {
  var i = Object.defineProperty;
  try {
    i({}, '', {});
  } catch (e) {
    i = 0;
  }
  ((_regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) {
    function o(r, n) {
      _regeneratorDefine2(e, r, function (e) {
        return this._invoke(r, n, e);
      });
    }
    r
      ? i
        ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t })
        : (e[r] = n)
      : (o('next', 0), o('throw', 1), o('return', 2));
  }),
    _regeneratorDefine2(e, r, n, t));
}
function _extends() {
  return (
    (_extends = Object.assign
      ? Object.assign.bind()
      : function (n) {
          for (var e = 1; e < arguments.length; e++) {
            var t = arguments[e];
            for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);
          }
          return n;
        }),
    _extends.apply(null, arguments)
  );
}
function _createForOfIteratorHelperLoose(r, e) {
  var t = ('undefined' != typeof Symbol && r[Symbol.iterator]) || r['@@iterator'];
  if (t) return (t = t.call(r)).next.bind(t);
  if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || (e && r && 'number' == typeof r.length)) {
    t && (r = t);
    var o = 0;
    return function () {
      return o >= r.length ? { done: !0 } : { done: !1, value: r[o++] };
    };
  }
  throw new TypeError(
    'Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.',
  );
}
function _unsupportedIterableToArray(r, a) {
  if (r) {
    if ('string' == typeof r) return _arrayLikeToArray(r, a);
    var t = {}.toString.call(r).slice(8, -1);
    return (
      'Object' === t && r.constructor && (t = r.constructor.name),
      'Map' === t || 'Set' === t
        ? Array.from(r)
        : 'Arguments' === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)
          ? _arrayLikeToArray(r, a)
          : void 0
    );
  }
}
function _arrayLikeToArray(r, a) {
  (null == a || a > r.length) && (a = r.length);
  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];
  return n;
}
function asyncGeneratorStep(n, t, e, r, o, a, c) {
  try {
    var i = n[a](c),
      u = i.value;
  } catch (n) {
    return void e(n);
  }
  i.done ? t(u) : Promise.resolve(u).then(r, o);
}
function _asyncToGenerator(n) {
  return function () {
    var t = this,
      e = arguments;
    return new Promise(function (r, o) {
      var a = n.apply(t, e);
      function _next(n) {
        asyncGeneratorStep(a, r, o, _next, _throw, 'next', n);
      }
      function _throw(n) {
        asyncGeneratorStep(a, r, o, _next, _throw, 'throw', n);
      }
      _next(void 0);
    });
  };
}
(function () {
  /**
   * FingerprintJS v4.6.2 - Copyright (c) FingerprintJS, Inc, 2025 (https://fingerprint.com)
   *
   * Licensed under Business Source License 1.1 https://mariadb.com/bsl11/
   * Licensor: FingerprintJS, Inc.
   * Licensed Work: FingerprintJS browser fingerprinting library
   * Additional Use Grant: None
   * Change Date: Four years from first release for the specific version.
   * Change License: MIT, text at https://opensource.org/license/mit/ with the following copyright notice:
   * Copyright 2015-present FingerprintJS, Inc.
   */

  var FingerprintJS = (function (n) {
    'use strict';

    var _e = function e() {
      return (
        (_e =
          Object.assign ||
          function (n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
              for (var o in (e = arguments[t])) Object.prototype.hasOwnProperty.call(e, o) && (n[o] = e[o]);
            return n;
          }),
        _e.apply(this, arguments)
      );
    };
    function t(n, e, t, r) {
      return new (t || (t = Promise))(function (o, i) {
        function a(n) {
          try {
            u(r.next(n));
          } catch (e) {
            i(e);
          }
        }
        function c(n) {
          try {
            u(r.throw(n));
          } catch (e) {
            i(e);
          }
        }
        function u(n) {
          var e;
          n.done
            ? o(n.value)
            : ((e = n.value),
              e instanceof t
                ? e
                : new t(function (n) {
                    n(e);
                  })).then(a, c);
        }
        u((r = r.apply(n, e || [])).next());
      });
    }
    function r(n, e) {
      var t,
        r,
        o,
        i,
        a = {
          label: 0,
          sent: function sent() {
            if (1 & o[0]) throw o[1];
            return o[1];
          },
          trys: [],
          ops: [],
        };
      return (
        (i = {
          next: c(0),
          throw: c(1),
          return: c(2),
        }),
        'function' == typeof Symbol &&
          (i[Symbol.iterator] = function () {
            return this;
          }),
        i
      );
      function c(c) {
        return function (u) {
          return (function (c) {
            if (t) throw new TypeError('Generator is already executing.');
            for (; i && ((i = 0), c[0] && (a = 0)), a; )
              try {
                if (
                  ((t = 1),
                  r &&
                    (o = 2 & c[0] ? r.return : c[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) &&
                    !(o = o.call(r, c[1])).done)
                )
                  return o;
                switch (((r = 0), o && (c = [2 & c[0], o.value]), c[0])) {
                  case 0:
                  case 1:
                    o = c;
                    break;
                  case 4:
                    return (
                      a.label++,
                      {
                        value: c[1],
                        done: !1,
                      }
                    );
                  case 5:
                    (a.label++, (r = c[1]), (c = [0]));
                    continue;
                  case 7:
                    ((c = a.ops.pop()), a.trys.pop());
                    continue;
                  default:
                    if (!((o = a.trys), (o = o.length > 0 && o[o.length - 1]) || (6 !== c[0] && 2 !== c[0]))) {
                      a = 0;
                      continue;
                    }
                    if (3 === c[0] && (!o || (c[1] > o[0] && c[1] < o[3]))) {
                      a.label = c[1];
                      break;
                    }
                    if (6 === c[0] && a.label < o[1]) {
                      ((a.label = o[1]), (o = c));
                      break;
                    }
                    if (o && a.label < o[2]) {
                      ((a.label = o[2]), a.ops.push(c));
                      break;
                    }
                    (o[2] && a.ops.pop(), a.trys.pop());
                    continue;
                }
                c = e.call(n, a);
              } catch (u) {
                ((c = [6, u]), (r = 0));
              } finally {
                t = o = 0;
              }
            if (5 & c[0]) throw c[1];
            return {
              value: c[0] ? c[1] : void 0,
              done: !0,
            };
          })([c, u]);
        };
      }
    }
    function o(n, e, t) {
      if (t || 2 === arguments.length)
        for (var r, o = 0, i = e.length; o < i; o++)
          (!r && o in e) || (r || (r = Array.prototype.slice.call(e, 0, o)), (r[o] = e[o]));
      return n.concat(r || Array.prototype.slice.call(e));
    }
    var i = '4.6.2';
    function a(n, e) {
      return new Promise(function (t) {
        return setTimeout(t, n, e);
      });
    }
    function c(n) {
      return !!n && 'function' == typeof n.then;
    }
    function u(n, e) {
      try {
        var t = n();
        c(t)
          ? t.then(
              function (n) {
                return e(!0, n);
              },
              function (n) {
                return e(!1, n);
              },
            )
          : e(!0, t);
      } catch (r) {
        e(!1, r);
      }
    }
    function s(n, e, o) {
      return (
        void 0 === o && (o = 16),
        t(this, void 0, void 0, function () {
          var t, i, a, c;
          return r(this, function (r) {
            switch (r.label) {
              case 0:
                ((t = Array(n.length)), (i = Date.now()), (a = 0), (r.label = 1));
              case 1:
                return a < n.length
                  ? ((t[a] = e(n[a], a)),
                    (c = Date.now()) >= i + o
                      ? ((i = c),
                        [
                          4,
                          new Promise(function (n) {
                            var e = new MessageChannel();
                            ((e.port1.onmessage = function () {
                              return n();
                            }),
                              e.port2.postMessage(null));
                          }),
                        ])
                      : [3, 3])
                  : [3, 4];
              case 2:
                (r.sent(), (r.label = 3));
              case 3:
                return (++a, [3, 1]);
              case 4:
                return [2, t];
            }
          });
        })
      );
    }
    function l(n) {
      return (n.then(void 0, function () {}), n);
    }
    function d(n) {
      return parseInt(n);
    }
    function f(n) {
      return parseFloat(n);
    }
    function m(n, e) {
      return 'number' == typeof n && isNaN(n) ? e : n;
    }
    function v(n) {
      return n.reduce(function (n, e) {
        return n + (e ? 1 : 0);
      }, 0);
    }
    function h(n, e) {
      if ((void 0 === e && (e = 1), Math.abs(e) >= 1)) return Math.round(n / e) * e;
      var t = 1 / e;
      return Math.round(n * t) / t;
    }
    function p(n, e) {
      var t = n[0] >>> 16,
        r = 65535 & n[0],
        o = n[1] >>> 16,
        i = 65535 & n[1],
        a = e[0] >>> 16,
        c = 65535 & e[0],
        u = e[1] >>> 16,
        s = 0,
        l = 0,
        d = 0,
        f = 0;
      ((d += (f += i + (65535 & e[1])) >>> 16),
        (f &= 65535),
        (l += (d += o + u) >>> 16),
        (d &= 65535),
        (s += (l += r + c) >>> 16),
        (l &= 65535),
        (s += t + a),
        (s &= 65535),
        (n[0] = (s << 16) | l),
        (n[1] = (d << 16) | f));
    }
    function b(n, e) {
      var t = n[0] >>> 16,
        r = 65535 & n[0],
        o = n[1] >>> 16,
        i = 65535 & n[1],
        a = e[0] >>> 16,
        c = 65535 & e[0],
        u = e[1] >>> 16,
        s = 65535 & e[1],
        l = 0,
        d = 0,
        f = 0,
        m = 0;
      ((f += (m += i * s) >>> 16),
        (m &= 65535),
        (d += (f += o * s) >>> 16),
        (f &= 65535),
        (d += (f += i * u) >>> 16),
        (f &= 65535),
        (l += (d += r * s) >>> 16),
        (d &= 65535),
        (l += (d += o * u) >>> 16),
        (d &= 65535),
        (l += (d += i * c) >>> 16),
        (d &= 65535),
        (l += t * s + r * u + o * c + i * a),
        (l &= 65535),
        (n[0] = (l << 16) | d),
        (n[1] = (f << 16) | m));
    }
    function y(n, e) {
      var t = n[0];
      32 === (e %= 64)
        ? ((n[0] = n[1]), (n[1] = t))
        : e < 32
          ? ((n[0] = (t << e) | (n[1] >>> (32 - e))), (n[1] = (n[1] << e) | (t >>> (32 - e))))
          : ((e -= 32), (n[0] = (n[1] << e) | (t >>> (32 - e))), (n[1] = (t << e) | (n[1] >>> (32 - e))));
    }
    function g(n, e) {
      0 !== (e %= 64) &&
        (e < 32 ? ((n[0] = n[1] >>> (32 - e)), (n[1] = n[1] << e)) : ((n[0] = n[1] << (e - 32)), (n[1] = 0)));
    }
    function w(n, e) {
      ((n[0] ^= e[0]), (n[1] ^= e[1]));
    }
    var L = [4283543511, 3981806797],
      k = [3301882366, 444984403];
    function V(n) {
      var e = [0, n[0] >>> 1];
      (w(n, e), b(n, L), (e[1] = n[0] >>> 1), w(n, e), b(n, k), (e[1] = n[0] >>> 1), w(n, e));
    }
    var S = [2277735313, 289559509],
      W = [1291169091, 658871167],
      x = [0, 5],
      Z = [0, 1390208809],
      M = [0, 944331445];
    function R(n, e) {
      var t = (function (n) {
        for (var e = new Uint8Array(n.length), t = 0; t < n.length; t++) {
          var r = n.charCodeAt(t);
          if (r > 127) return new TextEncoder().encode(n);
          e[t] = r;
        }
        return e;
      })(n);
      e = e || 0;
      var r,
        o = [0, t.length],
        i = o[1] % 16,
        a = o[1] - i,
        c = [0, e],
        u = [0, e],
        s = [0, 0],
        l = [0, 0];
      for (r = 0; r < a; r += 16)
        ((s[0] = t[r + 4] | (t[r + 5] << 8) | (t[r + 6] << 16) | (t[r + 7] << 24)),
          (s[1] = t[r] | (t[r + 1] << 8) | (t[r + 2] << 16) | (t[r + 3] << 24)),
          (l[0] = t[r + 12] | (t[r + 13] << 8) | (t[r + 14] << 16) | (t[r + 15] << 24)),
          (l[1] = t[r + 8] | (t[r + 9] << 8) | (t[r + 10] << 16) | (t[r + 11] << 24)),
          b(s, S),
          y(s, 31),
          b(s, W),
          w(c, s),
          y(c, 27),
          p(c, u),
          b(c, x),
          p(c, Z),
          b(l, W),
          y(l, 33),
          b(l, S),
          w(u, l),
          y(u, 31),
          p(u, c),
          b(u, x),
          p(u, M));
      ((s[0] = 0), (s[1] = 0), (l[0] = 0), (l[1] = 0));
      var d = [0, 0];
      switch (i) {
        case 15:
          ((d[1] = t[r + 14]), g(d, 48), w(l, d));
        case 14:
          ((d[1] = t[r + 13]), g(d, 40), w(l, d));
        case 13:
          ((d[1] = t[r + 12]), g(d, 32), w(l, d));
        case 12:
          ((d[1] = t[r + 11]), g(d, 24), w(l, d));
        case 11:
          ((d[1] = t[r + 10]), g(d, 16), w(l, d));
        case 10:
          ((d[1] = t[r + 9]), g(d, 8), w(l, d));
        case 9:
          ((d[1] = t[r + 8]), w(l, d), b(l, W), y(l, 33), b(l, S), w(u, l));
        case 8:
          ((d[1] = t[r + 7]), g(d, 56), w(s, d));
        case 7:
          ((d[1] = t[r + 6]), g(d, 48), w(s, d));
        case 6:
          ((d[1] = t[r + 5]), g(d, 40), w(s, d));
        case 5:
          ((d[1] = t[r + 4]), g(d, 32), w(s, d));
        case 4:
          ((d[1] = t[r + 3]), g(d, 24), w(s, d));
        case 3:
          ((d[1] = t[r + 2]), g(d, 16), w(s, d));
        case 2:
          ((d[1] = t[r + 1]), g(d, 8), w(s, d));
        case 1:
          ((d[1] = t[r]), w(s, d), b(s, S), y(s, 31), b(s, W), w(c, s));
      }
      return (
        w(c, o),
        w(u, o),
        p(c, u),
        p(u, c),
        V(c),
        V(u),
        p(c, u),
        p(u, c),
        ('00000000' + (c[0] >>> 0).toString(16)).slice(-8) +
          ('00000000' + (c[1] >>> 0).toString(16)).slice(-8) +
          ('00000000' + (u[0] >>> 0).toString(16)).slice(-8) +
          ('00000000' + (u[1] >>> 0).toString(16)).slice(-8)
      );
    }
    function F(n) {
      return 'function' != typeof n;
    }
    function G(n, e, o, i) {
      var a = Object.keys(n).filter(function (n) {
          return !(function (n, e) {
            for (var t = 0, r = n.length; t < r; ++t) if (n[t] === e) return !0;
            return !1;
          })(o, n);
        }),
        c = l(
          s(
            a,
            function (t) {
              return (function (n, e) {
                var t = l(
                  new Promise(function (t) {
                    var r = Date.now();
                    u(n.bind(null, e), function () {
                      for (var n = [], e = 0; e < arguments.length; e++) n[e] = arguments[e];
                      var o = Date.now() - r;
                      if (!n[0])
                        return t(function () {
                          return {
                            error: n[1],
                            duration: o,
                          };
                        });
                      var i = n[1];
                      if (F(i))
                        return t(function () {
                          return {
                            value: i,
                            duration: o,
                          };
                        });
                      t(function () {
                        return new Promise(function (n) {
                          var e = Date.now();
                          u(i, function () {
                            for (var t = [], r = 0; r < arguments.length; r++) t[r] = arguments[r];
                            var i = o + Date.now() - e;
                            if (!t[0])
                              return n({
                                error: t[1],
                                duration: i,
                              });
                            n({
                              value: t[1],
                              duration: i,
                            });
                          });
                        });
                      });
                    });
                  }),
                );
                return function () {
                  return t.then(function (n) {
                    return n();
                  });
                };
              })(n[t], e);
            },
            i,
          ),
        );
      return function () {
        return t(this, void 0, void 0, function () {
          var n, e, t, o;
          return r(this, function (r) {
            switch (r.label) {
              case 0:
                return [4, c];
              case 1:
                return [
                  4,
                  s(
                    r.sent(),
                    function (n) {
                      return l(n());
                    },
                    i,
                  ),
                ];
              case 2:
                return ((n = r.sent()), [4, Promise.all(n)]);
              case 3:
                for (e = r.sent(), t = {}, o = 0; o < a.length; ++o) t[a[o]] = e[o];
                return [2, t];
            }
          });
        });
      };
    }
    function I() {
      var n = window,
        e = navigator;
      return (
        v([
          'MSCSSMatrix' in n,
          'msSetImmediate' in n,
          'msIndexedDB' in n,
          'msMaxTouchPoints' in e,
          'msPointerEnabled' in e,
        ]) >= 4
      );
    }
    function Y() {
      var n = window,
        e = navigator;
      return v(['msWriteProfilerMark' in n, 'MSStream' in n, 'msLaunchUri' in e, 'msSaveBlob' in e]) >= 3 && !I();
    }
    function j() {
      var n = window,
        e = navigator;
      return (
        v([
          'webkitPersistentStorage' in e,
          'webkitTemporaryStorage' in e,
          0 === (e.vendor || '').indexOf('Google'),
          'webkitResolveLocalFileSystemURL' in n,
          'BatteryManager' in n,
          'webkitMediaStream' in n,
          'webkitSpeechGrammar' in n,
        ]) >= 5
      );
    }
    function C() {
      var n = window;
      return (
        v([
          'ApplePayError' in n,
          'CSSPrimitiveValue' in n,
          'Counter' in n,
          0 === navigator.vendor.indexOf('Apple'),
          'RGBColor' in n,
          'WebKitMediaKeys' in n,
        ]) >= 4
      );
    }
    function X() {
      var n = window,
        e = n.HTMLElement,
        t = n.Document;
      return (
        v([
          'safari' in n,
          !('ongestureend' in n),
          !('TouchEvent' in n),
          !('orientation' in n),
          e && !('autocapitalize' in e.prototype),
          t && 'pointerLockElement' in t.prototype,
        ]) >= 4
      );
    }
    function P() {
      var n,
        e = window;
      return (
        (n = e.print),
        /^function\s.*?\{\s*\[native code]\s*}$/.test(String(n)) && '[object WebPageNamespace]' === String(e.browser)
      );
    }
    function E() {
      var n,
        e,
        t = window;
      return (
        v([
          'buildID' in navigator,
          'MozAppearance' in
            (null !== (e = null === (n = document.documentElement) || void 0 === n ? void 0 : n.style) && void 0 !== e
              ? e
              : {}),
          'onmozfullscreenchange' in t,
          'mozInnerScreenX' in t,
          'CSSMozDocumentRule' in t,
          'CanvasCaptureMediaStream' in t,
        ]) >= 4
      );
    }
    function H() {
      var n = window,
        e = navigator,
        t = n.CSS,
        r = n.HTMLButtonElement;
      return (
        v([
          !('getStorageUpdates' in e),
          r && 'popover' in r.prototype,
          'CSSCounterStyleRule' in n,
          t.supports('font-size-adjust: ex-height 0.5'),
          t.supports('text-transform: full-width'),
        ]) >= 4
      );
    }
    function A() {
      var n = document;
      return (
        n.fullscreenElement || n.msFullscreenElement || n.mozFullScreenElement || n.webkitFullscreenElement || null
      );
    }
    function N() {
      var n = j(),
        e = E(),
        t = window,
        r = navigator,
        o = 'connection';
      return n
        ? v([!('SharedWorker' in t), r[o] && 'ontypechange' in r[o], !('sinkId' in new Audio())]) >= 2
        : !!e && v(['onorientationchange' in t, 'orientation' in t, /android/i.test(r.appVersion)]) >= 2;
    }
    function J() {
      var n = navigator,
        e = window,
        t = Audio.prototype,
        r = e.visualViewport;
      return (
        v([
          'srLatency' in t,
          'srChannelCount' in t,
          'devicePosture' in n,
          r && 'segments' in r,
          'getTextInformation' in Image.prototype,
        ]) >= 3
      );
    }
    function T() {
      var n = window,
        e = n.OfflineAudioContext || n.webkitOfflineAudioContext;
      if (!e) return -2;
      if (
        C() &&
        !X() &&
        !(function () {
          var n = window;
          return (
            v([
              'DOMRectList' in n,
              'RTCPeerConnectionIceEvent' in n,
              'SVGGeometryElement' in n,
              'ontransitioncancel' in n,
            ]) >= 3
          );
        })()
      )
        return -1;
      var t = new e(1, 5e3, 44100),
        r = t.createOscillator();
      ((r.type = 'triangle'), (r.frequency.value = 1e4));
      var o = t.createDynamicsCompressor();
      ((o.threshold.value = -50),
        (o.knee.value = 40),
        (o.ratio.value = 12),
        (o.attack.value = 0),
        (o.release.value = 0.25),
        r.connect(o),
        o.connect(t.destination),
        r.start(0));
      var i = (function (n) {
          var e = 3,
            t = 500,
            r = 500,
            o = 5e3,
            i = function i() {},
            a = new Promise(function (a, u) {
              var s = !1,
                d = 0,
                f = 0;
              n.oncomplete = function (n) {
                return a(n.renderedBuffer);
              };
              var m = function m() {
                  setTimeout(
                    function () {
                      return u(D('timeout'));
                    },
                    Math.min(r, f + o - Date.now()),
                  );
                },
                _v = function v() {
                  try {
                    var r = n.startRendering();
                    switch ((c(r) && l(r), n.state)) {
                      case 'running':
                        ((f = Date.now()), s && m());
                        break;
                      case 'suspended':
                        (document.hidden || d++, s && d >= e ? u(D('suspended')) : setTimeout(_v, t));
                    }
                  } catch (o) {
                    u(o);
                  }
                };
              (_v(),
                (i = function i() {
                  s || ((s = !0), f > 0 && m());
                }));
            });
          return [a, i];
        })(t),
        a = i[0],
        u = i[1],
        s = l(
          a.then(
            function (n) {
              return (function (n) {
                for (var e = 0, t = 0; t < n.length; ++t) e += Math.abs(n[t]);
                return e;
              })(n.getChannelData(0).subarray(4500));
            },
            function (n) {
              if ('timeout' === n.name || 'suspended' === n.name) return -3;
              throw n;
            },
          ),
        );
      return function () {
        return (u(), s);
      };
    }
    function D(n) {
      var e = new Error(n);
      return ((e.name = n), e);
    }
    function _(n, e, o) {
      var i, c, u;
      return (
        void 0 === o && (o = 50),
        t(this, void 0, void 0, function () {
          var t, s;
          return r(this, function (r) {
            switch (r.label) {
              case 0:
                ((t = document), (r.label = 1));
              case 1:
                return t.body ? [3, 3] : [4, a(o)];
              case 2:
                return (r.sent(), [3, 1]);
              case 3:
                ((s = t.createElement('iframe')), (r.label = 4));
              case 4:
                return (
                  r.trys.push([4, , 10, 11]),
                  [
                    4,
                    new Promise(function (n, r) {
                      var o = !1,
                        i = function i() {
                          ((o = !0), n());
                        };
                      ((s.onload = i),
                        (s.onerror = function (n) {
                          ((o = !0), r(n));
                        }));
                      var a = s.style;
                      (a.setProperty('display', 'block', 'important'),
                        (a.position = 'absolute'),
                        (a.top = '0'),
                        (a.left = '0'),
                        (a.visibility = 'hidden'),
                        e && 'srcdoc' in s ? (s.srcdoc = e) : (s.src = 'about:blank'),
                        t.body.appendChild(s));
                      var _c = function c() {
                        var n, e;
                        o ||
                          ('complete' ===
                          (null === (e = null === (n = s.contentWindow) || void 0 === n ? void 0 : n.document) ||
                          void 0 === e
                            ? void 0
                            : e.readyState)
                            ? i()
                            : setTimeout(_c, 10));
                      };
                      _c();
                    }),
                  ]
                );
              case 5:
                (r.sent(), (r.label = 6));
              case 6:
                return (
                  null === (c = null === (i = s.contentWindow) || void 0 === i ? void 0 : i.document) || void 0 === c
                    ? void 0
                    : c.body
                )
                  ? [3, 8]
                  : [4, a(o)];
              case 7:
                return (r.sent(), [3, 6]);
              case 8:
                return [4, n(s, s.contentWindow)];
              case 9:
                return [2, r.sent()];
              case 10:
                return (null === (u = s.parentNode) || void 0 === u || u.removeChild(s), [7]);
              case 11:
                return [2];
            }
          });
        })
      );
    }
    function z(n) {
      for (
        var e = (function (n) {
            for (
              var e,
                t,
                r = "Unexpected syntax '".concat(n, "'"),
                o = /^\s*([a-z-]*)(.*)$/i.exec(n),
                i = o[1] || void 0,
                a = {},
                c = /([.:#][\w-]+|\[.+?\])/gi,
                u = function u(n, e) {
                  ((a[n] = a[n] || []), a[n].push(e));
                };
              ;
            ) {
              var s = c.exec(o[2]);
              if (!s) break;
              var l = s[0];
              switch (l[0]) {
                case '.':
                  u('class', l.slice(1));
                  break;
                case '#':
                  u('id', l.slice(1));
                  break;
                case '[':
                  var d = /^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(l);
                  if (!d) throw new Error(r);
                  u(d[1], null !== (t = null !== (e = d[4]) && void 0 !== e ? e : d[5]) && void 0 !== t ? t : '');
                  break;
                default:
                  throw new Error(r);
              }
            }
            return [i, a];
          })(n),
          t = e[0],
          r = e[1],
          o = document.createElement(null != t ? t : 'div'),
          i = 0,
          a = Object.keys(r);
        i < a.length;
        i++
      ) {
        var c = a[i],
          u = r[c].join(' ');
        'style' === c ? B(o.style, u) : o.setAttribute(c, u);
      }
      return o;
    }
    function B(n, e) {
      for (var t = 0, r = e.split(';'); t < r.length; t++) {
        var o = r[t],
          i = /^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(o);
        if (i) {
          var a = i[1],
            c = i[2],
            u = i[4];
          n.setProperty(a, c, u || '');
        }
      }
    }
    var O = ['monospace', 'sans-serif', 'serif'],
      U = [
        'sans-serif-thin',
        'ARNO PRO',
        'Agency FB',
        'Arabic Typesetting',
        'Arial Unicode MS',
        'AvantGarde Bk BT',
        'BankGothic Md BT',
        'Batang',
        'Bitstream Vera Sans Mono',
        'Calibri',
        'Century',
        'Century Gothic',
        'Clarendon',
        'EUROSTILE',
        'Franklin Gothic',
        'Futura Bk BT',
        'Futura Md BT',
        'GOTHAM',
        'Gill Sans',
        'HELV',
        'Haettenschweiler',
        'Helvetica Neue',
        'Humanst521 BT',
        'Leelawadee',
        'Letter Gothic',
        'Levenim MT',
        'Lucida Bright',
        'Lucida Sans',
        'Menlo',
        'MS Mincho',
        'MS Outlook',
        'MS Reference Specialty',
        'MS UI Gothic',
        'MT Extra',
        'MYRIAD PRO',
        'Marlett',
        'Meiryo UI',
        'Microsoft Uighur',
        'Minion Pro',
        'Monotype Corsiva',
        'PMingLiU',
        'Pristina',
        'SCRIPTINA',
        'Segoe UI Light',
        'Serifa',
        'SimHei',
        'Small Fonts',
        'Staccato222 BT',
        'TRAJAN PRO',
        'Univers CE 55 Medium',
        'Vrinda',
        'ZWAdobeF',
      ];
    function Q(n) {
      var e,
        t,
        r,
        o = !1,
        i = (function () {
          var n = document.createElement('canvas');
          return ((n.width = 1), (n.height = 1), [n, n.getContext('2d')]);
        })(),
        a = i[0],
        c = i[1];
      return (
        !(function (n, e) {
          return !(!e || !n.toDataURL);
        })(a, c)
          ? (t = r = 'unsupported')
          : ((o = (function (n) {
              return (n.rect(0, 0, 10, 10), n.rect(2, 2, 6, 6), !n.isPointInPath(5, 5, 'evenodd'));
            })(c)),
            n
              ? (t = r = 'skipped')
              : ((e = (function (n, e) {
                  !(function (n, e) {
                    ((n.width = 240),
                      (n.height = 60),
                      (e.textBaseline = 'alphabetic'),
                      (e.fillStyle = '#f60'),
                      e.fillRect(100, 1, 62, 20),
                      (e.fillStyle = '#069'),
                      (e.font = '11pt "Times New Roman"'));
                    var t = 'Cwm fjordbank gly '.concat(String.fromCharCode(55357, 56835));
                    (e.fillText(t, 2, 15),
                      (e.fillStyle = 'rgba(102, 204, 0, 0.2)'),
                      (e.font = '18pt Arial'),
                      e.fillText(t, 4, 45));
                  })(n, e);
                  var t = K(n),
                    r = K(n);
                  if (t !== r) return ['unstable', 'unstable'];
                  !(function (n, e) {
                    ((n.width = 122), (n.height = 110), (e.globalCompositeOperation = 'multiply'));
                    for (
                      var t = 0,
                        r = [
                          ['#f2f', 40, 40],
                          ['#2ff', 80, 40],
                          ['#ff2', 60, 80],
                        ];
                      t < r.length;
                      t++
                    ) {
                      var o = r[t],
                        i = o[0],
                        a = o[1],
                        c = o[2];
                      ((e.fillStyle = i), e.beginPath(), e.arc(a, c, 40, 0, 2 * Math.PI, !0), e.closePath(), e.fill());
                    }
                    ((e.fillStyle = '#f9c'),
                      e.arc(60, 60, 60, 0, 2 * Math.PI, !0),
                      e.arc(60, 60, 20, 0, 2 * Math.PI, !0),
                      e.fill('evenodd'));
                  })(n, e);
                  var o = K(n);
                  return [o, t];
                })(a, c)),
                (t = e[0]),
                (r = e[1]))),
        {
          winding: o,
          geometry: t,
          text: r,
        }
      );
    }
    function K(n) {
      return n.toDataURL();
    }
    function q() {
      var n = screen,
        e = function e(n) {
          return m(d(n), null);
        },
        t = [e(n.width), e(n.height)];
      return (t.sort().reverse(), t);
    }
    var $,
      nn,
      en = 2500;
    function tn() {
      var n = this;
      return (
        (function () {
          if (void 0 === nn) {
            var _n = function n() {
              var e = rn();
              on(e) ? (nn = setTimeout(_n, en)) : (($ = e), (nn = void 0));
            };
            _n();
          }
        })(),
        function () {
          return t(n, void 0, void 0, function () {
            var n;
            return r(this, function (e) {
              switch (e.label) {
                case 0:
                  return on((n = rn()))
                    ? $
                      ? [2, o([], $, !0)]
                      : A()
                        ? [
                            4,
                            ((t = document),
                            (
                              t.exitFullscreen ||
                              t.msExitFullscreen ||
                              t.mozCancelFullScreen ||
                              t.webkitExitFullscreen
                            ).call(t)),
                          ]
                        : [3, 2]
                    : [3, 2];
                case 1:
                  (e.sent(), (n = rn()), (e.label = 2));
                case 2:
                  return (on(n) || ($ = n), [2, n]);
              }
              var t;
            });
          });
        }
      );
    }
    function rn() {
      var n = screen;
      return [
        m(f(n.availTop), null),
        m(f(n.width) - f(n.availWidth) - m(f(n.availLeft), 0), null),
        m(f(n.height) - f(n.availHeight) - m(f(n.availTop), 0), null),
        m(f(n.availLeft), null),
      ];
    }
    function on(n) {
      for (var e = 0; e < 4; ++e) if (n[e]) return !1;
      return !0;
    }
    function an(n) {
      var e;
      return t(this, void 0, void 0, function () {
        var t, o, i, c, u, s, l;
        return r(this, function (r) {
          switch (r.label) {
            case 0:
              for (
                t = document, o = t.createElement('div'), i = new Array(n.length), c = {}, cn(o), l = 0;
                l < n.length;
                ++l
              )
                ('DIALOG' === (u = z(n[l])).tagName && u.show(),
                  cn((s = t.createElement('div'))),
                  s.appendChild(u),
                  o.appendChild(s),
                  (i[l] = u));
              r.label = 1;
            case 1:
              return t.body ? [3, 3] : [4, a(50)];
            case 2:
              return (r.sent(), [3, 1]);
            case 3:
              t.body.appendChild(o);
              try {
                for (l = 0; l < n.length; ++l) i[l].offsetParent || (c[n[l]] = !0);
              } finally {
                null === (e = o.parentNode) || void 0 === e || e.removeChild(o);
              }
              return [2, c];
          }
        });
      });
    }
    function cn(n) {
      (n.style.setProperty('visibility', 'hidden', 'important'), n.style.setProperty('display', 'block', 'important'));
    }
    function un(n) {
      return matchMedia('(inverted-colors: '.concat(n, ')')).matches;
    }
    function sn(n) {
      return matchMedia('(forced-colors: '.concat(n, ')')).matches;
    }
    function ln(n) {
      return matchMedia('(prefers-contrast: '.concat(n, ')')).matches;
    }
    function dn(n) {
      return matchMedia('(prefers-reduced-motion: '.concat(n, ')')).matches;
    }
    function fn(n) {
      return matchMedia('(prefers-reduced-transparency: '.concat(n, ')')).matches;
    }
    function mn(n) {
      return matchMedia('(dynamic-range: '.concat(n, ')')).matches;
    }
    var vn = Math,
      hn = function hn() {
        return 0;
      };
    var pn = {
      default: [],
      apple: [
        {
          font: '-apple-system-body',
        },
      ],
      serif: [
        {
          fontFamily: 'serif',
        },
      ],
      sans: [
        {
          fontFamily: 'sans-serif',
        },
      ],
      mono: [
        {
          fontFamily: 'monospace',
        },
      ],
      min: [
        {
          fontSize: '1px',
        },
      ],
      system: [
        {
          fontFamily: 'system-ui',
        },
      ],
    };
    var bn = function bn() {
      for (var n = window; ; ) {
        var e = n.parent;
        if (!e || e === n) return !1;
        try {
          if (e.location.origin !== n.location.origin) return !0;
        } catch (t) {
          if (t instanceof Error && 'SecurityError' === t.name) return !0;
          throw t;
        }
        n = e;
      }
    };
    var yn = new Set([
        10752, 2849, 2884, 2885, 2886, 2928, 2929, 2930, 2931, 2932, 2960, 2961, 2962, 2963, 2964, 2965, 2966, 2967,
        2968, 2978, 3024, 3042, 3088, 3089, 3106, 3107, 32773, 32777, 32777, 32823, 32824, 32936, 32937, 32938, 32939,
        32968, 32969, 32970, 32971, 3317, 33170, 3333, 3379, 3386, 33901, 33902, 34016, 34024, 34076, 3408, 3410, 3411,
        3412, 3413, 3414, 3415, 34467, 34816, 34817, 34818, 34819, 34877, 34921, 34930, 35660, 35661, 35724, 35738,
        35739, 36003, 36004, 36005, 36347, 36348, 36349, 37440, 37441, 37443, 7936, 7937, 7938,
      ]),
      gn = new Set([34047, 35723, 36063, 34852, 34853, 34854, 34229, 36392, 36795, 38449]),
      wn = ['FRAGMENT_SHADER', 'VERTEX_SHADER'],
      Ln = ['LOW_FLOAT', 'MEDIUM_FLOAT', 'HIGH_FLOAT', 'LOW_INT', 'MEDIUM_INT', 'HIGH_INT'],
      kn = 'WEBGL_debug_renderer_info';
    function Vn(n) {
      if (n.webgl) return n.webgl.context;
      var e,
        t = document.createElement('canvas');
      t.addEventListener('webglCreateContextError', function () {
        return (e = void 0);
      });
      for (var r = 0, o = ['webgl', 'experimental-webgl']; r < o.length; r++) {
        var i = o[r];
        try {
          e = t.getContext(i);
        } catch (a) {}
        if (e) break;
      }
      return (
        (n.webgl = {
          context: e,
        }),
        e
      );
    }
    function Sn(n, e, t) {
      var r = n.getShaderPrecisionFormat(n[e], n[t]);
      return r ? [r.rangeMin, r.rangeMax, r.precision] : [];
    }
    function Wn(n) {
      return Object.keys(n.__proto__).filter(xn);
    }
    function xn(n) {
      return 'string' == typeof n && !n.match(/[^A-Z0-9_x]/);
    }
    function Zn() {
      return E();
    }
    function Mn(n) {
      return 'function' == typeof n.getParameter;
    }
    var Rn = {
      fonts: function fonts() {
        var n = this;
        return _(function (e, o) {
          var i = o.document;
          return t(n, void 0, void 0, function () {
            var n, e, t, o, a, c, u, s, l, d, f;
            return r(this, function (r) {
              for (
                (n = i.body).style.fontSize = '48px',
                  (e = i.createElement('div')).style.setProperty('visibility', 'hidden', 'important'),
                  t = {},
                  o = {},
                  a = function a(n) {
                    var t = i.createElement('span'),
                      r = t.style;
                    return (
                      (r.position = 'absolute'),
                      (r.top = '0'),
                      (r.left = '0'),
                      (r.fontFamily = n),
                      (t.textContent = 'mmMwWLliI0O&1'),
                      e.appendChild(t),
                      t
                    );
                  },
                  c = function c(n, e) {
                    return a("'".concat(n, "',").concat(e));
                  },
                  u = function u() {
                    for (
                      var n = {},
                        e = function e(_e2) {
                          n[_e2] = O.map(function (n) {
                            return c(_e2, n);
                          });
                        },
                        t = 0,
                        r = U;
                      t < r.length;
                      t++
                    ) {
                      e(r[t]);
                    }
                    return n;
                  },
                  s = function s(n) {
                    return O.some(function (e, r) {
                      return n[r].offsetWidth !== t[e] || n[r].offsetHeight !== o[e];
                    });
                  },
                  l = (function () {
                    return O.map(a);
                  })(),
                  d = u(),
                  n.appendChild(e),
                  f = 0;
                f < O.length;
                f++
              )
                ((t[O[f]] = l[f].offsetWidth), (o[O[f]] = l[f].offsetHeight));
              return [
                2,
                U.filter(function (n) {
                  return s(d[n]);
                }),
              ];
            });
          });
        });
      },
      domBlockers: function domBlockers(n) {
        var e = (void 0 === n ? {} : n).debug;
        return t(this, void 0, void 0, function () {
          var n, t, o, i, a;
          return r(this, function (r) {
            switch (r.label) {
              case 0:
                return C() || N()
                  ? ((c = atob),
                    (n = {
                      abpIndo: [
                        '#Iklan-Melayang',
                        '#Kolom-Iklan-728',
                        '#SidebarIklan-wrapper',
                        '[title="ALIENBOLA" i]',
                        c('I0JveC1CYW5uZXItYWRz'),
                      ],
                      abpvn: [
                        '.quangcao',
                        '#mobileCatfish',
                        c('LmNsb3NlLWFkcw=='),
                        '[id^="bn_bottom_fixed_"]',
                        '#pmadv',
                      ],
                      adBlockFinland: [
                        '.mainostila',
                        c('LnNwb25zb3JpdA=='),
                        '.ylamainos',
                        c('YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd'),
                        c('YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd'),
                      ],
                      adBlockPersian: [
                        '#navbar_notice_50',
                        '.kadr',
                        'TABLE[width="140px"]',
                        '#divAgahi',
                        c('YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd'),
                      ],
                      adBlockWarningRemoval: [
                        '#adblock-honeypot',
                        '.adblocker-root',
                        '.wp_adblock_detect',
                        c('LmhlYWRlci1ibG9ja2VkLWFk'),
                        c('I2FkX2Jsb2NrZXI='),
                      ],
                      adGuardAnnoyances: [
                        '.hs-sosyal',
                        '#cookieconsentdiv',
                        'div[class^="app_gdpr"]',
                        '.as-oil',
                        '[data-cypress="soft-push-notification-modal"]',
                      ],
                      adGuardBase: [
                        '.BetterJsPopOverlay',
                        c('I2FkXzMwMFgyNTA='),
                        c('I2Jhbm5lcmZsb2F0MjI='),
                        c('I2NhbXBhaWduLWJhbm5lcg=='),
                        c('I0FkLUNvbnRlbnQ='),
                      ],
                      adGuardChinese: [
                        c('LlppX2FkX2FfSA=='),
                        c('YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd'),
                        '#widget-quan',
                        c('YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd'),
                        c('YVtocmVmKj0iLjE5NTZobC5jb20vIl0='),
                      ],
                      adGuardFrench: [
                        '#pavePub',
                        c('LmFkLWRlc2t0b3AtcmVjdGFuZ2xl'),
                        '.mobile_adhesion',
                        '.widgetadv',
                        c('LmFkc19iYW4='),
                      ],
                      adGuardGerman: ['aside[data-portal-id="leaderboard"]'],
                      adGuardJapanese: [
                        '#kauli_yad_1',
                        c('YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0='),
                        c('Ll9wb3BJbl9pbmZpbml0ZV9hZA=='),
                        c('LmFkZ29vZ2xl'),
                        c('Ll9faXNib29zdFJldHVybkFk'),
                      ],
                      adGuardMobile: [
                        c('YW1wLWF1dG8tYWRz'),
                        c('LmFtcF9hZA=='),
                        'amp-embed[type="24smi"]',
                        '#mgid_iframe1',
                        c('I2FkX2ludmlld19hcmVh'),
                      ],
                      adGuardRussian: [
                        c('YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0='),
                        c('LnJlY2xhbWE='),
                        'div[id^="smi2adblock"]',
                        c('ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd'),
                        '#psyduckpockeball',
                      ],
                      adGuardSocial: [
                        c('YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0='),
                        c('YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0='),
                        '.etsy-tweet',
                        '#inlineShare',
                        '.popup-social',
                      ],
                      adGuardSpanishPortuguese: [
                        '#barraPublicidade',
                        '#Publicidade',
                        '#publiEspecial',
                        '#queTooltip',
                        '.cnt-publi',
                      ],
                      adGuardTrackingProtection: [
                        '#qoo-counter',
                        c('YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=='),
                        c('YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0='),
                        c('YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=='),
                        '#top100counter',
                      ],
                      adGuardTurkish: [
                        '#backkapat',
                        c('I3Jla2xhbWk='),
                        c('YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0='),
                        c('YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd'),
                        c('YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ=='),
                      ],
                      bulgarian: [
                        c('dGQjZnJlZW5ldF90YWJsZV9hZHM='),
                        '#ea_intext_div',
                        '.lapni-pop-over',
                        '#xenium_hot_offers',
                      ],
                      easyList: [
                        '.yb-floorad',
                        c('LndpZGdldF9wb19hZHNfd2lkZ2V0'),
                        c('LnRyYWZmaWNqdW5reS1hZA=='),
                        '.textad_headline',
                        c('LnNwb25zb3JlZC10ZXh0LWxpbmtz'),
                      ],
                      easyListChina: [
                        c('LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=='),
                        c('LmZyb250cGFnZUFkdk0='),
                        '#taotaole',
                        '#aafoot.top_box',
                        '.cfa_popup',
                      ],
                      easyListCookie: [
                        '.ezmob-footer',
                        '.cc-CookieWarning',
                        '[data-cookie-number]',
                        c('LmF3LWNvb2tpZS1iYW5uZXI='),
                        '.sygnal24-gdpr-modal-wrap',
                      ],
                      easyListCzechSlovak: [
                        '#onlajny-stickers',
                        c('I3Jla2xhbW5pLWJveA=='),
                        c('LnJla2xhbWEtbWVnYWJvYXJk'),
                        '.sklik',
                        c('W2lkXj0ic2tsaWtSZWtsYW1hIl0='),
                      ],
                      easyListDutch: [
                        c('I2FkdmVydGVudGll'),
                        c('I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=='),
                        '.adstekst',
                        c('YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0='),
                        '#semilo-lrectangle',
                      ],
                      easyListGermany: [
                        '#SSpotIMPopSlider',
                        c('LnNwb25zb3JsaW5rZ3J1ZW4='),
                        c('I3dlcmJ1bmdza3k='),
                        c('I3Jla2xhbWUtcmVjaHRzLW1pdHRl'),
                        c('YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0='),
                      ],
                      easyListItaly: [
                        c('LmJveF9hZHZfYW5udW5jaQ=='),
                        '.sb-box-pubbliredazionale',
                        c('YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd'),
                        c('YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd'),
                        c('YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ=='),
                      ],
                      easyListLithuania: [
                        c('LnJla2xhbW9zX3RhcnBhcw=='),
                        c('LnJla2xhbW9zX251b3JvZG9z'),
                        c('aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd'),
                        c('aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd'),
                        c('aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd'),
                      ],
                      estonian: [c('QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==')],
                      fanboyAnnoyances: [
                        '#ac-lre-player',
                        '.navigate-to-top',
                        '#subscribe_popup',
                        '.newsletter_holder',
                        '#back-top',
                      ],
                      fanboyAntiFacebook: ['.util-bar-module-firefly-visible'],
                      fanboyEnhancedTrackers: [
                        '.open.pushModal',
                        '#issuem-leaky-paywall-articles-zero-remaining-nag',
                        '#sovrn_container',
                        'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',
                        '.BlockNag__Card',
                      ],
                      fanboySocial: [
                        '#FollowUs',
                        '#meteored_share',
                        '#social_follow',
                        '.article-sharer',
                        '.community__social-desc',
                      ],
                      frellwitSwedish: [
                        c('YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=='),
                        c('YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=='),
                        'article.category-samarbete',
                        c('ZGl2LmhvbGlkQWRz'),
                        'ul.adsmodern',
                      ],
                      greekAdBlock: [
                        c('QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd'),
                        c('QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=='),
                        c('QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd'),
                        'DIV.agores300',
                        'TABLE.advright',
                      ],
                      hungarian: [
                        '#cemp_doboz',
                        '.optimonk-iframe-container',
                        c('LmFkX19tYWlu'),
                        c('W2NsYXNzKj0iR29vZ2xlQWRzIl0='),
                        '#hirdetesek_box',
                      ],
                      iDontCareAboutCookies: [
                        '.alert-info[data-block-track*="CookieNotice"]',
                        '.ModuleTemplateCookieIndicator',
                        '.o--cookies--container',
                        '#cookies-policy-sticky',
                        '#stickyCookieBar',
                      ],
                      icelandicAbp: [c('QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==')],
                      latvian: [
                        c(
                          'YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0=',
                        ),
                        c(
                          'YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==',
                        ),
                      ],
                      listKr: [
                        c('YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0='),
                        c('I2xpdmVyZUFkV3JhcHBlcg=='),
                        c('YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=='),
                        c('aW5zLmZhc3R2aWV3LWFk'),
                        '.revenue_unit_item.dable',
                      ],
                      listeAr: [
                        c('LmdlbWluaUxCMUFk'),
                        '.right-and-left-sponsers',
                        c('YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=='),
                        c('YVtocmVmKj0iYm9vcmFxLm9yZyJd'),
                        c('YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd'),
                      ],
                      listeFr: [
                        c('YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=='),
                        c('I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=='),
                        c('YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0='),
                        '.site-pub-interstitiel',
                        'div[id^="crt-"][data-criteo-id]',
                      ],
                      officialPolish: [
                        '#ceneo-placeholder-ceneo-12',
                        c('W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd'),
                        c('YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=='),
                        c('YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=='),
                        c('ZGl2I3NrYXBpZWNfYWQ='),
                      ],
                      ro: [
                        c('YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd'),
                        c('YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd'),
                        c('YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0='),
                        c('YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd'),
                        'a[href^="/url/"]',
                      ],
                      ruAd: [
                        c('YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd'),
                        c('YVtocmVmKj0iLy91dGltZy5ydS8iXQ=='),
                        c('YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0='),
                        '#pgeldiz',
                        '.yandex-rtb-block',
                      ],
                      thaiAds: [
                        'a[href*=macau-uta-popup]',
                        c('I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=='),
                        c('LmFkczMwMHM='),
                        '.bumq',
                        '.img-kosana',
                      ],
                      webAnnoyancesUltralist: [
                        '#mod-social-share-2',
                        '#social-tools',
                        c('LmN0cGwtZnVsbGJhbm5lcg=='),
                        '.zergnet-recommend',
                        '.yt.btn-link.btn-md.btn',
                      ],
                    }),
                    (t = Object.keys(n)),
                    [
                      4,
                      an(
                        (a = []).concat.apply(
                          a,
                          t.map(function (e) {
                            return n[e];
                          }),
                        ),
                      ),
                    ])
                  : [2, void 0];
              case 1:
                return (
                  (o = r.sent()),
                  e &&
                    (function (n, e) {
                      for (var t = 'DOM blockers debug:\n```', r = 0, o = Object.keys(n); r < o.length; r++) {
                        var i = o[r];
                        t += '\n'.concat(i, ':');
                        for (var a = 0, c = n[i]; a < c.length; a++) {
                          var u = c[a];
                          t += '\n  '.concat(e[u] ? '' : '', ' ').concat(u);
                        }
                      }
                      console.log(''.concat(t, '\n```'));
                    })(n, o),
                  (i = t.filter(function (e) {
                    var t = n[e];
                    return (
                      v(
                        t.map(function (n) {
                          return o[n];
                        }),
                      ) >
                      0.6 * t.length
                    );
                  })).sort(),
                  [2, i]
                );
            }
            var c;
          });
        });
      },
      fontPreferences: function fontPreferences() {
        return (function (n, e) {
          void 0 === e && (e = 4e3);
          return _(function (t, r) {
            var i = r.document,
              a = i.body,
              c = a.style;
            ((c.width = ''.concat(e, 'px')),
              (c.webkitTextSizeAdjust = c.textSizeAdjust = 'none'),
              j() ? (a.style.zoom = ''.concat(1 / r.devicePixelRatio)) : C() && (a.style.zoom = 'reset'));
            var u = i.createElement('div');
            return (
              (u.textContent = o([], Array((e / 20) | 0), !0)
                .map(function () {
                  return 'word';
                })
                .join(' ')),
              a.appendChild(u),
              n(i, a)
            );
          }, '<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">');
        })(function (n, e) {
          for (var t = {}, r = {}, o = 0, i = Object.keys(pn); o < i.length; o++) {
            var a = i[o],
              c = pn[a],
              u = c[0],
              s = void 0 === u ? {} : u,
              l = c[1],
              d = void 0 === l ? 'mmMwWLliI0fiflO&1' : l,
              f = n.createElement('span');
            ((f.textContent = d), (f.style.whiteSpace = 'nowrap'));
            for (var m = 0, v = Object.keys(s); m < v.length; m++) {
              var h = v[m],
                p = s[h];
              void 0 !== p && (f.style[h] = p);
            }
            ((t[a] = f), e.append(n.createElement('br'), f));
          }
          for (var b = 0, y = Object.keys(pn); b < y.length; b++) {
            r[(a = y[b])] = t[a].getBoundingClientRect().width;
          }
          return r;
        });
      },
      audio: function audio() {
        return (C() && H() && P()) ||
          (j() &&
            J() &&
            ((n = window),
            (e = n.URLPattern),
            v([
              'union' in Set.prototype,
              'Iterator' in n,
              e && 'hasRegExpGroups' in e.prototype,
              'RGB8' in WebGLRenderingContext.prototype,
            ]) >= 3))
          ? -4
          : T();
        var n, e;
      },
      screenFrame: function screenFrame() {
        var n = this;
        if (C() && H() && P())
          return function () {
            return Promise.resolve(void 0);
          };
        var e = tn();
        return function () {
          return t(n, void 0, void 0, function () {
            var n, t;
            return r(this, function (r) {
              switch (r.label) {
                case 0:
                  return [4, e()];
                case 1:
                  return (
                    (n = r.sent()),
                    [
                      2,
                      [
                        (t = function t(n) {
                          return null === n ? null : h(n, 10);
                        })(n[0]),
                        t(n[1]),
                        t(n[2]),
                        t(n[3]),
                      ],
                    ]
                  );
              }
            });
          });
        };
      },
      canvas: function canvas() {
        return Q(C() && H() && P());
      },
      osCpu: function osCpu() {
        return navigator.oscpu;
      },
      languages: function languages() {
        var n,
          e = navigator,
          t = [],
          r = e.language || e.userLanguage || e.browserLanguage || e.systemLanguage;
        if ((void 0 !== r && t.push([r]), Array.isArray(e.languages)))
          (j() &&
            v([
              !('MediaSettingsRange' in (n = window)),
              'RTCEncodedAudioFrame' in n,
              '' + n.Intl == '[object Intl]',
              '' + n.Reflect == '[object Reflect]',
            ]) >= 3) ||
            t.push(e.languages);
        else if ('string' == typeof e.languages) {
          var o = e.languages;
          o && t.push(o.split(','));
        }
        return t;
      },
      colorDepth: function colorDepth() {
        return window.screen.colorDepth;
      },
      deviceMemory: function deviceMemory() {
        return m(f(navigator.deviceMemory), void 0);
      },
      screenResolution: function screenResolution() {
        if (!(C() && H() && P())) return q();
      },
      hardwareConcurrency: function hardwareConcurrency() {
        return m(d(navigator.hardwareConcurrency), void 0);
      },
      timezone: function timezone() {
        var n,
          e = null === (n = window.Intl) || void 0 === n ? void 0 : n.DateTimeFormat;
        if (e) {
          var t = new e().resolvedOptions().timeZone;
          if (t) return t;
        }
        var r,
          o =
            ((r = new Date().getFullYear()),
            -Math.max(f(new Date(r, 0, 1).getTimezoneOffset()), f(new Date(r, 6, 1).getTimezoneOffset())));
        return 'UTC'.concat(o >= 0 ? '+' : '').concat(o);
      },
      sessionStorage: function sessionStorage() {
        try {
          return !!window.sessionStorage;
        } catch (n) {
          return !0;
        }
      },
      localStorage: function localStorage() {
        try {
          return !!window.localStorage;
        } catch (n) {
          return !0;
        }
      },
      indexedDB: function indexedDB() {
        if (!I() && !Y())
          try {
            return !!window.indexedDB;
          } catch (n) {
            return !0;
          }
      },
      openDatabase: function openDatabase() {
        return !!window.openDatabase;
      },
      cpuClass: function cpuClass() {
        return navigator.cpuClass;
      },
      platform: function platform() {
        var n = navigator.platform;
        return 'MacIntel' === n && C() && !X()
          ? (function () {
              if ('iPad' === navigator.platform) return !0;
              var n = screen,
                e = n.width / n.height;
              return (
                v(['MediaSource' in window, !!Element.prototype.webkitRequestFullscreen, e > 0.65 && e < 1.53]) >= 2
              );
            })()
            ? 'iPad'
            : 'iPhone'
          : n;
      },
      plugins: function plugins() {
        var n = navigator.plugins;
        if (n) {
          for (var e = [], t = 0; t < n.length; ++t) {
            var r = n[t];
            if (r) {
              for (var o = [], i = 0; i < r.length; ++i) {
                var a = r[i];
                o.push({
                  type: a.type,
                  suffixes: a.suffixes,
                });
              }
              e.push({
                name: r.name,
                description: r.description,
                mimeTypes: o,
              });
            }
          }
          return e;
        }
      },
      touchSupport: function touchSupport() {
        var n,
          e = navigator,
          t = 0;
        void 0 !== e.maxTouchPoints
          ? (t = d(e.maxTouchPoints))
          : void 0 !== e.msMaxTouchPoints && (t = e.msMaxTouchPoints);
        try {
          (document.createEvent('TouchEvent'), (n = !0));
        } catch (r) {
          n = !1;
        }
        return {
          maxTouchPoints: t,
          touchEvent: n,
          touchStart: 'ontouchstart' in window,
        };
      },
      vendor: function vendor() {
        return navigator.vendor || '';
      },
      vendorFlavors: function vendorFlavors() {
        for (
          var n = [],
            e = 0,
            t = [
              'chrome',
              'safari',
              '__crWeb',
              '__gCrWeb',
              'yandex',
              '__yb',
              '__ybro',
              '__firefox__',
              '__edgeTrackingPreventionStatistics',
              'webkit',
              'oprt',
              'samsungAr',
              'ucweb',
              'UCShellJava',
              'puffinDevice',
            ];
          e < t.length;
          e++
        ) {
          var r = t[e],
            o = window[r];
          o && 'object' == typeof o && n.push(r);
        }
        return n.sort();
      },
      cookiesEnabled: function cookiesEnabled() {
        var n = document;
        try {
          n.cookie = 'cookietest=1; SameSite=Strict;';
          var e = -1 !== n.cookie.indexOf('cookietest=');
          return ((n.cookie = 'cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT'), e);
        } catch (t) {
          return !1;
        }
      },
      colorGamut: function colorGamut() {
        for (var n = 0, e = ['rec2020', 'p3', 'srgb']; n < e.length; n++) {
          var t = e[n];
          if (matchMedia('(color-gamut: '.concat(t, ')')).matches) return t;
        }
      },
      invertedColors: function invertedColors() {
        return !!un('inverted') || (!un('none') && void 0);
      },
      forcedColors: function forcedColors() {
        return !!sn('active') || (!sn('none') && void 0);
      },
      monochrome: function monochrome() {
        if (matchMedia('(min-monochrome: 0)').matches) {
          for (var n = 0; n <= 100; ++n) if (matchMedia('(max-monochrome: '.concat(n, ')')).matches) return n;
          throw new Error('Too high value');
        }
      },
      contrast: function contrast() {
        return ln('no-preference')
          ? 0
          : ln('high') || ln('more')
            ? 1
            : ln('low') || ln('less')
              ? -1
              : ln('forced')
                ? 10
                : void 0;
      },
      reducedMotion: function reducedMotion() {
        return !!dn('reduce') || (!dn('no-preference') && void 0);
      },
      reducedTransparency: function reducedTransparency() {
        return !!fn('reduce') || (!fn('no-preference') && void 0);
      },
      hdr: function hdr() {
        return !!mn('high') || (!mn('standard') && void 0);
      },
      math: function math() {
        var n,
          e = vn.acos || hn,
          t = vn.acosh || hn,
          r = vn.asin || hn,
          o = vn.asinh || hn,
          i = vn.atanh || hn,
          a = vn.atan || hn,
          c = vn.sin || hn,
          u = vn.sinh || hn,
          s = vn.cos || hn,
          l = vn.cosh || hn,
          d = vn.tan || hn,
          f = vn.tanh || hn,
          m = vn.exp || hn,
          v = vn.expm1 || hn,
          h = vn.log1p || hn;
        return {
          acos: e(0.12312423423423424),
          acosh: t(1e308),
          acoshPf: ((n = 1e154), vn.log(n + vn.sqrt(n * n - 1))),
          asin: r(0.12312423423423424),
          asinh: o(1),
          asinhPf: (function (n) {
            return vn.log(n + vn.sqrt(n * n + 1));
          })(1),
          atanh: i(0.5),
          atanhPf: (function (n) {
            return vn.log((1 + n) / (1 - n)) / 2;
          })(0.5),
          atan: a(0.5),
          sin: c(-1e300),
          sinh: u(1),
          sinhPf: (function (n) {
            return vn.exp(n) - 1 / vn.exp(n) / 2;
          })(1),
          cos: s(10.000000000123),
          cosh: l(1),
          coshPf: (function (n) {
            return (vn.exp(n) + 1 / vn.exp(n)) / 2;
          })(1),
          tan: d(-1e300),
          tanh: f(1),
          tanhPf: (function (n) {
            return (vn.exp(2 * n) - 1) / (vn.exp(2 * n) + 1);
          })(1),
          exp: m(1),
          expm1: v(1),
          expm1Pf: (function (n) {
            return vn.exp(n) - 1;
          })(1),
          log1p: h(10),
          log1pPf: (function (n) {
            return vn.log(1 + n);
          })(10),
          powPI: (function (n) {
            return vn.pow(vn.PI, n);
          })(-100),
        };
      },
      pdfViewerEnabled: function pdfViewerEnabled() {
        return navigator.pdfViewerEnabled;
      },
      architecture: function architecture() {
        var n = new Float32Array(1),
          e = new Uint8Array(n.buffer);
        return ((n[0] = 1 / 0), (n[0] = n[0] - n[0]), e[3]);
      },
      applePay: function applePay() {
        var n = window.ApplePaySession;
        if ('function' != typeof (null == n ? void 0 : n.canMakePayments)) return -1;
        if (bn()) return -3;
        try {
          return n.canMakePayments() ? 1 : 0;
        } catch (e) {
          return (function (n) {
            if (n instanceof Error && 'InvalidAccessError' === n.name && /\bfrom\b.*\binsecure\b/i.test(n.message))
              return -2;
            throw n;
          })(e);
        }
      },
      privateClickMeasurement: function privateClickMeasurement() {
        var n,
          e = document.createElement('a'),
          t = null !== (n = e.attributionSourceId) && void 0 !== n ? n : e.attributionsourceid;
        return void 0 === t ? void 0 : String(t);
      },
      audioBaseLatency: function audioBaseLatency() {
        if (!(N() || C())) return -2;
        if (!window.AudioContext) return -1;
        var n = new AudioContext().baseLatency;
        return null == n ? -1 : isFinite(n) ? n : -3;
      },
      dateTimeLocale: function dateTimeLocale() {
        if (!window.Intl) return -1;
        var n = window.Intl.DateTimeFormat;
        if (!n) return -2;
        var e = n().resolvedOptions().locale;
        return e || '' === e ? e : -3;
      },
      webGlBasics: function webGlBasics(n) {
        var e,
          t,
          r,
          o,
          i,
          a,
          c = Vn(n.cache);
        if (!c) return -1;
        if (!Mn(c)) return -2;
        var u = Zn() ? null : c.getExtension(kn);
        return {
          version: (null === (e = c.getParameter(c.VERSION)) || void 0 === e ? void 0 : e.toString()) || '',
          vendor: (null === (t = c.getParameter(c.VENDOR)) || void 0 === t ? void 0 : t.toString()) || '',
          vendorUnmasked: u
            ? null === (r = c.getParameter(u.UNMASKED_VENDOR_WEBGL)) || void 0 === r
              ? void 0
              : r.toString()
            : '',
          renderer: (null === (o = c.getParameter(c.RENDERER)) || void 0 === o ? void 0 : o.toString()) || '',
          rendererUnmasked: u
            ? null === (i = c.getParameter(u.UNMASKED_RENDERER_WEBGL)) || void 0 === i
              ? void 0
              : i.toString()
            : '',
          shadingLanguageVersion:
            (null === (a = c.getParameter(c.SHADING_LANGUAGE_VERSION)) || void 0 === a ? void 0 : a.toString()) || '',
        };
      },
      webGlExtensions: function webGlExtensions(n) {
        var e = Vn(n.cache);
        if (!e) return -1;
        if (!Mn(e)) return -2;
        var t = e.getSupportedExtensions(),
          r = e.getContextAttributes(),
          o = [],
          i = [],
          a = [],
          c = [],
          u = [];
        if (r)
          for (var s = 0, l = Object.keys(r); s < l.length; s++) {
            var d = l[s];
            i.push(''.concat(d, '=').concat(r[d]));
          }
        for (var f = 0, m = Wn(e); f < m.length; f++) {
          var v = e[(L = m[f])];
          a.push(
            ''
              .concat(L, '=')
              .concat(v)
              .concat(yn.has(v) ? '='.concat(e.getParameter(v)) : ''),
          );
        }
        if (t)
          for (var h = 0, p = t; h < p.length; h++) {
            var b = p[h];
            if (!((b === kn && Zn()) || ('WEBGL_polygon_mode' === b && (j() || C())))) {
              var y = e.getExtension(b);
              if (y)
                for (var g = 0, w = Wn(y); g < w.length; g++) {
                  var L;
                  v = y[(L = w[g])];
                  c.push(
                    ''
                      .concat(L, '=')
                      .concat(v)
                      .concat(gn.has(v) ? '='.concat(e.getParameter(v)) : ''),
                  );
                }
              else o.push(b);
            }
          }
        for (var k = 0, V = wn; k < V.length; k++)
          for (var S = V[k], W = 0, x = Ln; W < x.length; W++) {
            var Z = x[W],
              M = Sn(e, S, Z);
            u.push(''.concat(S, '.').concat(Z, '=').concat(M.join(',')));
          }
        return (
          c.sort(),
          a.sort(),
          {
            contextAttributes: i,
            parameters: a,
            shaderPrecisions: u,
            extensions: t,
            extensionParameters: c,
            unsupportedExtensions: o,
          }
        );
      },
    };
    var Fn = '$ if upgrade to Pro: https://fpjs.dev/pro';
    function Gn(n) {
      var e = (function (n) {
          if (N()) return 0.4;
          if (C()) return !X() || (H() && P()) ? 0.3 : 0.5;
          var e = 'value' in n.platform ? n.platform.value : '';
          if (/^Win/.test(e)) return 0.6;
          if (/^Mac/.test(e)) return 0.5;
          return 0.7;
        })(n),
        t = (function (n) {
          return h(0.99 + 0.01 * n, 1e-4);
        })(e);
      return {
        score: e,
        comment: Fn.replace(/\$/g, ''.concat(t)),
      };
    }
    function In(n) {
      return JSON.stringify(
        n,
        function (n, t) {
          return t instanceof Error
            ? _e(
                {
                  name: (r = t).name,
                  message: r.message,
                  stack: null === (o = r.stack) || void 0 === o ? void 0 : o.split('\n'),
                },
                r,
              )
            : t;
          var r, o;
        },
        2,
      );
    }
    function Yn(n) {
      return R(
        (function (n) {
          for (var e = '', t = 0, r = Object.keys(n).sort(); t < r.length; t++) {
            var o = r[t],
              i = n[o],
              a = 'error' in i ? 'error' : JSON.stringify(i.value);
            e += ''
              .concat(e ? '|' : '')
              .concat(o.replace(/([:|\\])/g, '\\$1'), ':')
              .concat(a);
          }
          return e;
        })(n),
      );
    }
    function jn(n) {
      return (
        void 0 === n && (n = 50),
        (function (n, e) {
          void 0 === e && (e = 1 / 0);
          var t = window.requestIdleCallback;
          return t
            ? new Promise(function (n) {
                return t.call(
                  window,
                  function () {
                    return n();
                  },
                  {
                    timeout: e,
                  },
                );
              })
            : a(Math.min(n, e));
        })(n, 2 * n)
      );
    }
    function Cn(n, e) {
      var o = Date.now();
      return {
        get: function get(a) {
          return t(this, void 0, void 0, function () {
            var t, c, u;
            return r(this, function (r) {
              switch (r.label) {
                case 0:
                  return ((t = Date.now()), [4, n()]);
                case 1:
                  return (
                    (c = r.sent()),
                    (u = (function (n) {
                      var e,
                        t = Gn(n);
                      return {
                        get visitorId() {
                          return (void 0 === e && (e = Yn(this.components)), e);
                        },
                        set visitorId(n) {
                          e = n;
                        },
                        confidence: t,
                        components: n,
                        version: i,
                      };
                    })(c)),
                    (e || (null == a ? void 0 : a.debug)) &&
                      console.log(
                        'Copy the text below to get the debug data:\n\n```\nversion: '
                          .concat(u.version, '\nuserAgent: ')
                          .concat(navigator.userAgent, '\ntimeBetweenLoadAndGet: ')
                          .concat(t - o, '\nvisitorId: ')
                          .concat(u.visitorId, '\ncomponents: ')
                          .concat(In(c), '\n```'),
                      ),
                    [2, u]
                  );
              }
            });
          });
        },
      };
    }
    function Xn(n) {
      var e;
      return (
        void 0 === n && (n = {}),
        t(this, void 0, void 0, function () {
          var t, o, a;
          return r(this, function (r) {
            switch (r.label) {
              case 0:
                return (
                  (null === (e = n.monitoring) || void 0 === e || e) && (function () {})(),
                  (t = n.delayFallback),
                  (o = n.debug),
                  [4, jn(t)]
                );
              case 1:
                return (
                  r.sent(),
                  (a = (function (n) {
                    return G(Rn, n, []);
                  })({
                    cache: {},
                    debug: o,
                  })),
                  [2, Cn(a, o)]
                );
            }
          });
        })
      );
    }
    var Pn = {
        load: Xn,
        hashComponents: Yn,
        componentsToDebugString: In,
      },
      En = R;
    return (
      (n.componentsToDebugString = In),
      (n.default = Pn),
      (n.getFullscreenElement = A),
      (n.getUnstableAudioFingerprint = T),
      (n.getUnstableCanvasFingerprint = Q),
      (n.getUnstableScreenFrame = tn),
      (n.getUnstableScreenResolution = q),
      (n.getWebGLContext = Vn),
      (n.hashComponents = Yn),
      (n.isAndroid = N),
      (n.isChromium = j),
      (n.isDesktopWebKit = X),
      (n.isEdgeHTML = Y),
      (n.isGecko = E),
      (n.isSamsungInternet = J),
      (n.isTrident = I),
      (n.isWebKit = C),
      (n.load = Xn),
      (n.loadSources = G),
      (n.murmurX64Hash128 = En),
      (n.prepareForSources = jn),
      (n.sources = Rn),
      (n.transformSource = function (n, e) {
        var t = function t(n) {
          return F(n)
            ? e(n)
            : function () {
                var t = n();
                return c(t) ? t.then(e) : e(t);
              };
        };
        return function (e) {
          var r = n(e);
          return c(r) ? r.then(t) : t(r);
        };
      }),
      (n.withIframe = _),
      Object.defineProperty(n, '__esModule', {
        value: !0,
      }),
      n
    );
  })({});
  if (typeof FingerprintJS !== 'undefined') window.fpLib = FingerprintJS;
})();

/*--- Tracking Script ---*/

function removeInitialTrackingCookiesAndStorage() {
  var _document$cookie$spli, _document$cookie$spli2;
  var cookiesToRemove = [
    'utm_source',
    'utm_content',
    'utm_medium',
    'utm_campaign',
    'uniqueId',
    'solomon_email',
    'solomon_phone',
    'solomon_firstName',
    'solomon_lastName',
    'solomon_city',
    'solomon_state',
    'solomon_zip',
    'solomon_country',
  ];
  var pastDate = new Date(0).toUTCString();
  var currentUtmsTrack =
    (_document$cookie$spli = document.cookie.split('; ').find(function (row) {
      return row.startsWith('utmsTrack=');
    })) == null
      ? void 0
      : _document$cookie$spli.split('=')[1];
  var uniqueIdCookie =
    (_document$cookie$spli2 = document.cookie.split('; ').find(function (row) {
      return row.startsWith('uniqueId=');
    })) == null
      ? void 0
      : _document$cookie$spli2.split('=')[1];
  var uniqueIdLocalStorage = null;
  try {
    uniqueIdLocalStorage = localStorage.getItem('uniqueId');
  } catch (e) {}
  var uniqueId = uniqueIdCookie || uniqueIdLocalStorage;
  if (currentUtmsTrack && uniqueId) {
    document.cookie = 'utmsTrack=' + currentUtmsTrack.replace(uniqueId, '_') + '; path=/;';
  }
  cookiesToRemove.forEach(function (cookieName) {
    document.cookie = cookieName + '=; expires=' + pastDate + '; path=/;';
  });
  var localStorageKeysToRemove = [
    'utm_source',
    'utm_medium',
    'utm_campaign',
    'utm_content',
    'SolomonUserInternal',
    'sol_email_sent',
    'uniqueId',
  ];
  localStorageKeysToRemove.forEach(function (key) {
    try {
      localStorage.removeItem(key);
    } catch (e) {}
  });
  try {
    window.SolomonUser = null;
    window.solomonCustomer = null;
  } catch (e) {}
}
function waitForVtexCheckout(maxWaitTime) {
  if (maxWaitTime === void 0) {
    maxWaitTime = 5000;
  }
  return new Promise(function (resolve) {
    var _vtexjs;
    if ((_vtexjs = window.vtexjs) != null && _vtexjs.checkout) {
      return resolve(true);
    }
    var startTime = Date.now();
    var interval = setInterval(function () {
      var _vtexjs2;
      if ((_vtexjs2 = window.vtexjs) != null && _vtexjs2.checkout) {
        clearInterval(interval);
        return resolve(true);
      }
      if (Date.now() - startTime >= maxWaitTime) {
        clearInterval(interval);
        return resolve(false);
      }
    }, 100);
  });
}
function updateVtexMarketingData(_x) {
  return _updateVtexMarketingData.apply(this, arguments);
}
function _updateVtexMarketingData() {
  _updateVtexMarketingData = _asyncToGenerator(
    /*#__PURE__*/ _regenerator().m(function _callee57(utms) {
      var _window$vtexjs2,
        _window$vtexjs3,
        vtexCheckoutExists,
        orderFormId,
        orderForm,
        currentMarketingData,
        customDataPayload,
        response,
        _t10;
      return _regenerator().w(
        function (_context58) {
          while (1)
            switch ((_context58.p = _context58.n)) {
              case 0:
                _context58.p = 0;
                _context58.n = 1;
                return waitForVtexCheckout(5000);
              case 1:
                vtexCheckoutExists = _context58.v;
                if (vtexCheckoutExists) {
                  _context58.n = 2;
                  break;
                }
                Logger.error(
                  '[NEMU] window.vtexjs.checkout no est disponvel aps 5 segundos. A atualizao foi cancelada.',
                );
                return _context58.a(2);
              case 2:
                orderFormId =
                  (_window$vtexjs2 = window.vtexjs) == null ||
                  (_window$vtexjs2 = _window$vtexjs2.checkout) == null ||
                  (_window$vtexjs2 = _window$vtexjs2.orderForm) == null
                    ? void 0
                    : _window$vtexjs2.orderFormId;
                _context58.n = 3;
                return window.vtexjs.checkout.getOrderForm();
              case 3:
                orderForm = _context58.v;
                currentMarketingData = orderForm.marketingData || {};
                if (orderFormId) {
                  _context58.n = 4;
                  break;
                }
                Logger.error('[NEMU] No foi possvel encontrar o orderFormId. A atualizao foi cancelada.');
                return _context58.a(2);
              case 4:
                customDataPayload = _extends({}, currentMarketingData, {
                  marketingTags: [].concat(currentMarketingData.marketingTags, [utms.utm_term]),
                });
                Logger.info('[NEMU] Atualizando o marketingData:', JSON.stringify(customDataPayload, null, 2));
                _context58.n = 5;
                return (_window$vtexjs3 = window.vtexjs) == null || (_window$vtexjs3 = _window$vtexjs3.checkout) == null
                  ? void 0
                  : _window$vtexjs3.sendAttachment('marketingData', customDataPayload);
              case 5:
                response = _context58.v;
                if (response) {
                  Logger.info('[NEMU] marketingData da VTEX atualizado com sucesso!');
                } else {
                  Logger.error('[NEMU] Falha ao atualizar o marketingData da VTEX');
                }
                _context58.n = 7;
                break;
              case 6:
                _context58.p = 6;
                _t10 = _context58.v;
                Logger.error('[NEMU] Ocorreu um erro inesperado ao tentar atualizar o marketingData da VTEX:', _t10);
              case 7:
                return _context58.a(2);
            }
        },
        _callee57,
        null,
        [[0, 6]],
      );
    }),
  );
  return _updateVtexMarketingData.apply(this, arguments);
}
function waitForVtexSessionId(key, platform) {
  return new Promise(function (resolve) {
    if (platform !== 'vtex') {
      return resolve(null);
    }
    var getCookieValue = function getCookieValue(cookieName) {
      var cookies = document.cookie.split(';');
      for (var _iterator = _createForOfIteratorHelperLoose(cookies), _step; !(_step = _iterator()).done; ) {
        var cookie = _step.value;
        var trimmedCookie = cookie.trim();
        var equalIndex = trimmedCookie.indexOf('=');
        if (equalIndex === -1) continue;
        var name = trimmedCookie.substring(0, equalIndex);
        var value = trimmedCookie.substring(equalIndex + 1);
        if (name === cookieName && value) {
          if (value.startsWith('__ofid=')) {
            return value.substring(7);
          }
          return value;
        }
      }
      return null;
    };
    var interval = setInterval(function () {
      var _JSON$parse;
      var item = localStorage.getItem(key);
      if (
        item !== null &&
        ((_JSON$parse = JSON.parse(item)) == null ? void 0 : _JSON$parse.id) !== 'default-order-form'
      ) {
        var _JSON$parse2;
        clearInterval(interval);
        clearTimeout(timeout);
        return resolve((_JSON$parse2 = JSON.parse(item)) == null ? void 0 : _JSON$parse2.id);
      }
      var cookieValue = getCookieValue('checkout.vtex.com');
      if (cookieValue) {
        clearInterval(interval);
        clearTimeout(timeout);
        return resolve(cookieValue);
      }
    }, 100);
    var timeout = setTimeout(function () {
      clearInterval(interval);
      var cookieValue = getCookieValue('checkout.vtex.com');
      resolve(cookieValue);
    }, 10000);
  });
}
function removeEmptyObjectProperties(obj) {
  if (Array.isArray(obj)) {
    return obj
      .filter(function (item) {
        return typeof item === 'boolean' || !!item;
      })
      .map(removeEmptyObjectProperties);
  } else if (obj && typeof obj === 'object') {
    return Object.entries(obj).reduce(
      function (accumulator, _ref) {
        var key = _ref[0],
          value = _ref[1];
        var convertedValue = removeEmptyObjectProperties(value);
        var HAS_PROPERTY_VALUE =
          convertedValue !== null &&
          convertedValue !== undefined &&
          convertedValue !== '' &&
          (!(typeof convertedValue === 'number') || true) &&
          (!(typeof convertedValue === 'boolean') || true) &&
          (!Array.isArray(convertedValue) || convertedValue.length !== 0) &&
          (typeof convertedValue !== 'object' || Object.keys(convertedValue).length !== 0);
        if (HAS_PROPERTY_VALUE) {
          accumulator[key] = convertedValue;
        } else {
          delete accumulator[key];
        }
        return accumulator;
      },
      Array.isArray(obj) ? [] : {},
    );
  } else {
    return obj;
  }
}
function generateDomain() {
  var hostname = window.location.hostname;
  var parts = hostname.split('.');
  var domain = '';
  var tld = '';
  if (parts.length >= 3) {
    tld = parts.pop();
    domain = parts.pop();
    if (tld === 'br') {
      domain = parts.pop() + '.' + domain;
    }
    domain = domain + '.' + tld;
  } else {
    tld = parts.pop();
    domain = parts.pop() || '';
    domain = !!domain ? domain + '.' + tld : tld;
  }
  domain = '.' + domain;
  return domain;
}
var EncoderAndDecoderNemu = /*#__PURE__*/ (function () {
  function EncoderAndDecoderNemu() {}
  EncoderAndDecoderNemu.encodeBase36 = function encodeBase36(value) {
    return Array.prototype.map
      .call(value, function (c) {
        return c.charCodeAt(0).toString(36);
      })
      .join('');
  };
  EncoderAndDecoderNemu.decodeBase36 = function decodeBase36(value) {
    var chunked = [];
    for (var i = 0; i < value.length; i = i + 2) {
      chunked[i] = String.fromCharCode(parseInt(value[i] + value[i + 1], 36));
    }
    return chunked.join('');
  };
  EncoderAndDecoderNemu.encodeBase36Ascii = function encodeBase36Ascii(value) {
    return Array.prototype.map
      .call(value, function (c) {
        var b36 = EncoderAndDecoderNemu.encodeBase36(c);
        if (b36.length === 1) {
          b36 = '0' + b36;
        }
        return b36;
      })
      .join('');
  };
  EncoderAndDecoderNemu.decodeBase36Ascii = function decodeBase36Ascii(value) {
    if (!value) return '';
    return value == null
      ? void 0
      : value.replace(/[a-z0-9]{2}/gi, function (s) {
          return EncoderAndDecoderNemu.decodeBase36(s);
        });
  };
  EncoderAndDecoderNemu.encodeBase64 = function encodeBase64(value) {
    return btoa(value).replace(/=+$/, '');
  };
  return EncoderAndDecoderNemu;
})();
var Logger = /*#__PURE__*/ (function () {
  function Logger() {}
  Logger.error = function error() {
    for (var _len = arguments.length, message = new Array(_len), _key = 0; _key < _len; _key++) {
      message[_key] = arguments[_key];
    }
    console.error('[ERROR] Nemu Pixel ', message);
  };
  Logger.info = function info() {
    for (var _len2 = arguments.length, message = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      message[_key2] = arguments[_key2];
    }
    console.log('[INFO] Nemu Pixel ', message);
  };
  return Logger;
})();
var Storage = /*#__PURE__*/ (function () {
  function Storage() {}
  Storage.isJsonString = function isJsonString(value) {
    try {
      JSON.parse(value);
      return true;
    } catch (error) {
      return false;
    }
  };
  var _proto = Storage.prototype;
  _proto.setCookie = function setCookie(name, value, date) {
    var cookieValue = typeof value === 'object' ? JSON.stringify(value) : value;
    if (!!date) {
      document.cookie = name + '=' + cookieValue + '; expires=' + date.toUTCString() + '; path=/';
    } else {
      document.cookie = name + '=' + cookieValue + '; path=/';
    }
  };
  _proto.removeCookie = function removeCookie(name) {
    var pastDate = new Date(0);
    document.cookie = name + '=; expires=' + pastDate.toUTCString();
  };
  _proto.hasCookiesEnabled = function hasCookiesEnabled() {
    var isCookiesEnabled = navigator.cookieEnabled;
    if (typeof navigator.cookieEnabled === 'undefined' || !isCookiesEnabled) {
      document.cookie = 'check';
      isCookiesEnabled = document.cookie.indexOf('check') !== -1;
    }
    return isCookiesEnabled;
  };
  _proto.getCookieByName = function getCookieByName(name) {
    try {
      var cookieString = '; ' + document.cookie;
      var parts = cookieString.split('; ').filter(function (part) {
        return part;
      });
      for (var _iterator2 = _createForOfIteratorHelperLoose(parts), _step2; !(_step2 = _iterator2()).done; ) {
        var part = _step2.value;
        var _part$split = part.split('='),
          key = _part$split[0],
          value = _part$split[1];
        if (key === name) {
          var decodedResult = value && decodeURIComponent(value);
          return decodedResult
            ? Storage.isJsonString(decodedResult)
              ? JSON.parse(decodedResult)
              : decodedResult
            : null;
        }
      }
    } catch (error) {
      Logger.error('Error parsing cookie value:', error);
      return null;
    }
  };
  _proto.setLocalStorageItem = function setLocalStorageItem(key, value) {
    try {
      var stringValue = typeof value === 'object' ? JSON.stringify(value) : value;
      localStorage.setItem(key, stringValue);
    } catch (error) {
      Logger.error('Error setting localStorage item:', error);
    }
  };
  _proto.getLocalStorageItem = function getLocalStorageItem(key) {
    try {
      var item = localStorage.getItem(key);
      if (!item) return null;
      return Storage.isJsonString(item) ? JSON.parse(item) : item;
    } catch (error) {
      Logger.error('Error getting localStorage item:', error);
      return null;
    }
  };
  _proto.removeLocalStorageItem = function removeLocalStorageItem(key) {
    try {
      localStorage.removeItem(key);
    } catch (error) {
      Logger.error('Error removing localStorage item:', error);
    }
  };
  return Storage;
})();
var BaseService = /*#__PURE__*/ (function () {
  function BaseService() {
    this.MAX_PAYLOAD_SIZE_FOR_BEACON = 64 * 1024;
  }
  var _proto2 = BaseService.prototype;
  // 64KB
  _proto2.api =
    /*#__PURE__*/
    (function () {
      var _api = _asyncToGenerator(
        /*#__PURE__*/ _regenerator().m(function _callee(url, method, options) {
          var response, data;
          return _regenerator().w(function (_context) {
            while (1)
              switch (_context.n) {
                case 0:
                  if (method === void 0) {
                    method = 'GET';
                  }
                  _context.n = 1;
                  return fetch(
                    url,
                    _extends(
                      {
                        method: method,
                        headers: {
                          'Content-Type': 'application/json',
                        },
                      },
                      options,
                    ),
                  );
                case 1:
                  response = _context.v;
                  if (!(response.status !== 204)) {
                    _context.n = 3;
                    break;
                  }
                  _context.n = 2;
                  return response.json();
                case 2:
                  data = _context.v;
                case 3:
                  if (response.ok) {
                    _context.n = 4;
                    break;
                  }
                  throw data;
                case 4:
                  return _context.a(2, data);
              }
          }, _callee);
        }),
      );
      function api(_x2, _x3, _x4) {
        return _api.apply(this, arguments);
      }
      return api;
    })();
  _proto2.sendBeaconOrFetch = /*#__PURE__*/ (function () {
    var _sendBeaconOrFetch = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee2(url, body) {
        var payloadSize, success, fetchOptions;
        return _regenerator().w(
          function (_context2) {
            while (1)
              switch (_context2.n) {
                case 0:
                  payloadSize = new Blob([body]).size;
                  console.log('[NEMU WEB PIXEL] Payload size: ' + payloadSize + ' bytes');
                  if (!(payloadSize < this.MAX_PAYLOAD_SIZE_FOR_BEACON && navigator.sendBeacon)) {
                    _context2.n = 1;
                    break;
                  }
                  success = navigator.sendBeacon(url, body);
                  if (!success) {
                    _context2.n = 1;
                    break;
                  }
                  return _context2.a(2);
                case 1:
                  fetchOptions = {
                    method: 'POST',
                    body: body,
                    headers: {
                      'Content-Type': 'text/plain',
                    },
                  };
                  if (payloadSize < this.MAX_PAYLOAD_SIZE_FOR_BEACON) {
                    fetchOptions.keepalive = true;
                  }
                  _context2.n = 2;
                  return fetch(url, fetchOptions);
                case 2:
                  return _context2.a(2);
              }
          },
          _callee2,
          this,
        );
      }),
    );
    function sendBeaconOrFetch(_x5, _x6) {
      return _sendBeaconOrFetch.apply(this, arguments);
    }
    return sendBeaconOrFetch;
  })();
  _proto2.apiNoContentType = /*#__PURE__*/ (function () {
    var _apiNoContentType = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee3(url, method, options) {
        var response, data;
        return _regenerator().w(function (_context3) {
          while (1)
            switch (_context3.n) {
              case 0:
                if (method === void 0) {
                  method = 'GET';
                }
                _context3.n = 1;
                return fetch(
                  url,
                  _extends(
                    {
                      method: method,
                    },
                    options,
                  ),
                );
              case 1:
                response = _context3.v;
                _context3.n = 2;
                return response.text();
              case 2:
                data = _context3.v;
                if (response.headers.get('content-type') === 'application/json') {
                  try {
                    data = JSON.parse(data);
                  } catch (_unused) {}
                }
                if (response.ok) {
                  _context3.n = 3;
                  break;
                }
                throw data;
              case 3:
                return _context3.a(2, data);
            }
        }, _callee3);
      }),
    );
    function apiNoContentType(_x7, _x8, _x9) {
      return _apiNoContentType.apply(this, arguments);
    }
    return apiNoContentType;
  })();
  return BaseService;
})();
var ClientService = /*#__PURE__*/ (function (_BaseService2) {
  function ClientService() {
    return _BaseService2.apply(this, arguments) || this;
  }
  _inheritsLoose(ClientService, _BaseService2);
  ClientService.create = function create() {
    return new ClientService();
  };
  var _proto3 = ClientService.prototype;
  _proto3.getClientHash = /*#__PURE__*/ (function () {
    var _getClientHash = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee4() {
        var fpPromise, fp, _yield$fp$get, clientHash, _t;
        return _regenerator().w(
          function (_context4) {
            while (1)
              switch ((_context4.p = _context4.n)) {
                case 0:
                  _context4.p = 0;
                  fpPromise = window.fpLib.load();
                  _context4.n = 1;
                  return fpPromise;
                case 1:
                  fp = _context4.v;
                  _context4.n = 2;
                  return fp.get();
                case 2:
                  _yield$fp$get = _context4.v;
                  clientHash = _yield$fp$get.visitorId;
                  return _context4.a(2, clientHash);
                case 3:
                  _context4.p = 3;
                  _t = _context4.v;
                  return _context4.a(2, null);
              }
          },
          _callee4,
          null,
          [[0, 3]],
        );
      }),
    );
    function getClientHash() {
      return _getClientHash.apply(this, arguments);
    }
    return getClientHash;
  })();
  return ClientService;
})(BaseService);
var SessionHistoryService = /*#__PURE__*/ (function (_BaseService3) {
  function SessionHistoryService(_ref2) {
    var _this;
    var baseURL = _ref2.baseURL;
    _this = _BaseService3.call(this) || this;
    _this.baseURL = void 0;
    Object.assign(_this, {
      baseURL: baseURL,
    });
    return _this;
  }
  _inheritsLoose(SessionHistoryService, _BaseService3);
  var _proto4 = SessionHistoryService.prototype;
  _proto4.sendInitateCheckoutEvent = /*#__PURE__*/ (function () {
    var _sendInitateCheckoutEvent = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee5(_ref3) {
        var trackingId, trackingSessionId, trackingSessionHistoryId;
        return _regenerator().w(
          function (_context5) {
            while (1)
              switch (_context5.n) {
                case 0:
                  ((trackingId = _ref3.trackingId),
                    (trackingSessionId = _ref3.trackingSessionId),
                    (trackingSessionHistoryId = _ref3.trackingSessionHistoryId));
                  _context5.n = 1;
                  return this.api(
                    this.baseURL +
                      '/trackings/' +
                      trackingId +
                      '/sessions/' +
                      trackingSessionId +
                      '/histories/' +
                      trackingSessionHistoryId +
                      '/initiate_checkout',
                    'POST',
                    {},
                  );
                case 1:
                  return _context5.a(2, _context5.v);
              }
          },
          _callee5,
          this,
        );
      }),
    );
    function sendInitateCheckoutEvent(_x0) {
      return _sendInitateCheckoutEvent.apply(this, arguments);
    }
    return sendInitateCheckoutEvent;
  })();
  _proto4.getLastBySessionId = /*#__PURE__*/ (function () {
    var _getLastBySessionId = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee6(trackingId, sessionId) {
        return _regenerator().w(
          function (_context6) {
            while (1)
              switch (_context6.n) {
                case 0:
                  _context6.n = 1;
                  return this.api(
                    this.baseURL + '/trackings/' + trackingId + '/sessions/' + sessionId + '/histories/last',
                  );
                case 1:
                  return _context6.a(2, _context6.v);
              }
          },
          _callee6,
          this,
        );
      }),
    );
    function getLastBySessionId(_x1, _x10) {
      return _getLastBySessionId.apply(this, arguments);
    }
    return getLastBySessionId;
  })();
  _proto4.updateNuvemshopId = /*#__PURE__*/ (function () {
    var _updateNuvemshopId = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee7(_ref4) {
        var trackingId, trackingSessionId, nuvemShopId, _t2;
        return _regenerator().w(
          function (_context7) {
            while (1)
              switch ((_context7.p = _context7.n)) {
                case 0:
                  ((trackingId = _ref4.trackingId),
                    (trackingSessionId = _ref4.trackingSessionId),
                    (nuvemShopId = _ref4.nuvemShopId));
                  _context7.p = 1;
                  if (nuvemShopId) {
                    _context7.n = 2;
                    break;
                  }
                  return _context7.a(2);
                case 2:
                  _context7.n = 3;
                  return this.api(
                    this.baseURL + '/trackings/' + trackingId + '/sessions/' + trackingSessionId + '/histories/last',
                    'PUT',
                    {
                      body: JSON.stringify({
                        nuvemShopId: nuvemShopId,
                        vtexSessionId: nuvemShopId,
                      }),
                    },
                  );
                case 3:
                  return _context7.a(2, _context7.v);
                case 4:
                  _context7.p = 4;
                  _t2 = _context7.v;
                  Logger.error(JSON.stringify(_t2));
                  return _context7.a(2);
              }
          },
          _callee7,
          this,
          [[1, 4]],
        );
      }),
    );
    function updateNuvemshopId(_x11) {
      return _updateNuvemshopId.apply(this, arguments);
    }
    return updateNuvemshopId;
  })();
  _proto4.updateVtexSessionId = /*#__PURE__*/ (function () {
    var _updateVtexSessionId = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee8(_ref5) {
        var trackingId, trackingSessionId, vtexSessionId, MAX_RETRIES, RETRY_DELAY_MS, attempt, _t3;
        return _regenerator().w(
          function (_context8) {
            while (1)
              switch ((_context8.p = _context8.n)) {
                case 0:
                  ((trackingId = _ref5.trackingId),
                    (trackingSessionId = _ref5.trackingSessionId),
                    (vtexSessionId = _ref5.vtexSessionId));
                  MAX_RETRIES = 3;
                  RETRY_DELAY_MS = 500;
                  attempt = 1;
                case 1:
                  if (!(attempt <= MAX_RETRIES)) {
                    _context8.n = 9;
                    break;
                  }
                  _context8.p = 2;
                  if (vtexSessionId) {
                    _context8.n = 3;
                    break;
                  }
                  return _context8.a(2);
                case 3:
                  _context8.n = 4;
                  return this.api(
                    this.baseURL + '/trackings/' + trackingId + '/sessions/' + trackingSessionId + '/histories/last',
                    'PUT',
                    {
                      body: JSON.stringify({
                        vtexSessionId: vtexSessionId,
                      }),
                    },
                  );
                case 4:
                  return _context8.a(2, _context8.v);
                case 5:
                  _context8.p = 5;
                  _t3 = _context8.v;
                  Logger.error(
                    'Attempt ' + attempt + ' failed with 500 error. Retrying in ' + RETRY_DELAY_MS + 'ms...',
                  );
                  if (!(attempt < MAX_RETRIES)) {
                    _context8.n = 7;
                    break;
                  }
                  _context8.n = 6;
                  return new Promise(function (resolve) {
                    return setTimeout(resolve, RETRY_DELAY_MS);
                  });
                case 6:
                  _context8.n = 8;
                  break;
                case 7:
                  Logger.error('All ' + MAX_RETRIES + ' retry attempts failed.');
                  return _context8.a(2);
                case 8:
                  attempt++;
                  _context8.n = 1;
                  break;
                case 9:
                  return _context8.a(2);
              }
          },
          _callee8,
          this,
          [[2, 5]],
        );
      }),
    );
    function updateVtexSessionId(_x12) {
      return _updateVtexSessionId.apply(this, arguments);
    }
    return updateVtexSessionId;
  })();
  _proto4.updateTraySessionId = /*#__PURE__*/ (function () {
    var _updateTraySessionId = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee9(_ref6) {
        var trackingId, trackingSessionId, traySessionId, _t4;
        return _regenerator().w(
          function (_context9) {
            while (1)
              switch ((_context9.p = _context9.n)) {
                case 0:
                  ((trackingId = _ref6.trackingId),
                    (trackingSessionId = _ref6.trackingSessionId),
                    (traySessionId = _ref6.traySessionId));
                  _context9.p = 1;
                  if (traySessionId) {
                    _context9.n = 2;
                    break;
                  }
                  return _context9.a(2);
                case 2:
                  _context9.n = 3;
                  return this.api(
                    this.baseURL + '/trackings/' + trackingId + '/sessions/' + trackingSessionId + '/histories/last',
                    'PUT',
                    {
                      body: JSON.stringify({
                        traySessionId: traySessionId,
                      }),
                    },
                  );
                case 3:
                  return _context9.a(2, _context9.v);
                case 4:
                  _context9.p = 4;
                  _t4 = _context9.v;
                  Logger.error(JSON.stringify(_t4));
                  return _context9.a(2);
              }
          },
          _callee9,
          this,
          [[1, 4]],
        );
      }),
    );
    function updateTraySessionId(_x13) {
      return _updateTraySessionId.apply(this, arguments);
    }
    return updateTraySessionId;
  })();
  _proto4.add = /*#__PURE__*/ (function () {
    var _add = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee0(_ref7) {
        var _window, _window2, _window3, _document, _document2;
        var sessionId,
          productData,
          trackingId,
          referrer,
          clientHash,
          facebookParams,
          platform,
          vtexSessionId,
          nuvemShopId,
          woocommerceKey,
          queryParams,
          response;
        return _regenerator().w(
          function (_context0) {
            while (1)
              switch (_context0.n) {
                case 0:
                  ((sessionId = _ref7.sessionId),
                    (productData = _ref7.productData),
                    (trackingId = _ref7.trackingId),
                    (referrer = _ref7.referrer),
                    (clientHash = _ref7.clientHash),
                    (facebookParams = _ref7.facebookParams),
                    (platform = _ref7.platform));
                  _context0.n = 1;
                  return waitForVtexSessionId('orderform', platform);
                case 1:
                  vtexSessionId = _context0.v;
                  nuvemShopId =
                    (_window = window) != null &&
                    (_window = _window.LS) != null &&
                    (_window = _window.cart) != null &&
                    _window.id
                      ? String(
                          (_window2 = window) == null ||
                            (_window2 = _window2.LS) == null ||
                            (_window2 = _window2.cart) == null
                            ? void 0
                            : _window2.id,
                        )
                      : null;
                  woocommerceKey = null;
                  if (
                    (_window3 = window) != null &&
                    (_window3 = _window3.location) != null &&
                    (_window3 = _window3.pathname) != null &&
                    _window3.includes('efetuar-pagamento')
                  ) {
                    queryParams = new URLSearchParams(window.location.search);
                    woocommerceKey = queryParams.get('key') || null;
                  }
                  _context0.n = 2;
                  return this.api(
                    this.baseURL + '/trackings/' + trackingId + '/sessions/' + sessionId + '/histories',
                    'POST',
                    {
                      body: JSON.stringify(
                        _extends(
                          {
                            referrer: referrer,
                            origin: window.location.origin,
                            userAgent: navigator.userAgent,
                            traySessionId:
                              ((_document = document) == null || (_document = _document.documentElement) == null
                                ? void 0
                                : _document.getAttribute('data-session')) ||
                              ((_document2 = document) == null || (_document2 = _document2.documentElement) == null
                                ? void 0
                                : _document2.getAttribute('data-checkout-session_id')),
                            vtexSessionId: vtexSessionId || nuvemShopId || woocommerceKey,
                            nuvemShopId: nuvemShopId || woocommerceKey,
                            clientHash: clientHash,
                            productData: productData,
                          },
                          facebookParams,
                        ),
                      ),
                    },
                  );
                case 2:
                  response = _context0.v;
                  return _context0.a(2, response);
              }
          },
          _callee0,
          this,
        );
      }),
    );
    function add(_x14) {
      return _add.apply(this, arguments);
    }
    return add;
  })();
  return SessionHistoryService;
})(BaseService);
var SessionService = /*#__PURE__*/ (function (_BaseService4) {
  function SessionService(_ref8) {
    var _this2;
    var baseURL = _ref8.baseURL;
    _this2 = _BaseService4.call(this) || this;
    _this2.baseURL = void 0;
    Object.assign(_this2, {
      baseURL: baseURL,
    });
    return _this2;
  }
  _inheritsLoose(SessionService, _BaseService4);
  var _proto5 = SessionService.prototype;
  _proto5.add = /*#__PURE__*/ (function () {
    var _add2 = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee1(_ref9) {
        var _JSON$parse3, _window4, _window5, _window6, _document3, _document4;
        var trackingId, productData, clientHash, referrer, vtexSessionId, nuvemShopId, woocommerceKey, queryParams;
        return _regenerator().w(
          function (_context1) {
            while (1)
              switch (_context1.n) {
                case 0:
                  ((trackingId = _ref9.trackingId),
                    (productData = _ref9.productData),
                    (clientHash = _ref9.clientHash),
                    (referrer = _ref9.referrer));
                  vtexSessionId =
                    ((_JSON$parse3 = JSON.parse(window.localStorage.getItem('orderform'))) == null
                      ? void 0
                      : _JSON$parse3.id) || null;
                  nuvemShopId =
                    (_window4 = window) != null &&
                    (_window4 = _window4.LS) != null &&
                    (_window4 = _window4.cart) != null &&
                    _window4.id
                      ? String(
                          (_window5 = window) == null ||
                            (_window5 = _window5.LS) == null ||
                            (_window5 = _window5.cart) == null
                            ? void 0
                            : _window5.id,
                        )
                      : null;
                  woocommerceKey = null;
                  if (
                    (_window6 = window) != null &&
                    (_window6 = _window6.location) != null &&
                    (_window6 = _window6.pathname) != null &&
                    _window6.includes('efetuar-pagamento')
                  ) {
                    queryParams = new URLSearchParams(window.location.search);
                    woocommerceKey = queryParams.get('key') || null;
                  }
                  _context1.n = 1;
                  return this.api(this.baseURL + '/trackings/' + trackingId + '/sessions', 'POST', {
                    body: JSON.stringify({
                      referrer: referrer,
                      origin: window.location.origin,
                      userAgent: navigator.userAgent,
                      traySessionId:
                        ((_document3 = document) == null || (_document3 = _document3.documentElement) == null
                          ? void 0
                          : _document3.getAttribute('data-session')) ||
                        ((_document4 = document) == null || (_document4 = _document4.documentElement) == null
                          ? void 0
                          : _document4.getAttribute('data-checkout-session_id')),
                      vtexSessionId: vtexSessionId || nuvemShopId || woocommerceKey,
                      nuvemShopId: nuvemShopId || woocommerceKey,
                      clientHash: clientHash,
                      productData: productData,
                    }),
                  });
                case 1:
                  return _context1.a(2, _context1.v);
              }
          },
          _callee1,
          this,
        );
      }),
    );
    function add(_x15) {
      return _add2.apply(this, arguments);
    }
    return add;
  })();
  _proto5.getBy = /*#__PURE__*/ (function () {
    var _getBy = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee10(_ref0) {
        var trackingId, clientSessionId, clientHash, _t5;
        return _regenerator().w(
          function (_context10) {
            while (1)
              switch ((_context10.p = _context10.n)) {
                case 0:
                  ((trackingId = _ref0.trackingId),
                    (clientSessionId = _ref0.clientSessionId),
                    (clientHash = _ref0.clientHash));
                  _context10.p = 1;
                  _context10.n = 2;
                  return this.api(
                    this.baseURL +
                      '/trackings/' +
                      trackingId +
                      '/sessions?clientHash=' +
                      clientHash +
                      '&clientSessionId=' +
                      clientSessionId,
                  );
                case 2:
                  return _context10.a(2, _context10.v);
                case 3:
                  _context10.p = 3;
                  _t5 = _context10.v;
                  Logger.error(_t5);
                case 4:
                  return _context10.a(2);
              }
          },
          _callee10,
          this,
          [[1, 3]],
        );
      }),
    );
    function getBy(_x16) {
      return _getBy.apply(this, arguments);
    }
    return getBy;
  })();
  return SessionService;
})(BaseService);
var UtmScanner = /*#__PURE__*/ (function () {
  function UtmScanner(_ref1) {
    var _this3 = this;
    var full_url = _ref1.full_url;
    this.utmNames = ['utm_source', 'utm_campaign', 'utm_medium', 'utm_content'];
    this.utmNamesGa4 = [].concat(this.utmNames, ['utm_term']);
    this.utmNamesNemu = ['nemu_source', 'nemu_campaign', 'nemu_medium', 'nemu_content', 'nemu_adset'];
    this.hotmartUtmNames = ['src', 'sck'];
    this.ga4Platforms = [
      'shopify_ga4',
      'nuvemshop_ga4',
      'bagy_ga4',
      'tray_ga4',
      'magazord_ga4',
      'shopify_plus_others_ga4',
      'jetecommerce',
      'wake_ga4',
      'woocommerce_ga4',
      'uappi_ga4',
    ];
    this.delimiters = /[|\\]/;
    this.full_url = window.location.search;
    this.paidPlatforms = ['facebook', 'google', 'pinterest', 'tiktok'];
    this.utmsDefaultMappings = {
      utm_campaign: function utm_campaign(utmName, utmParams, searchParams) {
        var utm_campaign = searchParams == null ? void 0 : searchParams.get(utmName);
        var name = '';
        var id = '';
        if ((searchParams == null ? void 0 : searchParams.get('utm_source')) === 'google') {
          var _ref10 = (utm_campaign == null ? void 0 : utm_campaign.split(/[|\\-]/)) || [];
          name = _ref10[0];
          id = _ref10[1];
        } else {
          var _ref11 = (utm_campaign == null ? void 0 : utm_campaign.split(/[|\\]/)) || [];
          name = _ref11[0];
          id = _ref11[1];
        }
        utmParams['utm_campaignName'] = name;
        utmParams['utm_campaignId'] = id;
        utmParams[utmName] = utm_campaign;
      },
      utm_medium: function utm_medium(utmName, utmParams, searchParams) {
        var _utm_medium;
        var utm_medium = searchParams == null ? void 0 : searchParams.get(utmName);
        var _ref12 = ((_utm_medium = utm_medium) == null ? void 0 : _utm_medium.split(_this3.delimiters)) || [],
          adsetName = _ref12[0],
          adsetId = _ref12[1];
        utmParams['utm_adsetName'] = adsetName;
        utmParams['utm_adsetId'] = adsetId;
        utmParams[utmName] = utm_medium;
      },
      utm_content: function utm_content(utmName, utmParams, searchParams) {
        var _utmParts;
        var utm_content = searchParams == null ? void 0 : searchParams.get(utmName);
        var utmParts = (utm_content == null ? void 0 : utm_content.split(_this3.delimiters)) || [];
        if ((_utmParts = utmParts[utmParts.length - 1]) != null && _utmParts.startsWith('nemu_')) {
          utmParts.pop();
        }
        var adId = utmParts[utmParts.length - 1];
        var adName = utmParts.slice(0, utmParts.length - 1).join('|');
        if (utmParts.length === 1) {
          adName = utmParts[0];
          adId = null;
        }
        utmParams['utm_adName'] = adName;
        utmParams['utm_adId'] = adId;
        utmParams[utmName] = adName || adId ? (adName || '') + '\\' + (adId || '') : null;
      },
    };
    this.utmsGa4Mappings = {
      utm_campaign: function utm_campaign(utmName, utmParams, searchParams) {
        var utm_campaign = searchParams == null ? void 0 : searchParams.get(utmName);
        var name = '';
        var id = '';
        if ((searchParams == null ? void 0 : searchParams.get('utm_source')) === 'google') {
          var _ref13 = (utm_campaign == null ? void 0 : utm_campaign.split(/[|\\-]/)) || [];
          name = _ref13[0];
          id = _ref13[1];
        } else {
          var _ref14 = (utm_campaign == null ? void 0 : utm_campaign.split(/[|\\]/)) || [];
          name = _ref14[0];
          id = _ref14[1];
        }
        utmParams['utm_campaignName'] = name;
        utmParams['utm_campaignId'] = id;
        utmParams[utmName] = utm_campaign;
      },
      utm_content: function utm_content(utmName, utmParams, searchParams) {
        var _utmParts2;
        var utm_content = searchParams == null ? void 0 : searchParams.get(utmName);
        var utmParts = (utm_content == null ? void 0 : utm_content.split(_this3.delimiters)) || [];
        if ((_utmParts2 = utmParts[utmParts.length - 1]) != null && _utmParts2.startsWith('nemu_')) {
          utmParts.pop();
        }
        var adId = utmParts[utmParts.length - 1];
        var adName = utmParts.slice(0, utmParts.length - 1).join('|');
        if (utmParts.length === 1) {
          adName = utmParts[0];
          adId = null;
        }
        utmParams['utm_adName'] = adName;
        utmParams['utm_adId'] = adId;
        utmParams[utmName] = adName || adId ? (adName || '') + '\\' + (adId || '') : null;
      },
      utm_medium: function utm_medium(utmName, utmParams, searchParams) {
        var utm_medium = searchParams == null ? void 0 : searchParams.get(utmName);
        if (
          (!_this3.paidPlatforms.includes(searchParams == null ? void 0 : searchParams.get('utm_source')) &&
            utm_medium !== 'cpc') ||
          (_this3.paidPlatforms.includes(searchParams == null ? void 0 : searchParams.get('utm_source')) &&
            !(searchParams != null && searchParams.get('utm_term')) &&
            utm_medium !== 'cpc')
        ) {
          var utmParts = (utm_medium == null ? void 0 : utm_medium.split(_this3.delimiters)) || [];
          var adsetId = utmParts[utmParts.length - 1] || '';
          var adsetName = utmParts.slice(0, utmParts.length - 1).join('|') || '';
          utmParams['utm_adsetName'] = adsetName;
          utmParams['utm_adsetId'] = adsetId;
          utmParams[utmName] = utm_medium;
        }
      },
      utm_term: function utm_term(utmName, utmParams, searchParams) {
        var utm_term = searchParams == null ? void 0 : searchParams.get(utmName);
        if (utmParams['utm_source'] === 'google') {
          var utmParts = (utm_term == null ? void 0 : utm_term.split('_')) || [];
          var adset = utmParts[utmParts.length - 1];
          var googleKeyword = utmParts.slice(0, utmParts.length - 1).join('_');
          if (utmParts.length === 1) {
            googleKeyword = utmParts[0];
            adset = null;
          }
          utmParams['googleKeyword'] = googleKeyword;
          utmParams['utm_medium'] = adset || null;
          utmParams['utm_adsetName'] = adset;
        } else {
          var _utmParts3 = (utm_term == null ? void 0 : utm_term.split(_this3.delimiters)) || [];
          var adsetId = _utmParts3[_utmParts3.length - 1];
          var adsetName = _utmParts3.slice(0, _utmParts3.length - 1).join('|');
          if (_utmParts3.length === 1) {
            adsetName = _utmParts3[0];
            adsetId = null;
          }
          utmParams['utm_adsetName'] = adsetName;
          utmParams['utm_adsetId'] = adsetId;
          utmParams['utm_medium'] = adsetName || adsetId ? (adsetName || '') + '|' + (adsetId || '') : null;
        }
      },
    };
    this.utmsNemuMappings = {
      nemu_campaign: function nemu_campaign(utmName, utmParams, searchParams) {
        var utm_campaign = searchParams == null ? void 0 : searchParams.get(utmName);
        var name = '';
        var id = '';
        if ((searchParams == null ? void 0 : searchParams.get('utm_source')) === 'google') {
          var _ref15 = (utm_campaign == null ? void 0 : utm_campaign.split(/[|\\-]/)) || [];
          name = _ref15[0];
          id = _ref15[1];
        } else {
          var _ref16 = (utm_campaign == null ? void 0 : utm_campaign.split(/[|\\]/)) || [];
          name = _ref16[0];
          id = _ref16[1];
        }
        utmParams['utm_campaignName'] = name;
        utmParams['utm_campaignId'] = id;
        utmParams['utm_campaign'] = utm_campaign;
      },
      nemu_medium: function nemu_medium(utmName, utmParams, searchParams) {
        var utm_medium = searchParams == null ? void 0 : searchParams.get(utmName);
        var _ref17 = (utm_medium == null ? void 0 : utm_medium.split(_this3.delimiters)) || [],
          adsetName = _ref17[0],
          adsetId = _ref17[1];
        utmParams['utm_adsetName'] = adsetName;
        utmParams['utm_adsetId'] = adsetId;
        utmParams['utm_medium'] = utm_medium;
      },
      nemu_adset: function nemu_adset(utmName, utmParams, searchParams) {
        var utm_medium = searchParams == null ? void 0 : searchParams.get(utmName);
        var _ref18 = (utm_medium == null ? void 0 : utm_medium.split(_this3.delimiters)) || [],
          adsetName = _ref18[0],
          adsetId = _ref18[1];
        utmParams['utm_adsetName'] = adsetName;
        utmParams['utm_adsetId'] = adsetId;
        utmParams['utm_medium'] = utm_medium;
      },
      nemu_content: function nemu_content(utmName, utmParams, searchParams) {
        var _utmParts4;
        var utm_content = searchParams == null ? void 0 : searchParams.get(utmName);
        var utmParts = (utm_content == null ? void 0 : utm_content.split(_this3.delimiters)) || [];
        if ((_utmParts4 = utmParts[utmParts.length - 1]) != null && _utmParts4.startsWith('nemu_')) {
          utmParts.pop();
        }
        var adId = utmParts[utmParts.length - 1];
        var adName = utmParts.slice(0, utmParts.length - 1).join('|');
        if (utmParts.length === 1) {
          adName = utmParts[0];
          adId = null;
        }
        utmParams['utm_adName'] = adName;
        utmParams['utm_adId'] = adId;
        utmParams['utm_content'] = adName || adId ? (adName || '') + '\\' + (adId || '') : null;
      },
      nemu_source: function nemu_source(utmName, utmParams, searchParams) {
        var utm_source = searchParams == null ? void 0 : searchParams.get(utmName);
        utmParams['utm_source'] = utm_source;
      },
    };
    Object.assign(this, {
      full_url: full_url,
    });
  }
  var _proto6 = UtmScanner.prototype;
  _proto6.getUtmFormats = function getUtmFormats() {
    return this.utmNames.concat(this.hotmartUtmNames);
  };
  UtmScanner.extractHostname = function extractHostname(full_url) {
    try {
      return new URL(full_url).hostname;
    } catch (error) {
      return null;
    }
  };
  UtmScanner.extractOrigin = function extractOrigin(full_url) {
    try {
      var _URL;
      return (_URL = new URL(full_url)) == null ? void 0 : _URL.origin;
    } catch (error) {
      return null;
    }
  };
  _proto6.isReferrerFromInternalSource = function isReferrerFromInternalSource() {
    var referrerHostname = UtmScanner.extractHostname(document.referrer);
    if (!referrerHostname) return false;
    var normalizedReferrer = this.getMainDomainHostname(referrerHostname);
    var currentHostname = this.getMainDomainHostname(window.location.hostname);
    return normalizedReferrer === currentHostname;
  };
  _proto6.getMainDomainHostname = function getMainDomainHostname(hostname) {
    if (!hostname) return null;
    hostname = hostname.toLowerCase().trim();
    if (hostname.startsWith('www.')) {
      hostname = hostname.slice(4);
    }
    var parts = hostname.split('.');
    var knownDoubleTLDs = [
      'com.br',
      'net.br',
      'org.br',
      'gov.br',
      'co.uk',
      'org.uk',
      'com.au',
      'co.jp',
      'com.cn',
      'com.br/',
      'net.br/',
      'org.br/',
      'gov.br/',
      'co.uk/',
      'org.uk/',
      'com.au/',
      'co.jp/',
      'com.cn/',
    ];
    var lastTwo = parts.slice(-2).join('.');
    var lastThree = parts.slice(-3).join('.');
    if (knownDoubleTLDs.includes(lastTwo) && parts.length >= 3) {
      return parts[parts.length - 3];
    }
    return parts[parts.length - 2];
  };
  _proto6.isPageReloaded = function isPageReloaded() {
    if (typeof performance === 'undefined' || typeof performance.getEntriesByType !== 'function') {
      return this.checkLegacyNavigationType();
    }
    var navigationEntries = performance.getEntriesByType('navigation');
    if (navigationEntries.length === 0) {
      return this.checkLegacyNavigationType();
    }
    var navigationEntry = navigationEntries[0];
    return navigationEntry.type === 'reload';
  };
  _proto6.checkLegacyNavigationType = function checkLegacyNavigationType() {
    var legacyNavigation = performance.navigation;
    return (legacyNavigation == null ? void 0 : legacyNavigation.type) === 1;
  };
  _proto6.getHotmartSourceName = function getHotmartSourceName() {
    var searchParams = new URLSearchParams(this.full_url);
    var hotmartSources = ['src', 'sck'];
    var result;
    hotmartSources.find(function (source) {
      if (searchParams.has(source)) {
        result = source;
      }
    });
    return result;
  };
  _proto6.isHotmartUtmsValid = function isHotmartUtmsValid(sourceName, full_url) {
    var _searchParams$get$spl, _searchParams$get;
    if (full_url === void 0) {
      full_url = window.location.search;
    }
    var searchParams = new URLSearchParams(full_url);
    var _ref19 =
        (_searchParams$get$spl =
          (_searchParams$get = searchParams.get(sourceName)) == null ? void 0 : _searchParams$get.split('|')) != null
          ? _searchParams$get$spl
          : [],
      utm_source = _ref19[0],
      utm_medium = _ref19[1],
      utm_campaign = _ref19[2],
      utm_content = _ref19[3];
    var parsedUtms = removeEmptyObjectProperties({
      utm_source: utm_source,
      utm_medium: utm_medium,
      utm_campaign: utm_campaign,
      utm_content: utm_content,
    });
    if (
      !(parsedUtms != null && parsedUtms.utm_source) &&
      !(parsedUtms != null && parsedUtms.utm_medium) &&
      !(parsedUtms != null && parsedUtms.utm_campaign) &&
      !(parsedUtms != null && parsedUtms.utm_content)
    ) {
      return false;
    }
    return true;
  };
  _proto6.containsHotmartSourceInUrl = function containsHotmartSourceInUrl() {
    var sourceName = this.getHotmartSourceName();
    if (sourceName && this.isHotmartUtmsValid(sourceName, this.full_url)) {
      return true;
    }
    return false;
  };
  _proto6.containsUTMsInQueryParams = function containsUTMsInQueryParams(trackingId) {
    var searchParams = new URLSearchParams(this.full_url);
    if (this.containsHotmartSourceInUrl()) {
      return true;
    }
    var utmNames = this.utmNames.concat(this.utmNamesNemu);
    if (
      Array.from(searchParams.keys()).some(function (key) {
        return utmNames.includes(key);
      })
    ) {
      return true;
    }
    return false;
  };
  _proto6.extractUTMsFromQueryParams = function extractUTMsFromQueryParams(platform, trackingId) {
    var _this4 = this;
    var paidPlatforms = ['facebook', 'google', 'pinterest', 'tiktok'];
    var utmParams = {};
    var searchParams = new URLSearchParams(this.full_url);
    if (this.containsHotmartSourceInUrl() && platform === 'hotmart') {
      utmParams = UtmParser.parseHotmartUTMs(this.getHotmartSourceName(), this.full_url);
    }
    var utmMappings = null;
    var utmNames = null;
    if (this.ga4Platforms.includes(platform)) {
      utmMappings = this.utmsGa4Mappings;
      utmNames = this.utmNamesGa4;
    } else {
      var urlContainsNemuParams = Array.from(searchParams.keys()).some(function (key) {
        return _this4.utmNamesNemu.includes(key);
      });
      if (urlContainsNemuParams) {
        utmMappings = this.utmsNemuMappings;
        utmNames = this.utmNamesNemu;
      } else {
        utmMappings = this.utmsDefaultMappings;
        utmNames = this.utmNames;
      }
    }
    for (var _iterator3 = _createForOfIteratorHelperLoose(utmNames), _step3; !(_step3 = _iterator3()).done; ) {
      var utmName = _step3.value;
      if (searchParams.has(utmName)) {
        var _utmMappings;
        var properMapping = (_utmMappings = utmMappings) == null ? void 0 : _utmMappings[utmName];
        if (properMapping) {
          properMapping(utmName, utmParams, searchParams);
          continue;
        }
        utmParams[utmName] = searchParams.get(utmName);
      }
    }
    if (!this.ga4Platforms.includes(platform)) {
      if (utmParams['utm_source'] === 'google') {
        var term = searchParams.get('utm_term');
        utmParams['googleKeyword'] = term;
      }
    }
    return utmParams;
  };
  _proto6.getFacebookParams = function getFacebookParams(storage) {
    var searchParams = new URLSearchParams(window.location.search);
    var fbcExists = storage.getCookieByName('_fbc');
    var fbpExists = storage.getCookieByName('_fbp');
    var fbclidExists = searchParams == null ? void 0 : searchParams.get('fbclid');
    return {
      fbclid: fbclidExists,
      fbc: fbcExists,
      fbp: fbpExists,
      fbpUnix: this.generateUnix(),
      fbcUnix: this.generateUnix(),
    };
  };
  _proto6.generateUnix = function generateUnix() {
    var dateInSaoPauloTimezone = new Date().toLocaleString('en-US', {
      timeZone: 'America/Sao_Paulo',
    });
    var unix = Math.floor(new Date(dateInSaoPauloTimezone).getTime() / 1000); // Convert milliseconds to seconds

    return String(unix);
  };
  _proto6.getUtmsFromCookie = function getUtmsFromCookie(cookieName) {
    var nameEQ = cookieName + '=';
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
      var c = ca[i];
      while (c.charAt(0) == ' ') c = c.substring(1, c.length);
      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
  };
  _proto6.setUtmsFromCookie = function setUtmsFromCookie(cookieObject) {
    var cookieValue = JSON.stringify(cookieObject);
    var expiryDate = new Date();
    expiryDate.setTime(0);
    var expires = 'expires=' + expiryDate.toUTCString();
    var hostname = window.location.hostname;
    var parts = hostname.split('.');
    if (parts.length >= 3) {
      var tld = parts.pop();
      var domain = parts.pop();
      if (tld === 'br') {
        domain = parts.pop() + '.' + domain;
      }
      domain = domain + '.' + tld;
    } else {
      tld = parts.pop();
      domain = parts.pop();
      domain = domain + '.' + tld;
    }
    document.cookie = 'nemu:utmsTrackHistory=' + cookieValue + '; domain=' + domain + '; path=/; ' + expires;
  };
  return UtmScanner;
})();
var PlatformFilter = /*#__PURE__*/ (function () {
  function PlatformFilter(_ref20) {
    var platforms = _ref20.platforms;
    this.platforms = void 0;
    Object.assign(this, {
      platforms: platforms,
    });
  }
  var _proto7 = PlatformFilter.prototype;
  _proto7.referrerContainsPlatform = function referrerContainsPlatform(referrer) {
    var _this$platforms;
    var foundPlatform =
      (_this$platforms = this.platforms) == null
        ? void 0
        : _this$platforms.find(function (platform) {
            return referrer == null ? void 0 : referrer.includes(platform.name);
          });
    return foundPlatform ? foundPlatform.name : null;
  };
  return PlatformFilter;
})();
var UtmParser = /*#__PURE__*/ (function () {
  function UtmParser(_ref21) {
    var scanner = _ref21.scanner,
      platformsFilter = _ref21.platformsFilter,
      sessionHistoryService = _ref21.sessionHistoryService,
      storage = _ref21.storage;
    this.scanner = void 0;
    this.sessionHistoryService = void 0;
    this.storage = void 0;
    Object.assign(this, {
      scanner: scanner,
      platformsFilter: platformsFilter,
      sessionHistoryService: sessionHistoryService,
      storage: storage,
    });
  }
  var _proto8 = UtmParser.prototype;
  _proto8.parseUTMSrc = function parseUTMSrc(_ref22) {
    var _this5 = this;
    var utm_source = _ref22.utm_source;
    var organicExists = utm_source == null ? void 0 : utm_source.endsWith('_organic');
    var referrerHostname = this.scanner.getMainDomainHostname(UtmScanner.extractHostname(document.referrer));
    var isReferrerHostnameValid =
      referrerHostname && referrerHostname !== this.scanner.getMainDomainHostname(window.location.hostname);
    var isOrganic = function isOrganic() {
      if (!isReferrerHostnameValid || organicExists) {
        return false;
      }
      var searchParams = new URLSearchParams(document.referrer);
      var utmFormats = _this5.scanner.getUtmFormats();
      for (var _iterator4 = _createForOfIteratorHelperLoose(utmFormats), _step4; !(_step4 = _iterator4()).done; ) {
        var utmFormat = _step4.value;
        if (searchParams.has(utmFormat)) {
          return false;
        }
      }
      return true;
    };
    if (!utm_source) {
      if (!isReferrerHostnameValid) {
        return 'direct';
      }
      return '' + referrerHostname + (isOrganic() ? '_organic' : '');
    }
    return utm_source;
  };
  UtmParser.parseHotmartUTMs = function parseHotmartUTMs(sourceName, full_url) {
    var _searchParams$get$spl2, _searchParams$get2;
    if (full_url === void 0) {
      full_url = window.location.search;
    }
    var searchParams = new URLSearchParams(full_url);
    var _ref23 =
        (_searchParams$get$spl2 =
          searchParams == null || (_searchParams$get2 = searchParams.get(sourceName)) == null
            ? void 0
            : _searchParams$get2.split('|')) != null
          ? _searchParams$get$spl2
          : [],
      utm_source = _ref23[0],
      utm_adsetName = _ref23[1],
      utm_campaignName = _ref23[2],
      utm_adName = _ref23[3],
      utm_campaignId = _ref23[4],
      utm_adsetId = _ref23[5],
      utm_adId = _ref23[6],
      utm_term = _ref23[7];
    return {
      utm_source: utm_source,
      utm_medium: (utm_adsetName || '') + '|' + (utm_adsetId || ''),
      utm_campaign: (utm_campaignName || '') + '|' + (utm_campaignId || ''),
      utm_content: (utm_adName || '') + '|' + (utm_adId || ''),
      utm_campaignId: utm_campaignId,
      utm_campaignName: utm_campaignName,
      utm_adsetId: utm_adsetId,
      utm_adsetName: utm_adsetName,
      utm_adId: utm_adId,
      utm_adName: utm_adName,
      utm_term: utm_term,
    };
  };
  _proto8.parseUTMsToQueryParams = /*#__PURE__*/ (function () {
    var _parseUTMsToQueryParams = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee50(_ref24) {
        var _this6 = this;
        var tracking,
          utms,
          searchParams,
          hotmartSourceTypes,
          _i,
          _hotmartSourceTypes,
          hotmartSourceType,
          _iterator5,
          _step5,
          utmName,
          platformMappings,
          mapping;
        return _regenerator().w(
          function (_context51) {
            while (1)
              switch (_context51.n) {
                case 0:
                  ((tracking = _ref24.tracking), (utms = _ref24.utms));
                  searchParams = new URLSearchParams(window.location.search);
                  hotmartSourceTypes = ['src', 'sck'];
                  if (searchParams.get('utm_source') !== 'google') {
                    searchParams.delete('utm_term');
                  }
                  for (_i = 0, _hotmartSourceTypes = hotmartSourceTypes; _i < _hotmartSourceTypes.length; _i++) {
                    hotmartSourceType = _hotmartSourceTypes[_i];
                    if (searchParams != null && searchParams.has(hotmartSourceType)) {
                      searchParams.delete(hotmartSourceType);
                    }
                  }
                  for (
                    _iterator5 = _createForOfIteratorHelperLoose(this.scanner.utmNames);
                    !(_step5 = _iterator5()).done;
                  ) {
                    utmName = _step5.value;
                    if (searchParams != null && searchParams.has(utmName)) {
                      searchParams.delete(utmName);
                    }
                  }
                  platformMappings = {
                    hotmart: function hotmart() {
                      var querySource =
                        ((utms == null ? void 0 : utms.utm_source) || '') +
                        '|' +
                        ((utms == null ? void 0 : utms.utm_adsetName) || '') +
                        '|' +
                        ((utms == null ? void 0 : utms.utm_campaignName) || '') +
                        '|' +
                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                        '|' +
                        ((utms == null ? void 0 : utms.utm_campaignId) || '') +
                        '|' +
                        ((utms == null ? void 0 : utms.utm_adsetId) || '') +
                        '|' +
                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                        '|' +
                        ((utms == null ? void 0 : utms.utm_term) || '');
                      document.cookie =
                        'utmsTrack=' +
                        (tracking == null ? void 0 : tracking.sourceType) +
                        '=' +
                        querySource +
                        '; path=/';
                      searchParams.set(tracking == null ? void 0 : tracking.sourceType, querySource);
                    },
                    vega: function vega() {
                      var vegaMappings = {
                        utm_campaign: function utm_campaign() {
                          return (
                            ((utms == null ? void 0 : utms.utm_campaignName) || '') +
                            '\\' +
                            ((utms == null ? void 0 : utms.utm_campaignId) || '')
                          );
                        },
                        utm_medium: function utm_medium() {
                          return (
                            ((utms == null ? void 0 : utms.utm_adsetName) || '') +
                            '\\' +
                            ((utms == null ? void 0 : utms.utm_adsetId) || '')
                          );
                        },
                        utm_content: function utm_content() {
                          return (
                            ((utms == null ? void 0 : utms.utm_adName) || '') +
                            '\\' +
                            ((utms == null ? void 0 : utms.utm_adId) || '') +
                            '\\' +
                            (utms == null ? void 0 : utms.utm_term)
                          );
                        },
                      };
                      for (
                        var _iterator6 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames), _step6;
                        !(_step6 = _iterator6()).done;
                      ) {
                        var utmName = _step6.value;
                        if (utmName === 'utm_content') {
                          var content = vegaMappings[utmName]();
                          searchParams.set(utmName, content);
                        } else if (utms[utmName]) {
                          var mappingExists = vegaMappings[utmName];
                          var utm = mappingExists ? mappingExists() : utms[utmName];
                          searchParams.set(utmName, utm || '');
                        }
                      }
                      if (utms['googleKeyword']) {
                        searchParams.set('utm_term', utms['googleKeyword'] || '');
                      }
                    },
                    others: function others() {
                      for (
                        var _iterator7 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames), _step7;
                        !(_step7 = _iterator7()).done;
                      ) {
                        var utmName = _step7.value;
                        if (utmName === 'utm_content') {
                          var content =
                            ((utms == null ? void 0 : utms.utm_adName) || '') +
                            '|' +
                            ((utms == null ? void 0 : utms.utm_adId) || '') +
                            '|' +
                            (utms == null ? void 0 : utms.utm_term);
                          searchParams.set(utmName, content || '');
                        } else if (utms[utmName]) {
                          searchParams.set(utmName, utms[utmName] || '');
                        }
                      }
                      if (utms['googleKeyword']) {
                        searchParams.set('utm_term', utms['googleKeyword'] || '');
                      }
                    },
                    shopify_plus_others: function shopify_plus_others() {
                      var getCookieByName = _this6.storage.getCookieByName;
                      var sessionHistoryService = _this6.sessionHistoryService;
                      function waitForShopifyCartToken() {
                        return new Promise(
                          /*#__PURE__*/ (function () {
                            var _ref25 = _asyncToGenerator(
                              /*#__PURE__*/ _regenerator().m(function _callee12(resolve) {
                                var interval;
                                return _regenerator().w(function (_context12) {
                                  while (1)
                                    switch (_context12.n) {
                                      case 0:
                                        interval = setInterval(
                                          /*#__PURE__*/ _asyncToGenerator(
                                            /*#__PURE__*/ _regenerator().m(function _callee11() {
                                              var cartTokenCookie, cartTokenLocalStorage, item;
                                              return _regenerator().w(function (_context11) {
                                                while (1)
                                                  switch (_context11.n) {
                                                    case 0:
                                                      cartTokenCookie = getCookieByName('cart')
                                                        ? getCookieByName('cart').split('?')[0]
                                                        : '';
                                                      cartTokenLocalStorage =
                                                        localStorage.getItem('trackedSourceId') ||
                                                        localStorage.getItem('cartToken');
                                                      item = cartTokenCookie || cartTokenLocalStorage || null;
                                                      if (!(item !== null)) {
                                                        _context11.n = 2;
                                                        break;
                                                      }
                                                      clearInterval(interval);
                                                      _context11.n = 1;
                                                      return sessionHistoryService.updateNuvemshopId({
                                                        trackingId: tracking.id,
                                                        trackingSessionId: utms.trackingSessionId,
                                                        nuvemShopId: item,
                                                      });
                                                    case 1:
                                                      return _context11.a(2, resolve(true));
                                                    case 2:
                                                      return _context11.a(2);
                                                  }
                                              }, _callee11);
                                            }),
                                          ),
                                          500,
                                        );
                                      case 1:
                                        return _context12.a(2);
                                    }
                                }, _callee12);
                              }),
                            );
                            return function (_x18) {
                              return _ref25.apply(this, arguments);
                            };
                          })(),
                        );
                      }
                      waitForShopifyCartToken();
                      for (
                        var _iterator8 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames), _step8;
                        !(_step8 = _iterator8()).done;
                      ) {
                        var utmName = _step8.value;
                        if (utmName === 'utm_content') {
                          var content =
                            ((utms == null ? void 0 : utms.utm_adName) || '') +
                            '|' +
                            ((utms == null ? void 0 : utms.utm_adId) || '') +
                            '|' +
                            (utms == null ? void 0 : utms.utm_term);
                          searchParams.set(utmName, content || '');
                        } else if (utms[utmName]) {
                          searchParams.set(utmName, utms[utmName] || '');
                        }
                      }
                      if (utms['googleKeyword']) {
                        searchParams.set('utm_term', utms['googleKeyword'] || '');
                      }
                    },
                    shopify_plus_others_ga4: function shopify_plus_others_ga4() {
                      var getCookieByName = _this6.storage.getCookieByName;
                      var sessionHistoryService = _this6.sessionHistoryService;
                      function waitForShopifyCartToken() {
                        return new Promise(
                          /*#__PURE__*/ (function () {
                            var _ref27 = _asyncToGenerator(
                              /*#__PURE__*/ _regenerator().m(function _callee14(resolve) {
                                var interval;
                                return _regenerator().w(function (_context14) {
                                  while (1)
                                    switch (_context14.n) {
                                      case 0:
                                        interval = setInterval(
                                          /*#__PURE__*/ _asyncToGenerator(
                                            /*#__PURE__*/ _regenerator().m(function _callee13() {
                                              var cartTokenCookie, cartTokenLocalStorage, item;
                                              return _regenerator().w(function (_context13) {
                                                while (1)
                                                  switch (_context13.n) {
                                                    case 0:
                                                      cartTokenCookie = getCookieByName('cart')
                                                        ? getCookieByName('cart').split('?')[0]
                                                        : '';
                                                      cartTokenLocalStorage =
                                                        localStorage.getItem('trackedSourceId') ||
                                                        localStorage.getItem('cartToken');
                                                      item = cartTokenCookie || cartTokenLocalStorage || null;
                                                      if (!(item !== null)) {
                                                        _context13.n = 2;
                                                        break;
                                                      }
                                                      clearInterval(interval);
                                                      _context13.n = 1;
                                                      return sessionHistoryService.updateNuvemshopId({
                                                        trackingId: tracking.id,
                                                        trackingSessionId: utms.trackingSessionId,
                                                        nuvemShopId: item,
                                                      });
                                                    case 1:
                                                      return _context13.a(2, resolve(true));
                                                    case 2:
                                                      return _context13.a(2);
                                                  }
                                              }, _callee13);
                                            }),
                                          ),
                                          500,
                                        );
                                      case 1:
                                        return _context14.a(2);
                                    }
                                }, _callee14);
                              }),
                            );
                            return function (_x19) {
                              return _ref27.apply(this, arguments);
                            };
                          })(),
                        );
                      }
                      waitForShopifyCartToken();
                      for (
                        var _iterator9 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames), _step9;
                        !(_step9 = _iterator9()).done;
                      ) {
                        var utmName = _step9.value;
                        if (utmName === 'utm_content') {
                          var content =
                            ((utms == null ? void 0 : utms.utm_adName) || '') +
                            '|' +
                            ((utms == null ? void 0 : utms.utm_adId) || '');
                          searchParams.set(utmName, content || '');
                        } else if (utms[utmName]) {
                          searchParams.set(utmName, utms[utmName] || '');
                        }
                        searchParams.set('utm_medium', 'cpc');
                        if (utms['utm_medium']) {
                          if (utms['utm_source'] === 'google') {
                            var googleKeyword = utms['googleKeyword'] || '';
                            searchParams.set('utm_term', googleKeyword + '_' + utms['utm_medium']);
                          } else {
                            searchParams.set('utm_term', utms['utm_medium']);
                          }
                        }
                      }
                    },
                    nuvemshop: (function () {
                      var _nuvemshop = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee15() {
                          var _window7, _window8;
                          var NUVEMSHOP_APP_ID, _iterator0, _step0, utmName, content, params;
                          return _regenerator().w(function (_context15) {
                            while (1)
                              switch (_context15.n) {
                                case 0:
                                  NUVEMSHOP_APP_ID = '12106';
                                  _context15.n = 1;
                                  return _this6.sessionHistoryService.updateNuvemshopId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    //@ts-ignore
                                    nuvemShopId:
                                      (_window7 = window) != null &&
                                      (_window7 = _window7.LS) != null &&
                                      (_window7 = _window7.cart) != null &&
                                      _window7.id
                                        ? String(
                                            (_window8 = window) == null ||
                                              (_window8 = _window8.LS) == null ||
                                              (_window8 = _window8.cart) == null
                                              ? void 0
                                              : _window8.id,
                                          )
                                        : null,
                                  });
                                case 1:
                                  for (
                                    _iterator0 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step0 = _iterator0()).done;
                                  ) {
                                    utmName = _step0.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                  params = UtmProducer.extractUtmsFromQueryParams(searchParams.toString());
                                  localStorage.setItem(
                                    'app-' + NUVEMSHOP_APP_ID + '-nemu:utmsTrack',
                                    '' +
                                      JSON.stringify({
                                        value: params,
                                      }),
                                  );
                                case 2:
                                  return _context15.a(2);
                              }
                          }, _callee15);
                        }),
                      );
                      function nuvemshop() {
                        return _nuvemshop.apply(this, arguments);
                      }
                      return nuvemshop;
                    })(),
                    tray: (function () {
                      var _tray = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee16() {
                          var _document5, _document6;
                          var _iterator1, _step1, utmName, content;
                          return _regenerator().w(function (_context16) {
                            while (1)
                              switch (_context16.n) {
                                case 0:
                                  _context16.n = 1;
                                  return _this6.sessionHistoryService.updateTraySessionId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    traySessionId:
                                      ((_document5 = document) == null ||
                                      (_document5 = _document5.documentElement) == null
                                        ? void 0
                                        : _document5.getAttribute('data-session')) ||
                                      ((_document6 = document) == null ||
                                      (_document6 = _document6.documentElement) == null
                                        ? void 0
                                        : _document6.getAttribute('data-checkout-session_id')),
                                  });
                                case 1:
                                  for (
                                    _iterator1 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step1 = _iterator1()).done;
                                  ) {
                                    utmName = _step1.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                case 2:
                                  return _context16.a(2);
                              }
                          }, _callee16);
                        }),
                      );
                      function tray() {
                        return _tray.apply(this, arguments);
                      }
                      return tray;
                    })(),
                    tray_ga4: (function () {
                      var _tray_ga = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee17() {
                          var _document7, _document8;
                          var _iterator10, _step10, utmName, content, googleKeyword;
                          return _regenerator().w(function (_context17) {
                            while (1)
                              switch (_context17.n) {
                                case 0:
                                  _context17.n = 1;
                                  return _this6.sessionHistoryService.updateTraySessionId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    traySessionId:
                                      ((_document7 = document) == null ||
                                      (_document7 = _document7.documentElement) == null
                                        ? void 0
                                        : _document7.getAttribute('data-session')) ||
                                      ((_document8 = document) == null ||
                                      (_document8 = _document8.documentElement) == null
                                        ? void 0
                                        : _document8.getAttribute('data-checkout-session_id')),
                                  });
                                case 1:
                                  for (
                                    _iterator10 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step10 = _iterator10()).done;
                                  ) {
                                    utmName = _step10.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '');
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                    searchParams.set('utm_medium', 'cpc');
                                    if (utms['utm_medium']) {
                                      if (utms['utm_source'] === 'google') {
                                        googleKeyword = utms['googleKeyword'] || '';
                                        searchParams.set('utm_term', googleKeyword + '_' + utms['utm_medium']);
                                      } else {
                                        searchParams.set('utm_term', utms['utm_medium']);
                                      }
                                    }
                                  }
                                case 2:
                                  return _context17.a(2);
                              }
                          }, _callee17);
                        }),
                      );
                      function tray_ga4() {
                        return _tray_ga.apply(this, arguments);
                      }
                      return tray_ga4;
                    })(),
                    shopify_ga4: (function () {
                      var _shopify_ga = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee20() {
                          var getCookieByName,
                            sessionHistoryService,
                            waitForShopifyCartToken,
                            utmsCookie,
                            _iterator11,
                            _step11,
                            _document$cookie$spli3,
                            utmName,
                            content,
                            utmCampaign,
                            expiryDate,
                            currentUtmsTrack,
                            newUtmsTrackValue,
                            currentHasHash,
                            newHasHash;
                          return _regenerator().w(function (_context20) {
                            while (1)
                              switch (_context20.n) {
                                case 0:
                                  waitForShopifyCartToken = function _waitForShopifyCartTo() {
                                    return new Promise(
                                      /*#__PURE__*/ (function () {
                                        var _ref29 = _asyncToGenerator(
                                          /*#__PURE__*/ _regenerator().m(function _callee19(resolve) {
                                            var interval;
                                            return _regenerator().w(function (_context19) {
                                              while (1)
                                                switch (_context19.n) {
                                                  case 0:
                                                    interval = setInterval(
                                                      /*#__PURE__*/ _asyncToGenerator(
                                                        /*#__PURE__*/ _regenerator().m(function _callee18() {
                                                          var cartTokenCookie, cartTokenLocalStorage, item;
                                                          return _regenerator().w(function (_context18) {
                                                            while (1)
                                                              switch (_context18.n) {
                                                                case 0:
                                                                  cartTokenCookie = getCookieByName('cart')
                                                                    ? getCookieByName('cart').split('?')[0]
                                                                    : '';
                                                                  cartTokenLocalStorage =
                                                                    localStorage.getItem('trackedSourceId') ||
                                                                    localStorage.getItem('cartToken');
                                                                  item =
                                                                    cartTokenCookie || cartTokenLocalStorage || null;
                                                                  if (!(item !== null)) {
                                                                    _context18.n = 2;
                                                                    break;
                                                                  }
                                                                  clearInterval(interval);
                                                                  _context18.n = 1;
                                                                  return sessionHistoryService.updateNuvemshopId({
                                                                    trackingId: tracking.id,
                                                                    trackingSessionId: utms.trackingSessionId,
                                                                    nuvemShopId: item,
                                                                  });
                                                                case 1:
                                                                  return _context18.a(2, resolve(true));
                                                                case 2:
                                                                  return _context18.a(2);
                                                              }
                                                          }, _callee18);
                                                        }),
                                                      ),
                                                      500,
                                                    );
                                                  case 1:
                                                    return _context19.a(2);
                                                }
                                            }, _callee19);
                                          }),
                                        );
                                        return function (_x20) {
                                          return _ref29.apply(this, arguments);
                                        };
                                      })(),
                                    );
                                  };
                                  getCookieByName = _this6.storage.getCookieByName;
                                  sessionHistoryService = _this6.sessionHistoryService;
                                  waitForShopifyCartToken();
                                  utmsCookie = new URLSearchParams();
                                  for (
                                    _iterator11 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step11 = _iterator11()).done;
                                  ) {
                                    utmName = _step11.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '');
                                      searchParams.set(utmName, content || '');
                                      utmsCookie.set(
                                        utmName,
                                        content + '|' + ((utms == null ? void 0 : utms.utm_term) || '') || '',
                                      );
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                      utmsCookie.set(utmName, utms[utmName] || '');
                                    }
                                    if (utms['utm_medium']) {
                                      if (utms['utm_source'] === 'google') {
                                        utmCampaign = utms['utm_campaign'] || '';
                                        searchParams.set('utm_campaign', utmCampaign + '_' + utms['utm_medium']);
                                        searchParams.set('utm_medium', 'cpc');
                                      } else {
                                        if (
                                          ['facebook', 'google', 'tiktok', 'pinterest'].includes(utms['utm_source'])
                                        ) {
                                          searchParams.set('utm_medium', 'cpc');
                                          searchParams.set('utm_term', utms['utm_medium']);
                                        } else {
                                          searchParams.set('utm_medium', utms['utm_medium']);
                                        }
                                      }
                                    }
                                    if (utms['googleKeyword']) {
                                      searchParams.set('utm_term', utms['googleKeyword'] || '');
                                      utmsCookie.set('utm_term', utms['googleKeyword'] || '');
                                    }
                                    expiryDate = new Date();
                                    expiryDate.setDate(expiryDate.getDate() + 30);
                                    currentUtmsTrack =
                                      (_document$cookie$spli3 = document.cookie.split('; ').find(function (row) {
                                        return row.startsWith('utmsTrack=');
                                      })) == null
                                        ? void 0
                                        : _document$cookie$spli3.split('=')[1];
                                    newUtmsTrackValue = utmsCookie.toString();
                                    currentHasHash =
                                      currentUtmsTrack == null ? void 0 : currentUtmsTrack.includes('nemu_');
                                    newHasHash = newUtmsTrackValue.includes('nemu_');
                                    if (!currentHasHash || newHasHash) {
                                      document.cookie =
                                        'utmsTrack=' +
                                        newUtmsTrackValue +
                                        '; expires=' +
                                        expiryDate.toUTCString() +
                                        '; path=/; SameSite=Lax; Secure';
                                      localStorage.setItem('nemu:utmsTrack', newUtmsTrackValue);
                                    }
                                  }
                                case 1:
                                  return _context20.a(2);
                              }
                          }, _callee20);
                        }),
                      );
                      function shopify_ga4() {
                        return _shopify_ga.apply(this, arguments);
                      }
                      return shopify_ga4;
                    })(),
                    nuvemshop_ga4: (function () {
                      var _nuvemshop_ga = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee21() {
                          var _window9, _window0;
                          var _iterator12, _step12, utmName, content, utmCampaign;
                          return _regenerator().w(function (_context21) {
                            while (1)
                              switch (_context21.n) {
                                case 0:
                                  _context21.n = 1;
                                  return _this6.sessionHistoryService.updateNuvemshopId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    //@ts-ignore
                                    nuvemShopId:
                                      (_window9 = window) != null &&
                                      (_window9 = _window9.LS) != null &&
                                      (_window9 = _window9.cart) != null &&
                                      _window9.id
                                        ? String(
                                            (_window0 = window) == null ||
                                              (_window0 = _window0.LS) == null ||
                                              (_window0 = _window0.cart) == null
                                              ? void 0
                                              : _window0.id,
                                          )
                                        : null,
                                  });
                                case 1:
                                  for (
                                    _iterator12 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step12 = _iterator12()).done;
                                  ) {
                                    utmName = _step12.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '');
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                    if (['facebook', 'google', 'tiktok', 'pinterest'].includes(utms['utm_source'])) {
                                      searchParams.set('utm_medium', 'cpc');
                                    }
                                    if (utms['utm_medium']) {
                                      if (utms['utm_source'] === 'google') {
                                        utmCampaign = utms['utm_campaign'] || '';
                                        searchParams.set('utm_campaign', utmCampaign + '_' + utms['utm_medium']);
                                      } else {
                                        searchParams.set('utm_term', utms['utm_medium']);
                                      }
                                    }
                                    if (utms['googleKeyword']) {
                                      searchParams.set('utm_term', utms['googleKeyword'] || '');
                                    }
                                  }
                                case 2:
                                  return _context21.a(2);
                              }
                          }, _callee21);
                        }),
                      );
                      function nuvemshop_ga4() {
                        return _nuvemshop_ga.apply(this, arguments);
                      }
                      return nuvemshop_ga4;
                    })(),
                    bagy: function bagy() {
                      var expiryDate = new Date();
                      var utmsForCookie = {
                        utm_source: utms == null ? void 0 : utms.utm_source,
                        utm_campaign: utms == null ? void 0 : utms.utm_campaign,
                        utm_medium: utms == null ? void 0 : utms.utm_medium,
                        utm_content: utms == null ? void 0 : utms.utm_content,
                        utm_term: utms == null ? void 0 : utms.utm_term,
                      };
                      for (
                        var _iterator13 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames), _step13;
                        !(_step13 = _iterator13()).done;
                      ) {
                        var utmName = _step13.value;
                        if (utmName === 'utm_content') {
                          var content =
                            ((utms == null ? void 0 : utms.utm_adName) || '') +
                            '|' +
                            ((utms == null ? void 0 : utms.utm_adId) || '') +
                            '|' +
                            (utms == null ? void 0 : utms.utm_term);
                          searchParams.set(utmName, content || '');
                        } else if (utms[utmName]) {
                          searchParams.set(utmName, utms[utmName] || '');
                        }
                      }
                      if (utms['googleKeyword']) {
                        searchParams.set('utm_term', utms['googleKeyword'] || '');
                      }
                      expiryDate.setDate(expiryDate.getDate() + 30);
                      document.cookie =
                        '_dc_utm_campaign=' +
                        JSON.stringify(utmsForCookie) +
                        '; expires=' +
                        expiryDate.toUTCString() +
                        '; path=/; domain=' +
                        generateDomain();
                      document.cookie = '_dc_utm_campaign=' + JSON.stringify(utmsForCookie) + '; path=/';
                    },
                    bagy_ga4: (function () {
                      var _bagy_ga = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee22() {
                          var expiryDate, utmsForCookie, _iterator14, _step14, utmName, content, utmCampaign;
                          return _regenerator().w(function (_context22) {
                            while (1)
                              switch (_context22.n) {
                                case 0:
                                  expiryDate = new Date();
                                  utmsForCookie = {
                                    utm_source: utms == null ? void 0 : utms.utm_source,
                                    utm_campaign: utms == null ? void 0 : utms.utm_campaign,
                                    utm_medium: utms == null ? void 0 : utms.utm_medium,
                                    utm_content: utms == null ? void 0 : utms.utm_content,
                                    utm_term: utms == null ? void 0 : utms.utm_term,
                                  };
                                  for (
                                    _iterator14 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step14 = _iterator14()).done;
                                  ) {
                                    utmName = _step14.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '');
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                    if (['facebook', 'google', 'tiktok', 'pinterest'].includes(utms['utm_source'])) {
                                      searchParams.set('utm_medium', 'cpc');
                                    }
                                    if (utms['utm_medium']) {
                                      if (utms['utm_source'] === 'google') {
                                        utmCampaign = utms['utm_campaign'] || '';
                                        searchParams.set('utm_campaign', utmCampaign + '_' + utms['utm_medium']);
                                      } else {
                                        searchParams.set('utm_term', utms['utm_medium']);
                                      }
                                    }
                                    if (utms['googleKeyword']) {
                                      searchParams.set('utm_term', utms['googleKeyword'] || '');
                                    }
                                  }
                                  expiryDate.setDate(expiryDate.getDate() + 30);
                                  document.cookie =
                                    '_dc_utm_campaign=' +
                                    JSON.stringify(utmsForCookie) +
                                    '; expires=' +
                                    expiryDate.toUTCString() +
                                    '; path=/; domain=' +
                                    generateDomain();
                                  document.cookie = '_dc_utm_campaign=' + JSON.stringify(utmsForCookie) + '; path=/';
                                case 1:
                                  return _context22.a(2);
                              }
                          }, _callee22);
                        }),
                      );
                      function bagy_ga4() {
                        return _bagy_ga.apply(this, arguments);
                      }
                      return bagy_ga4;
                    })(),
                    magazord: function magazord() {
                      try {
                        var expiryDate = new Date();
                        var utmsForCookie =
                          'lc=utm&utm_source=' +
                          ((utms == null ? void 0 : utms.utm_source) || '') +
                          '&utm_campaign=' +
                          ((utms == null ? void 0 : utms.utm_campaign) || '') +
                          '&utm_medium=' +
                          ((utms == null ? void 0 : utms.utm_medium) || '') +
                          '&utm_content=' +
                          ((utms == null ? void 0 : utms.utm_content) || '') +
                          '&utm_term=' +
                          ((utms == null ? void 0 : utms.utm_term) || '');
                        var invertedStr = btoa(_this6.removeAccents(utmsForCookie.split('').reverse().join('')));
                        expiryDate.setDate(expiryDate.getDate() + 30);
                        document.cookie =
                          'trk=' +
                          encodeURIComponent(invertedStr) +
                          '; expires=' +
                          expiryDate.toUTCString() +
                          '; path=/';
                      } catch (error) {
                        Logger.error(error);
                      }
                      for (
                        var _iterator15 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames), _step15;
                        !(_step15 = _iterator15()).done;
                      ) {
                        var utmName = _step15.value;
                        if (utmName === 'utm_content') {
                          var content =
                            ((utms == null ? void 0 : utms.utm_adName) || '') +
                            '|' +
                            ((utms == null ? void 0 : utms.utm_adId) || '') +
                            '|' +
                            (utms == null ? void 0 : utms.utm_term);
                          searchParams.set(utmName, content || '');
                        } else if (utms[utmName]) {
                          searchParams.set(utmName, utms[utmName] || '');
                        }
                      }
                      if (['facebook', 'google', 'tiktok', 'pinterest'].includes(utms['utm_source'])) {
                        searchParams.set('utm_medium', 'cpc');
                      }
                      if (utms['utm_medium']) {
                        if (utms['utm_source'] === 'google') {
                          var utmCampaign = utms['utm_campaign'] || '';
                          searchParams.set('utm_campaign', utmCampaign + '_' + utms['utm_medium']);
                        } else {
                          searchParams.set('utm_term', utms['utm_medium']);
                        }
                      }
                      if (utms['googleKeyword']) {
                        searchParams.set('utm_term', utms['googleKeyword'] || '');
                      }
                    },
                    magazord_ga4: (function () {
                      var _magazord_ga = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee23() {
                          var expiryDate, utmsForCookie, invertedStr, _iterator16, _step16, utmName, content;
                          return _regenerator().w(function (_context23) {
                            while (1)
                              switch (_context23.n) {
                                case 0:
                                  try {
                                    expiryDate = new Date();
                                    utmsForCookie =
                                      'lc=utm&utm_source=' +
                                      ((utms == null ? void 0 : utms.utm_source) || '') +
                                      '&utm_campaign=' +
                                      ((utms == null ? void 0 : utms.utm_campaign) || '') +
                                      '&utm_medium=' +
                                      ((utms == null ? void 0 : utms.utm_medium) || '') +
                                      '&utm_content=' +
                                      ((utms == null ? void 0 : utms.utm_content) || '') +
                                      '&utm_term=' +
                                      ((utms == null ? void 0 : utms.utm_term) || '');
                                    invertedStr = btoa(
                                      _this6.removeAccents(utmsForCookie.split('').reverse().join('')),
                                    );
                                    expiryDate.setDate(expiryDate.getDate() + 30);
                                    document.cookie =
                                      'trk=' +
                                      encodeURIComponent(invertedStr) +
                                      '; expires=' +
                                      expiryDate.toUTCString() +
                                      '; path=/';
                                  } catch (error) {
                                    Logger.error(error);
                                  }
                                  for (
                                    _iterator16 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step16 = _iterator16()).done;
                                  ) {
                                    utmName = _step16.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '');
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                case 1:
                                  return _context23.a(2);
                              }
                          }, _callee23);
                        }),
                      );
                      function magazord_ga4() {
                        return _magazord_ga.apply(this, arguments);
                      }
                      return magazord_ga4;
                    })(),
                    loja_integrada: function loja_integrada() {
                      var expiryDate = new Date();
                      for (
                        var _iterator17 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames), _step17;
                        !(_step17 = _iterator17()).done;
                      ) {
                        var utmName = _step17.value;
                        if (utmName === 'utm_content') {
                          var content =
                            ((utms == null ? void 0 : utms.utm_adName) || '') +
                            '|' +
                            ((utms == null ? void 0 : utms.utm_adId) || '') +
                            '|' +
                            (utms == null ? void 0 : utms.utm_term);
                          searchParams.set(utmName, content || '');
                        } else if (utms[utmName]) {
                          searchParams.set(utmName, utms[utmName] || '');
                        }
                      }
                      if (utms['googleKeyword']) {
                        searchParams.set('utm_term', utms['googleKeyword'] || '');
                      }
                      expiryDate.setDate(expiryDate.getDate() + 30);
                      document.cookie =
                        'utm_campaign=' + utms.trackingSessionId + '; expires=' + expiryDate.toUTCString() + '; path=/';
                    },
                    vtex: (function () {
                      var _vtex = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee24() {
                          var _window$vtexjs;
                          var _iterator18, _step18, utmName, content, vtexSessionId, _t6;
                          return _regenerator().w(function (_context24) {
                            while (1)
                              switch (_context24.n) {
                                case 0:
                                  for (
                                    _iterator18 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step18 = _iterator18()).done;
                                  ) {
                                    utmName = _step18.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (!tracking.vtex_marketing_data_update_enabled) {
                                    _context24.n = 1;
                                    break;
                                  }
                                  _context24.n = 1;
                                  return updateVtexMarketingData(utms);
                                case 1:
                                  _context24.n = 2;
                                  return waitForVtexSessionId('orderform', 'vtex');
                                case 2:
                                  _t6 = _context24.v;
                                  if (_t6) {
                                    _context24.n = 3;
                                    break;
                                  }
                                  _t6 =
                                    (_window$vtexjs = window.vtexjs) == null ||
                                    (_window$vtexjs = _window$vtexjs.checkout) == null ||
                                    (_window$vtexjs = _window$vtexjs.orderForm) == null
                                      ? void 0
                                      : _window$vtexjs.orderFormId;
                                case 3:
                                  vtexSessionId = _t6;
                                  if (
                                    !(vtexSessionId && vtexSessionId !== (utms == null ? void 0 : utms.vtexSessionId))
                                  ) {
                                    _context24.n = 4;
                                    break;
                                  }
                                  _context24.n = 4;
                                  return _this6.sessionHistoryService.updateVtexSessionId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    vtexSessionId: vtexSessionId,
                                  });
                                case 4:
                                  return _context24.a(2);
                              }
                          }, _callee24);
                        }),
                      );
                      function vtex() {
                        return _vtex.apply(this, arguments);
                      }
                      return vtex;
                    })(),
                    woocommerce: (function () {
                      var _woocommerce = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee25() {
                          var _window1;
                          var queryParams,
                            key,
                            _iterator19,
                            _step19,
                            utmName,
                            content,
                            COOKIE_VALUE,
                            cookieOptions,
                            cookiesToSet,
                            _i2,
                            _Object$entries,
                            _Object$entries$_i,
                            cookieName,
                            value;
                          return _regenerator().w(function (_context25) {
                            while (1)
                              switch (_context25.n) {
                                case 0:
                                  if (
                                    !(
                                      (_window1 = window) != null &&
                                      (_window1 = _window1.location) != null &&
                                      _window1.pathname.includes('efetuar-pagamento')
                                    )
                                  ) {
                                    _context25.n = 1;
                                    break;
                                  }
                                  queryParams = new URLSearchParams(window.location.search);
                                  key = queryParams.get('key');
                                  if (!key) {
                                    _context25.n = 1;
                                    break;
                                  }
                                  _context25.n = 1;
                                  return _this6.sessionHistoryService.updateNuvemshopId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    nuvemShopId: key,
                                  });
                                case 1:
                                  for (
                                    _iterator19 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step19 = _iterator19()).done;
                                  ) {
                                    utmName = _step19.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  COOKIE_VALUE =
                                    'typ=utm|||src=' +
                                    ((utms == null ? void 0 : utms.utm_source) || '(none)') +
                                    '|||mdm=' +
                                    ((utms == null ? void 0 : utms.utm_medium) || '(none)') +
                                    '|||cmp=' +
                                    ((utms == null ? void 0 : utms.utm_campaign) || '(none)') +
                                    '|||cnt=' +
                                    ((utms == null ? void 0 : utms.utm_content) || '(none)') +
                                    '|||trm=' +
                                    ((utms == null ? void 0 : utms.utm_term) || '(none)') +
                                    '|||id=(none)|||plt=(none)|||fmt=(none)|||tct=(none)';
                                  document.cookie =
                                    'sbjs_current=' +
                                    encodeURIComponent(COOKIE_VALUE) +
                                    '; path=/; domain=' +
                                    generateDomain();
                                  cookieOptions = '; path=/';
                                  cookiesToSet = {
                                    nemu_source: (utms == null ? void 0 : utms.utm_source) || '',
                                    nemu_medium: (utms == null ? void 0 : utms.utm_medium) || '',
                                    nemu_campaign: (utms == null ? void 0 : utms.utm_campaign) || '',
                                    nemu_content: (utms == null ? void 0 : utms.utm_content) || '',
                                    nemu_term: (utms == null ? void 0 : utms.utm_term) || '',
                                  };
                                  for (
                                    _i2 = 0, _Object$entries = Object.entries(cookiesToSet);
                                    _i2 < _Object$entries.length;
                                    _i2++
                                  ) {
                                    ((_Object$entries$_i = _Object$entries[_i2]),
                                      (cookieName = _Object$entries$_i[0]),
                                      (value = _Object$entries$_i[1]));
                                    if (value) {
                                      document.cookie = cookieName + '=' + encodeURIComponent(value) + cookieOptions;
                                    }
                                  }
                                case 2:
                                  return _context25.a(2);
                              }
                          }, _callee25);
                        }),
                      );
                      function woocommerce() {
                        return _woocommerce.apply(this, arguments);
                      }
                      return woocommerce;
                    })(),
                    woocommerce_ga4: (function () {
                      var _woocommerce_ga = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee26() {
                          var _window10;
                          var queryParams,
                            key,
                            _iterator20,
                            _step20,
                            utmName,
                            content,
                            utmCampaign,
                            expiryDate,
                            cookiesToSet,
                            _i3,
                            _Object$entries2,
                            _Object$entries2$_i,
                            cookieName,
                            value,
                            COOKIE_VALUE;
                          return _regenerator().w(function (_context26) {
                            while (1)
                              switch (_context26.n) {
                                case 0:
                                  if (
                                    !(
                                      (_window10 = window) != null &&
                                      (_window10 = _window10.location) != null &&
                                      _window10.pathname.includes('efetuar-pagamento')
                                    )
                                  ) {
                                    _context26.n = 1;
                                    break;
                                  }
                                  queryParams = new URLSearchParams(window.location.search);
                                  key = queryParams.get('key');
                                  if (!key) {
                                    _context26.n = 1;
                                    break;
                                  }
                                  _context26.n = 1;
                                  return _this6.sessionHistoryService.updateNuvemshopId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    nuvemShopId: key,
                                  });
                                case 1:
                                  for (
                                    _iterator20 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step20 = _iterator20()).done;
                                  ) {
                                    utmName = _step20.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '');
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (['facebook', 'google', 'tiktok', 'pinterest'].includes(utms['utm_source'])) {
                                    searchParams.set('utm_medium', 'cpc');
                                  }
                                  if (utms['utm_medium']) {
                                    if (utms['utm_source'] === 'google') {
                                      utmCampaign = utms['utm_campaign'] || '';
                                      searchParams.set('utm_campaign', utmCampaign + '_' + utms['utm_medium']);
                                    } else {
                                      searchParams.set('utm_term', utms['utm_medium']);
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                  expiryDate = new Date();
                                  expiryDate.setDate(expiryDate.getDate() + 30);
                                  cookiesToSet = {
                                    nemu_source: (utms == null ? void 0 : utms.utm_source) || '',
                                    nemu_medium: (utms == null ? void 0 : utms.utm_medium) || '',
                                    nemu_campaign: (utms == null ? void 0 : utms.utm_campaign) || '',
                                    nemu_content: (utms == null ? void 0 : utms.utm_content) || '',
                                    nemu_term: (utms == null ? void 0 : utms.utm_term) || '',
                                  };
                                  for (
                                    _i3 = 0, _Object$entries2 = Object.entries(cookiesToSet);
                                    _i3 < _Object$entries2.length;
                                    _i3++
                                  ) {
                                    ((_Object$entries2$_i = _Object$entries2[_i3]),
                                      (cookieName = _Object$entries2$_i[0]),
                                      (value = _Object$entries2$_i[1]));
                                    if (value) {
                                      document.cookie =
                                        cookieName +
                                        '=' +
                                        encodeURIComponent(value) +
                                        '; path=/; expires=' +
                                        expiryDate.toUTCString();
                                    }
                                  }
                                  COOKIE_VALUE =
                                    'typ=utm|||src=' +
                                    ((utms == null ? void 0 : utms.utm_source) || '(none)') +
                                    '|||mdm=' +
                                    ((utms == null ? void 0 : utms.utm_medium) || '(none)') +
                                    '|||cmp=' +
                                    ((utms == null ? void 0 : utms.utm_campaign) || '(none)') +
                                    '|||cnt=' +
                                    ((utms == null ? void 0 : utms.utm_content) || '(none)') +
                                    '|||trm=' +
                                    ((utms == null ? void 0 : utms.utm_term) || '(none)') +
                                    '|||id=(none)|||plt=(none)|||fmt=(none)|||tct=(none)';
                                  document.cookie =
                                    'sbjs_current=' +
                                    encodeURIComponent(COOKIE_VALUE) +
                                    '; path=/; domain=' +
                                    generateDomain() +
                                    '; expires=' +
                                    expiryDate.toUTCString();
                                case 2:
                                  return _context26.a(2);
                              }
                          }, _callee26);
                        }),
                      );
                      function woocommerce_ga4() {
                        return _woocommerce_ga.apply(this, arguments);
                      }
                      return woocommerce_ga4;
                    })(),
                    vnda: (function () {
                      var _vnda = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee29() {
                          var getCookieByName,
                            sessionHistoryService,
                            waitForVndaSessionId,
                            _iterator21,
                            _step21,
                            utmName,
                            content,
                            COOKIE_VALUE,
                            expiryDate;
                          return _regenerator().w(function (_context29) {
                            while (1)
                              switch (_context29.n) {
                                case 0:
                                  waitForVndaSessionId = function _waitForVndaSessionId() {
                                    return new Promise(
                                      /*#__PURE__*/ (function () {
                                        var _ref31 = _asyncToGenerator(
                                          /*#__PURE__*/ _regenerator().m(function _callee28(resolve) {
                                            var interval, timeout;
                                            return _regenerator().w(function (_context28) {
                                              while (1)
                                                switch (_context28.n) {
                                                  case 0:
                                                    interval = setInterval(
                                                      /*#__PURE__*/ _asyncToGenerator(
                                                        /*#__PURE__*/ _regenerator().m(function _callee27() {
                                                          var sessionCookie, item;
                                                          return _regenerator().w(function (_context27) {
                                                            while (1)
                                                              switch (_context27.n) {
                                                                case 0:
                                                                  sessionCookie = getCookieByName('ahoy_visit')
                                                                    ? getCookieByName('ahoy_visit').split('?')[0]
                                                                    : '';
                                                                  item = sessionCookie || null;
                                                                  if (!(item !== null)) {
                                                                    _context27.n = 2;
                                                                    break;
                                                                  }
                                                                  clearInterval(interval);
                                                                  _context27.n = 1;
                                                                  return sessionHistoryService.updateTraySessionId({
                                                                    trackingId: tracking.id,
                                                                    trackingSessionId: utms.trackingSessionId,
                                                                    traySessionId: item,
                                                                  });
                                                                case 1:
                                                                  return _context27.a(2, resolve(true));
                                                                case 2:
                                                                  return _context27.a(2);
                                                              }
                                                          }, _callee27);
                                                        }),
                                                      ),
                                                      500,
                                                    );
                                                    timeout = setTimeout(function () {
                                                      clearInterval(interval);
                                                      resolve(null);
                                                    }, 10000);
                                                  case 1:
                                                    return _context28.a(2);
                                                }
                                            }, _callee28);
                                          }),
                                        );
                                        return function (_x21) {
                                          return _ref31.apply(this, arguments);
                                        };
                                      })(),
                                    );
                                  };
                                  getCookieByName = _this6.storage.getCookieByName;
                                  sessionHistoryService = _this6.sessionHistoryService;
                                  _context29.n = 1;
                                  return waitForVndaSessionId();
                                case 1:
                                  for (
                                    _iterator21 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step21 = _iterator21()).done;
                                  ) {
                                    utmName = _step21.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  COOKIE_VALUE = '' + (utms == null ? void 0 : utms.utm_term);
                                  expiryDate = new Date();
                                  expiryDate.setDate(expiryDate.getDate() + 30);
                                  document.cookie =
                                    'campaign=' +
                                    COOKIE_VALUE +
                                    '; expires=' +
                                    expiryDate.toUTCString() +
                                    '; domain=' +
                                    generateDomain() +
                                    '; path=/';
                                case 2:
                                  return _context29.a(2);
                              }
                          }, _callee29);
                        }),
                      );
                      function vnda() {
                        return _vnda.apply(this, arguments);
                      }
                      return vnda;
                    })(),
                    wake: (function () {
                      var _wake = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee31() {
                          var _iterator22, _step22, utmName, content, maxAttempts, attempts, sessionIdProcessed;
                          return _regenerator().w(function (_context31) {
                            while (1)
                              switch (_context31.n) {
                                case 0:
                                  for (
                                    _iterator22 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step22 = _iterator22()).done;
                                  ) {
                                    utmName = _step22.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                  maxAttempts = 100; // 100ms * 100 = 10s
                                  attempts = 0;
                                  sessionIdProcessed = false;
                                  new Promise(function (resolve, reject) {
                                    var interval = setInterval(
                                      /*#__PURE__*/ _asyncToGenerator(
                                        /*#__PURE__*/ _regenerator().m(function _callee30() {
                                          var wakeClient,
                                            _wakeClient$checkout,
                                            _wakeClient$checkout2,
                                            metadataValues,
                                            checkoutId,
                                            _document$getElements,
                                            _this6$storage$getCoo,
                                            orderId,
                                            userIdCookie,
                                            sessionId,
                                            _t7;
                                          return _regenerator().w(
                                            function (_context30) {
                                              while (1)
                                                switch ((_context30.p = _context30.n)) {
                                                  case 0:
                                                    if (!(typeof client !== 'undefined')) {
                                                      _context30.n = 6;
                                                      break;
                                                    }
                                                    //@ts-ignore
                                                    wakeClient = client;
                                                    clearInterval(interval);
                                                    _context30.p = 1;
                                                    metadataValues = [
                                                      {
                                                        key: 'utmSource',
                                                        value: utms == null ? void 0 : utms.utm_source,
                                                      },
                                                      {
                                                        key: 'utmCampaign',
                                                        value: utms == null ? void 0 : utms.utm_campaign,
                                                      },
                                                      {
                                                        key: 'utmMedium',
                                                        value: utms == null ? void 0 : utms.utm_medium,
                                                      },
                                                      {
                                                        key: 'utmContent',
                                                        value:
                                                          ((utms == null ? void 0 : utms.utm_adName) || '') +
                                                          '|' +
                                                          ((utms == null ? void 0 : utms.utm_adId) || '') +
                                                          '|' +
                                                          (utms == null ? void 0 : utms.utm_term),
                                                      },
                                                      {
                                                        key: 'utmTerm',
                                                        value:
                                                          (utms == null ? void 0 : utms.googleKeyword) ||
                                                          (utms == null ? void 0 : utms.utm_term),
                                                      },
                                                    ];
                                                    _context30.n = 2;
                                                    return wakeClient == null ||
                                                      (_wakeClient$checkout = wakeClient.checkout) == null
                                                      ? void 0
                                                      : _wakeClient$checkout.getCheckoutId();
                                                  case 2:
                                                    checkoutId = _context30.v;
                                                    _context30.n = 3;
                                                    return wakeClient == null ||
                                                      (_wakeClient$checkout2 = wakeClient.checkout) == null
                                                      ? void 0
                                                      : _wakeClient$checkout2.addCheckoutMetadata(
                                                          metadataValues,
                                                          checkoutId,
                                                        );
                                                  case 3:
                                                    resolve(null);
                                                    _context30.n = 5;
                                                    break;
                                                  case 4:
                                                    _context30.p = 4;
                                                    _t7 = _context30.v;
                                                    resolve(null);
                                                  case 5:
                                                    _context30.n = 9;
                                                    break;
                                                  case 6:
                                                    if (!(++attempts >= maxAttempts)) {
                                                      _context30.n = 7;
                                                      break;
                                                    }
                                                    clearInterval(interval);
                                                    resolve(null);
                                                    _context30.n = 9;
                                                    break;
                                                  case 7:
                                                    if (sessionIdProcessed) {
                                                      _context30.n = 9;
                                                      break;
                                                    }
                                                    orderId = document.location.href.includes('/checkout')
                                                      ? (_document$getElements =
                                                          document.getElementsByClassName('order-number')) == null ||
                                                        (_document$getElements = _document$getElements[1]) == null
                                                        ? void 0
                                                        : _document$getElements.textContent
                                                      : undefined;
                                                    userIdCookie =
                                                      (_this6$storage$getCoo =
                                                        _this6.storage.getCookieByName('t_us_id')) == null ||
                                                      (_this6$storage$getCoo = _this6$storage$getCoo[0]) == null
                                                        ? void 0
                                                        : _this6$storage$getCoo.id;
                                                    sessionId = orderId != null ? orderId : userIdCookie;
                                                    if (!sessionId) {
                                                      _context30.n = 8;
                                                      break;
                                                    }
                                                    sessionIdProcessed = true;
                                                    _context30.n = 8;
                                                    return _this6.sessionHistoryService.updateVtexSessionId({
                                                      trackingId: tracking.id,
                                                      trackingSessionId: utms.trackingSessionId,
                                                      vtexSessionId: sessionId.toString(),
                                                    });
                                                  case 8:
                                                    clearInterval(interval);
                                                    resolve(null);
                                                  case 9:
                                                    return _context30.a(2);
                                                }
                                            },
                                            _callee30,
                                            null,
                                            [[1, 4]],
                                          );
                                        }),
                                      ),
                                      100,
                                    );
                                  });
                                case 1:
                                  return _context31.a(2);
                              }
                          }, _callee31);
                        }),
                      );
                      function wake() {
                        return _wake.apply(this, arguments);
                      }
                      return wake;
                    })(),
                    wake_ga4: (function () {
                      var _wake_ga = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee33() {
                          var _loop, _iterator23, _step23;
                          return _regenerator().w(function (_context34) {
                            while (1)
                              switch (_context34.n) {
                                case 0:
                                  _loop = /*#__PURE__*/ _regenerator().m(function _loop() {
                                    var utmName, content, utmCampaign, maxAttempts, attempts;
                                    return _regenerator().w(function (_context33) {
                                      while (1)
                                        switch (_context33.n) {
                                          case 0:
                                            utmName = _step23.value;
                                            if (utmName === 'utm_content') {
                                              content =
                                                ((utms == null ? void 0 : utms.utm_adName) || '') +
                                                '|' +
                                                ((utms == null ? void 0 : utms.utm_adId) || '') +
                                                '|' +
                                                (utms == null ? void 0 : utms.utm_term);
                                              searchParams.set(utmName, content || '');
                                            } else if (utms[utmName]) {
                                              searchParams.set(utmName, utms[utmName] || '');
                                            }
                                            if (
                                              ['facebook', 'google', 'tiktok', 'pinterest'].includes(utms['utm_source'])
                                            ) {
                                              searchParams.set('utm_medium', 'cpc');
                                            }
                                            if (utms['utm_medium']) {
                                              if (utms['utm_source'] === 'google') {
                                                utmCampaign = utms['utm_campaign'] || '';
                                                searchParams.set(
                                                  'utm_campaign',
                                                  utmCampaign + '-' + utms['utm_medium'],
                                                );
                                              } else {
                                                searchParams.set('utm_term', utms['utm_medium']);
                                              }
                                            }
                                            if (utms['googleKeyword']) {
                                              searchParams.set('utm_term', utms['googleKeyword'] || '');
                                            }
                                            maxAttempts = 100; // 100ms * 100 = 10s
                                            attempts = 0;
                                            new Promise(function (resolve, reject) {
                                              var interval = setInterval(
                                                /*#__PURE__*/ _asyncToGenerator(
                                                  /*#__PURE__*/ _regenerator().m(function _callee32() {
                                                    var wakeClient,
                                                      _wakeClient$checkout3,
                                                      _wakeClient$checkout4,
                                                      metadataValues,
                                                      checkoutId,
                                                      _t8;
                                                    return _regenerator().w(
                                                      function (_context32) {
                                                        while (1)
                                                          switch ((_context32.p = _context32.n)) {
                                                            case 0:
                                                              if (!(typeof client !== 'undefined')) {
                                                                _context32.n = 6;
                                                                break;
                                                              }
                                                              //@ts-ignore
                                                              wakeClient = client;
                                                              clearInterval(interval);
                                                              _context32.p = 1;
                                                              metadataValues = [
                                                                {
                                                                  key: 'utmSource',
                                                                  value: utms == null ? void 0 : utms.utm_source,
                                                                },
                                                                {
                                                                  key: 'utmCampaign',
                                                                  value: utms == null ? void 0 : utms.utm_campaign,
                                                                },
                                                                {
                                                                  key: 'utmMedium',
                                                                  value: utms == null ? void 0 : utms.utm_medium,
                                                                },
                                                                {
                                                                  key: 'utmContent',
                                                                  value:
                                                                    ((utms == null ? void 0 : utms.utm_adName) || '') +
                                                                    '|' +
                                                                    ((utms == null ? void 0 : utms.utm_adId) || '') +
                                                                    '|' +
                                                                    (utms == null ? void 0 : utms.utm_term),
                                                                },
                                                                {
                                                                  key: 'utmTerm',
                                                                  value:
                                                                    (utms == null ? void 0 : utms.googleKeyword) ||
                                                                    (utms == null ? void 0 : utms.utm_term),
                                                                },
                                                              ];
                                                              _context32.n = 2;
                                                              return wakeClient == null ||
                                                                (_wakeClient$checkout3 = wakeClient.checkout) == null
                                                                ? void 0
                                                                : _wakeClient$checkout3.getCheckoutId();
                                                            case 2:
                                                              checkoutId = _context32.v;
                                                              _context32.n = 3;
                                                              return wakeClient == null ||
                                                                (_wakeClient$checkout4 = wakeClient.checkout) == null
                                                                ? void 0
                                                                : _wakeClient$checkout4.addCheckoutMetadata(
                                                                    metadataValues,
                                                                    checkoutId,
                                                                  );
                                                            case 3:
                                                              resolve(null);
                                                              _context32.n = 5;
                                                              break;
                                                            case 4:
                                                              _context32.p = 4;
                                                              _t8 = _context32.v;
                                                              resolve(null);
                                                            case 5:
                                                              _context32.n = 7;
                                                              break;
                                                            case 6:
                                                              if (++attempts >= maxAttempts) {
                                                                clearInterval(interval);
                                                                resolve(null);
                                                              }
                                                            case 7:
                                                              return _context32.a(2);
                                                          }
                                                      },
                                                      _callee32,
                                                      null,
                                                      [[1, 4]],
                                                    );
                                                  }),
                                                ),
                                                100,
                                              );
                                            });
                                          case 1:
                                            return _context33.a(2);
                                        }
                                    }, _loop);
                                  });
                                  _iterator23 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                case 1:
                                  if ((_step23 = _iterator23()).done) {
                                    _context34.n = 3;
                                    break;
                                  }
                                  return _context34.d(_regeneratorValues(_loop()), 2);
                                case 2:
                                  _context34.n = 1;
                                  break;
                                case 3:
                                  return _context34.a(2);
                              }
                          }, _callee33);
                        }),
                      );
                      function wake_ga4() {
                        return _wake_ga.apply(this, arguments);
                      }
                      return wake_ga4;
                    })(),
                    tutoryhub: (function () {
                      var _tutoryhub = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee34() {
                          var url, extractOrderId, orderId, _iterator24, _step24, utmName, content;
                          return _regenerator().w(function (_context35) {
                            while (1)
                              switch (_context35.n) {
                                case 0:
                                  extractOrderId = function _extractOrderId(url) {
                                    var match = url.match(/\/obrigado\/(or_[a-zA-Z0-9]+)/);
                                    return match ? match[1] : null;
                                  };
                                  url = window.location.href;
                                  orderId = extractOrderId(url);
                                  if (!orderId) {
                                    _context35.n = 1;
                                    break;
                                  }
                                  _context35.n = 1;
                                  return _this6.sessionHistoryService.updateNuvemshopId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    nuvemShopId: orderId,
                                  });
                                case 1:
                                  for (
                                    _iterator24 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step24 = _iterator24()).done;
                                  ) {
                                    utmName = _step24.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                case 2:
                                  return _context35.a(2);
                              }
                          }, _callee34);
                        }),
                      );
                      function tutoryhub() {
                        return _tutoryhub.apply(this, arguments);
                      }
                      return tutoryhub;
                    })(),
                    uappi: (function () {
                      var _uappi = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee35() {
                          var _uappiClient$pedido, uappiClient, orderId, _iterator25, _step25, utmName, content;
                          return _regenerator().w(function (_context36) {
                            while (1)
                              switch (_context36.n) {
                                case 0:
                                  if (!(typeof WapStore !== 'undefined')) {
                                    _context36.n = 1;
                                    break;
                                  }
                                  //@ts-ignore
                                  uappiClient = WapStore;
                                  orderId =
                                    uappiClient == null || (_uappiClient$pedido = uappiClient.pedido) == null
                                      ? void 0
                                      : _uappiClient$pedido.id;
                                  if (!orderId) {
                                    _context36.n = 1;
                                    break;
                                  }
                                  _context36.n = 1;
                                  return _this6.sessionHistoryService.updateNuvemshopId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    nuvemShopId: String(orderId),
                                  });
                                case 1:
                                  for (
                                    _iterator25 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step25 = _iterator25()).done;
                                  ) {
                                    utmName = _step25.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                case 2:
                                  return _context36.a(2);
                              }
                          }, _callee35);
                        }),
                      );
                      function uappi() {
                        return _uappi.apply(this, arguments);
                      }
                      return uappi;
                    })(),
                    uappi_ga4: (function () {
                      var _uappi_ga = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee36() {
                          var _uappiClient$pedido2,
                            uappiClient,
                            orderId,
                            _iterator26,
                            _step26,
                            utmName,
                            content,
                            utmCampaign;
                          return _regenerator().w(function (_context37) {
                            while (1)
                              switch (_context37.n) {
                                case 0:
                                  if (!(typeof WapStore !== 'undefined')) {
                                    _context37.n = 1;
                                    break;
                                  }
                                  //@ts-ignore
                                  uappiClient = WapStore;
                                  orderId =
                                    uappiClient == null || (_uappiClient$pedido2 = uappiClient.pedido) == null
                                      ? void 0
                                      : _uappiClient$pedido2.id;
                                  if (!orderId) {
                                    _context37.n = 1;
                                    break;
                                  }
                                  _context37.n = 1;
                                  return _this6.sessionHistoryService.updateNuvemshopId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    nuvemShopId: String(orderId),
                                  });
                                case 1:
                                  for (
                                    _iterator26 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step26 = _iterator26()).done;
                                  ) {
                                    utmName = _step26.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['utm_medium']) {
                                    if (utms['utm_source'] === 'google') {
                                      utmCampaign = utms['utm_campaign'] || '';
                                      searchParams.set('utm_campaign', utmCampaign + '_' + utms['utm_medium']);
                                    } else {
                                      searchParams.set('utm_term', utms['utm_medium']);
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                case 2:
                                  return _context37.a(2);
                              }
                          }, _callee36);
                        }),
                      );
                      function uappi_ga4() {
                        return _uappi_ga.apply(this, arguments);
                      }
                      return uappi_ga4;
                    })(),
                    yampi: (function () {
                      var _yampi = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee37() {
                          var _window$Yampi;
                          var token;
                          return _regenerator().w(function (_context38) {
                            while (1)
                              switch (_context38.n) {
                                case 0:
                                  token = (_window$Yampi = window.Yampi) == null ? void 0 : _window$Yampi.cart_token;
                                  if (!token) {
                                    _context38.n = 1;
                                    break;
                                  }
                                  _context38.n = 1;
                                  return _this6.sessionHistoryService.updateVtexSessionId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    vtexSessionId: String(token),
                                  });
                                case 1:
                                  return _context38.a(2);
                              }
                          }, _callee37);
                        }),
                      );
                      function yampi() {
                        return _yampi.apply(this, arguments);
                      }
                      return yampi;
                    })(),
                    irroba: (function () {
                      var _irroba = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee38() {
                          var HTML_ELEMENT_ID, orderId, _iterator27, _step27, utmName, content;
                          return _regenerator().w(function (_context39) {
                            while (1)
                              switch (_context39.n) {
                                case 0:
                                  HTML_ELEMENT_ID = 'number-order';
                                  orderId = document.getElementsByClassName(HTML_ELEMENT_ID);
                                  if (!(orderId.length > 0)) {
                                    _context39.n = 1;
                                    break;
                                  }
                                  _context39.n = 1;
                                  return _this6.sessionHistoryService.updateNuvemshopId({
                                    trackingId: tracking.id,
                                    trackingSessionId: utms.trackingSessionId,
                                    nuvemShopId: String(orderId[0].textContent),
                                  });
                                case 1:
                                  for (
                                    _iterator27 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step27 = _iterator27()).done;
                                  ) {
                                    utmName = _step27.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                case 2:
                                  return _context39.a(2);
                              }
                          }, _callee38);
                        }),
                      );
                      function irroba() {
                        return _irroba.apply(this, arguments);
                      }
                      return irroba;
                    })(),
                    shoppub: (function () {
                      var _shoppub = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee40() {
                          var shoppubTimer, _iterator28, _step28, utmName, content;
                          return _regenerator().w(function (_context41) {
                            while (1)
                              switch (_context41.n) {
                                case 0:
                                  shoppubTimer = setInterval(
                                    /*#__PURE__*/ _asyncToGenerator(
                                      /*#__PURE__*/ _regenerator().m(function _callee39() {
                                        var _window11;
                                        var _window12;
                                        return _regenerator().w(function (_context40) {
                                          while (1)
                                            switch (_context40.n) {
                                              case 0:
                                                if (
                                                  !(
                                                    (_window11 = window) != null &&
                                                    (_window11 = _window11.Shoppub) != null &&
                                                    (_window11 = _window11.customer) != null &&
                                                    _window11.id_on_store
                                                  )
                                                ) {
                                                  _context40.n = 1;
                                                  break;
                                                }
                                                clearInterval(shoppubTimer);
                                                _context40.n = 1;
                                                return _this6.sessionHistoryService.updateNuvemshopId({
                                                  trackingId: tracking.id,
                                                  trackingSessionId: utms.trackingSessionId,
                                                  nuvemShopId: String(
                                                    (_window12 = window) == null ||
                                                      (_window12 = _window12.Shoppub) == null ||
                                                      (_window12 = _window12.customer) == null
                                                      ? void 0
                                                      : _window12.id_on_store,
                                                  ),
                                                });
                                              case 1:
                                                return _context40.a(2);
                                            }
                                        }, _callee39);
                                      }),
                                    ),
                                    500,
                                  );
                                  for (
                                    _iterator28 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step28 = _iterator28()).done;
                                  ) {
                                    utmName = _step28.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                case 1:
                                  return _context41.a(2);
                              }
                          }, _callee40);
                        }),
                      );
                      function shoppub() {
                        return _shoppub.apply(this, arguments);
                      }
                      return shoppub;
                    })(),
                    zedy: (function () {
                      var _zedy = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee42() {
                          var _iterator29, _step29, utmName, content, retries, maxRetries, intervalId;
                          return _regenerator().w(function (_context43) {
                            while (1)
                              switch (_context43.n) {
                                case 0:
                                  for (
                                    _iterator29 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step29 = _iterator29()).done;
                                  ) {
                                    utmName = _step29.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                  if (window.location.href.includes('/cart')) {
                                    retries = 0;
                                    maxRetries = 60;
                                    intervalId = setInterval(
                                      /*#__PURE__*/ _asyncToGenerator(
                                        /*#__PURE__*/ _regenerator().m(function _callee41() {
                                          var _window13;
                                          var checkoutUrl, checkoutId, _t9;
                                          return _regenerator().w(
                                            function (_context42) {
                                              while (1)
                                                switch ((_context42.p = _context42.n)) {
                                                  case 0:
                                                    console.info('[PIXEL NEMU] find checkoutId');
                                                    checkoutUrl =
                                                      (_window13 = window) == null ? void 0 : _window13.chtCheckoutUrl;
                                                    checkoutId =
                                                      checkoutUrl == null
                                                        ? void 0
                                                        : checkoutUrl.split('/').filter(Boolean).pop();
                                                    if (!checkoutId) {
                                                      _context42.n = 4;
                                                      break;
                                                    }
                                                    _context42.p = 1;
                                                    _context42.n = 2;
                                                    return _this6.sessionHistoryService.updateNuvemshopId({
                                                      trackingId: tracking.id,
                                                      trackingSessionId: utms.trackingSessionId,
                                                      nuvemShopId: checkoutId,
                                                    });
                                                  case 2:
                                                    clearInterval(intervalId);
                                                    _context42.n = 4;
                                                    break;
                                                  case 3:
                                                    _context42.p = 3;
                                                    _t9 = _context42.v;
                                                    clearInterval(intervalId);
                                                  case 4:
                                                    retries++;
                                                    if (retries >= maxRetries) {
                                                      console.info(
                                                        '[PIXEL NEMU] checkoutId not found after multiple attempts.',
                                                      );
                                                      clearInterval(intervalId);
                                                    }
                                                  case 5:
                                                    return _context42.a(2);
                                                }
                                            },
                                            _callee41,
                                            null,
                                            [[1, 3]],
                                          );
                                        }),
                                      ),
                                      1000,
                                    );
                                  } else {
                                    console.info('[PIXEL NEMU] Page is not /cart. Skipping lookup for checkoutId.');
                                  }
                                case 1:
                                  return _context43.a(2);
                              }
                          }, _callee42);
                        }),
                      );
                      function zedy() {
                        return _zedy.apply(this, arguments);
                      }
                      return zedy;
                    })(),
                    cartpanda: (function () {
                      var _cartpanda = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee45() {
                          var _iterator30,
                            _step30,
                            utmName,
                            content,
                            getCookieByName,
                            sessionHistoryService,
                            waitForCartpandaCartToken;
                          return _regenerator().w(function (_context46) {
                            while (1)
                              switch (_context46.n) {
                                case 0:
                                  waitForCartpandaCartToken = function _waitForCartpandaCart() {
                                    return new Promise(
                                      /*#__PURE__*/ (function () {
                                        var _ref37 = _asyncToGenerator(
                                          /*#__PURE__*/ _regenerator().m(function _callee44(resolve) {
                                            var interval;
                                            return _regenerator().w(function (_context45) {
                                              while (1)
                                                switch (_context45.n) {
                                                  case 0:
                                                    interval = setInterval(
                                                      /*#__PURE__*/ _asyncToGenerator(
                                                        /*#__PURE__*/ _regenerator().m(function _callee43() {
                                                          var cartTokenCookie, item;
                                                          return _regenerator().w(function (_context44) {
                                                            while (1)
                                                              switch (_context44.n) {
                                                                case 0:
                                                                  cartTokenCookie = getCookieByName('cart_token')
                                                                    ? getCookieByName('cart_token').split('?')[0]
                                                                    : '';
                                                                  item = cartTokenCookie || null;
                                                                  if (!(item !== null)) {
                                                                    _context44.n = 2;
                                                                    break;
                                                                  }
                                                                  clearInterval(interval);
                                                                  _context44.n = 1;
                                                                  return sessionHistoryService.updateNuvemshopId({
                                                                    trackingId: tracking.id,
                                                                    trackingSessionId: utms.trackingSessionId,
                                                                    nuvemShopId: item,
                                                                  });
                                                                case 1:
                                                                  return _context44.a(2, resolve(true));
                                                                case 2:
                                                                  return _context44.a(2);
                                                              }
                                                          }, _callee43);
                                                        }),
                                                      ),
                                                      500,
                                                    );
                                                  case 1:
                                                    return _context45.a(2);
                                                }
                                            }, _callee44);
                                          }),
                                        );
                                        return function (_x22) {
                                          return _ref37.apply(this, arguments);
                                        };
                                      })(),
                                    );
                                  };
                                  for (
                                    _iterator30 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step30 = _iterator30()).done;
                                  ) {
                                    utmName = _step30.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '') +
                                        '|' +
                                        (utms == null ? void 0 : utms.utm_term);
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                  getCookieByName = _this6.storage.getCookieByName;
                                  sessionHistoryService = _this6.sessionHistoryService;
                                  if (window.location.href.includes('/checkout')) {
                                    waitForCartpandaCartToken();
                                  }
                                case 1:
                                  return _context46.a(2);
                              }
                          }, _callee45);
                        }),
                      );
                      function cartpanda() {
                        return _cartpanda.apply(this, arguments);
                      }
                      return cartpanda;
                    })(),
                    jetecommerce: (function () {
                      var _jetecommerce = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee47() {
                          var _iterator31, _step31, utmName, content, utmCampaign, jetecommerceTimer;
                          return _regenerator().w(function (_context48) {
                            while (1)
                              switch (_context48.n) {
                                case 0:
                                  for (
                                    _iterator31 = _createForOfIteratorHelperLoose(_this6.scanner.utmNames);
                                    !(_step31 = _iterator31()).done;
                                  ) {
                                    utmName = _step31.value;
                                    if (utmName === 'utm_content') {
                                      content =
                                        ((utms == null ? void 0 : utms.utm_adName) || '') +
                                        '|' +
                                        ((utms == null ? void 0 : utms.utm_adId) || '');
                                      searchParams.set(utmName, content || '');
                                    } else if (utms[utmName]) {
                                      searchParams.set(utmName, utms[utmName] || '');
                                    }
                                  }
                                  if (utms['utm_medium']) {
                                    if (utms['utm_source'] === 'google') {
                                      utmCampaign = utms['utm_campaign'] || '';
                                      searchParams.set('utm_campaign', utmCampaign + '_' + utms['utm_medium']);
                                      searchParams.set('utm_medium', 'cpc');
                                    } else {
                                      if (['facebook', 'google', 'tiktok', 'pinterest'].includes(utms['utm_source'])) {
                                        searchParams.set('utm_medium', 'cpc');
                                        searchParams.set('utm_term', utms['utm_medium']);
                                      } else {
                                        searchParams.set('utm_medium', utms['utm_medium']);
                                      }
                                    }
                                  }
                                  if (utms['googleKeyword']) {
                                    searchParams.set('utm_term', utms['googleKeyword'] || '');
                                  }
                                  jetecommerceTimer = setInterval(
                                    /*#__PURE__*/ _asyncToGenerator(
                                      /*#__PURE__*/ _regenerator().m(function _callee46() {
                                        var emailElement, email;
                                        return _regenerator().w(function (_context47) {
                                          while (1)
                                            switch (_context47.n) {
                                              case 0:
                                                emailElement = document.querySelector('.mail');
                                                if (!emailElement) {
                                                  _context47.n = 1;
                                                  break;
                                                }
                                                clearInterval(jetecommerceTimer);
                                                email = emailElement == null ? void 0 : emailElement.textContent;
                                                _context47.n = 1;
                                                return _this6.sessionHistoryService.updateNuvemshopId({
                                                  trackingId: tracking.id,
                                                  trackingSessionId: utms.trackingSessionId,
                                                  nuvemShopId: email,
                                                });
                                              case 1:
                                                return _context47.a(2);
                                            }
                                        }, _callee46);
                                      }),
                                    ),
                                    500,
                                  );
                                  setTimeout(function () {
                                    clearInterval(jetecommerceTimer);
                                  }, 60000 * 5);
                                case 1:
                                  return _context48.a(2);
                              }
                          }, _callee47);
                        }),
                      );
                      function jetecommerce() {
                        return _jetecommerce.apply(this, arguments);
                      }
                      return jetecommerce;
                    })(),
                    magento: (function () {
                      var _magento = _asyncToGenerator(
                        /*#__PURE__*/ _regenerator().m(function _callee49() {
                          var timer;
                          return _regenerator().w(function (_context50) {
                            while (1)
                              switch (_context50.n) {
                                case 0:
                                  timer = setInterval(
                                    /*#__PURE__*/ _asyncToGenerator(
                                      /*#__PURE__*/ _regenerator().m(function _callee48() {
                                        var _window14, _document$querySelect;
                                        var cart, customerEmail, orderIdFromHtml, cartId;
                                        return _regenerator().w(function (_context49) {
                                          while (1)
                                            switch (_context49.n) {
                                              case 0:
                                                cart = JSON.parse(localStorage.getItem('ds-cart-order'));
                                                customerEmail =
                                                  (_window14 = window) == null ||
                                                  (_window14 = _window14.dataLayer) == null ||
                                                  (_window14 = _window14.find(function (item) {
                                                    return !!item.customerEmail;
                                                  })) == null
                                                    ? void 0
                                                    : _window14.customerEmail;
                                                orderIdFromHtml =
                                                  (_document$querySelect = document.querySelectorAll(
                                                    '.order-information .order-item span',
                                                  )[1]) == null
                                                    ? void 0
                                                    : _document$querySelect.textContent;
                                                if (!(cart || customerEmail || orderIdFromHtml)) {
                                                  _context49.n = 1;
                                                  break;
                                                }
                                                clearInterval(timer);
                                                cartId =
                                                  (cart == null ? void 0 : cart.id) || customerEmail || orderIdFromHtml;
                                                _context49.n = 1;
                                                return _this6.sessionHistoryService.updateNuvemshopId({
                                                  trackingId: tracking.id,
                                                  trackingSessionId: utms.trackingSessionId,
                                                  nuvemShopId: cartId,
                                                });
                                              case 1:
                                                return _context49.a(2);
                                            }
                                        }, _callee48);
                                      }),
                                    ),
                                    500,
                                  );
                                  setTimeout(function () {
                                    clearInterval(timer);
                                  }, 30000);
                                case 1:
                                  return _context50.a(2);
                              }
                          }, _callee49);
                        }),
                      );
                      function magento() {
                        return _magento.apply(this, arguments);
                      }
                      return magento;
                    })(),
                  };
                  mapping =
                    platformMappings[tracking == null ? void 0 : tracking.platform] || platformMappings['others'];
                  _context51.n = 1;
                  return mapping();
                case 1:
                  return _context51.a(2, searchParams);
              }
          },
          _callee50,
          this,
        );
      }),
    );
    function parseUTMsToQueryParams(_x17) {
      return _parseUTMsToQueryParams.apply(this, arguments);
    }
    return parseUTMsToQueryParams;
  })();
  _proto8.removeAccents = function removeAccents(input) {
    return input
      .normalize('NFD')
      .replace(/[\u0300-\u036f]/g, '')
      .replace(/[`^~]/g, '');
  };
  return UtmParser;
})();
var UtmProducer = /*#__PURE__*/ (function () {
  function UtmProducer(_ref41) {
    var sessionHistoryService = _ref41.sessionHistoryService;
    this.sessionHistoryService = void 0;
    Object.assign(this, {
      sessionHistoryService: sessionHistoryService,
    });
  }
  var _proto9 = UtmProducer.prototype;
  _proto9.loadUTMsInQueryParams = function loadUTMsInQueryParams(tracking, queryParams, url_update_enabled) {
    var utms = UtmProducer.extractUtmsFromQueryParams(queryParams.toString());
    var expiryDateNemu = new Date();
    expiryDateNemu.setDate(expiryDateNemu.getDate() + 30);
    document.cookie =
      'nemuUtmsTrack=' + utms + '; expires=' + expiryDateNemu.toUTCString() + '; path=/; SameSite=Lax; Secure';
    localStorage.setItem('nemu:utmsTrack', '' + utms);
    if ((tracking == null ? void 0 : tracking.platform) === 'shopify_plus_others') {
      var expiryDate = new Date();
      expiryDate.setDate(expiryDate.getDate() + 30);
      document.cookie =
        'utmsTrack=' + utms + '; expires=' + expiryDate.toUTCString() + '; path=/; SameSite=Lax; Secure';
      localStorage.setItem('nemu:utmsTrack', '' + utms);
    }
  };
  UtmProducer.extractUtmsFromQueryParams = function extractUtmsFromQueryParams(queryParams) {
    var utmsParams = ['utm_source', 'utm_content', 'utm_medium', 'utm_campaign', 'utm_term'];
    var utms = queryParams
      .split('&')
      .filter(function (param) {
        return utmsParams.includes(param.split('=')[0]);
      })
      .join('&');
    return utms;
  };
  _proto9.addInitiateCheckoutListener = function addInitiateCheckoutListener(
    tracking,
    trackingSessionId,
    trackingSessionHistoryId,
  ) {
    var _this7 = this;
    if ((tracking == null ? void 0 : tracking.initiate_checkout_detection_type) === 'selector') {
      var elements = document.querySelectorAll(tracking == null ? void 0 : tracking.initiate_checkout_detection_value);
      for (var _iterator32 = _createForOfIteratorHelperLoose(elements), _step32; !(_step32 = _iterator32()).done; ) {
        var element = _step32.value;
        element.addEventListener(
          'click',
          /*#__PURE__*/ _asyncToGenerator(
            /*#__PURE__*/ _regenerator().m(function _callee51() {
              return _regenerator().w(function (_context52) {
                while (1)
                  switch (_context52.n) {
                    case 0:
                      _context52.n = 1;
                      return _this7.sessionHistoryService.sendInitateCheckoutEvent({
                        trackingId: tracking == null ? void 0 : tracking.id,
                        trackingSessionId: trackingSessionId,
                        trackingSessionHistoryId: trackingSessionHistoryId,
                      });
                    case 1:
                      return _context52.a(2);
                  }
              }, _callee51);
            }),
          ),
        );
      }
      return;
    }
    var selectors = [
      'button',
      'a',
      'input[type=""]',
      'input[type="button"]',
      'input[type="submit"]',
      'input[type="reset"]',
    ];
    for (var _i4 = 0, _selectors = selectors; _i4 < _selectors.length; _i4++) {
      var selector = _selectors[_i4];
      var _elements = document.querySelectorAll(selector);
      for (var _iterator33 = _createForOfIteratorHelperLoose(_elements), _step33; !(_step33 = _iterator33()).done; ) {
        var _element = _step33.value;
        var containsText = false;
        if (_element.tagName.toLowerCase() === 'button' || _element.tagName.toLowerCase() === 'a') {
          containsText = _element.textContent.includes(
            tracking == null ? void 0 : tracking.initiate_checkout_detection_value,
          );
        } else if (_element.tagName.toLowerCase() === 'input') {
          containsText = _element.value.includes(
            tracking == null ? void 0 : tracking.initiate_checkout_detection_value,
          );
        }
        if (containsText) {
          _element.addEventListener(
            'click',
            /*#__PURE__*/ _asyncToGenerator(
              /*#__PURE__*/ _regenerator().m(function _callee52() {
                return _regenerator().w(
                  function (_context53) {
                    while (1)
                      switch (_context53.n) {
                        case 0:
                          _context53.n = 1;
                          return this.sessionHistoryService.sendInitateCheckoutEvent({
                            trackingId: tracking == null ? void 0 : tracking.id,
                            trackingSessionId: trackingSessionId,
                            trackingSessionHistoryId: trackingSessionHistoryId,
                          });
                        case 1:
                          return _context53.a(2);
                      }
                  },
                  _callee52,
                  this,
                );
              }),
            ),
          );
        }
      }
    }
  };
  _proto9.execute = function execute(_ref44) {
    var queryParams = _ref44.queryParams,
      trackingSessionHistoryId = _ref44.trackingSessionHistoryId,
      tracking = _ref44.tracking,
      trackingSessionId = _ref44.trackingSessionId,
      url_update_enabled = _ref44.url_update_enabled;
    this.loadUTMsInQueryParams(tracking, queryParams.toString(), url_update_enabled);
    if (
      tracking != null &&
      tracking.initiate_checkout_enabled &&
      !!(tracking != null && tracking.initiate_checkout_detection_value)
    ) {
      this.addInitiateCheckoutListener(tracking, trackingSessionId, trackingSessionHistoryId);
    }
  };
  return UtmProducer;
})();
var FacebookPixelManager = /*#__PURE__*/ (function () {
  function FacebookPixelManager(storage) {
    this.storage = storage;
    this.fbcKey = '_fbc';
    this.fbpKey = '_fbp';
  }
  var _proto0 = FacebookPixelManager.prototype;
  _proto0.getUnixTimestamp = function getUnixTimestamp() {
    var dateInSaoPauloTimezone = new Date().toLocaleString('en-US', {
      timeZone: 'America/Sao_Paulo',
    });
    return Math.floor(new Date(dateInSaoPauloTimezone).getTime() / 1000);
  };
  _proto0.generateRandomNumber = function generateRandomNumber() {
    return Math.floor(Math.random() * (9999999999 - 1000000000 + 1)) + 1000000000;
  };
  _proto0.getExpirationDate = function getExpirationDate() {
    return new Date(Date.now() + 1000 * 60 * 60 * 24 * 90);
  };
  _proto0.isValidFbc = function isValidFbc(fbclid) {
    var fbc = this.storage.getCookieByName(this.fbcKey);
    return !!fbc && !!fbclid && fbc.includes(fbclid);
  };
  _proto0.isValidFbp = function isValidFbp() {
    var fbp = this.storage.getCookieByName(this.fbpKey);
    return !!fbp;
  };
  _proto0.validateAndUpdateFbc = function validateAndUpdateFbc() {
    var fbclid = new URLSearchParams(window.location.search).get('fbclid');
    if (!fbclid || this.isValidFbc(fbclid)) return;
    var fbc = 'fb.1.' + this.getUnixTimestamp() + '.' + fbclid;
    this.storage.setCookie(this.fbcKey, fbc, this.getExpirationDate());
  };
  _proto0.ensureFbpExists = function ensureFbpExists() {
    if (this.isValidFbp()) return;
    var randomPart = this.generateRandomNumber();
    var fbp = 'fb.1.' + this.getUnixTimestamp() + '.' + randomPart;
    this.storage.setCookie(this.fbpKey, fbp, this.getExpirationDate());
  };
  _proto0.initialize = function initialize() {
    this.validateAndUpdateFbc();
    this.ensureFbpExists();
  };
  return FacebookPixelManager;
})();
var BotValidator = /*#__PURE__*/ (function () {
  function BotValidator() {
    this.DEFAULT_BLOCKED_UA_STRS = [
      // Random assortment of bots
      'amazonbot',
      'amazonproductbot',
      'app.hypefactors.com',
      // Buck, but "buck" is too short to be safe to block (https://app.hypefactors.com/media-monitoring/about.htm)
      'applebot',
      'archive.org_bot',
      'awariobot',
      'backlinksextendedbot',
      'baiduspider',
      'bingbot',
      'bingpreview',
      'chrome-lighthouse',
      'dataforseobot',
      'deepscan',
      'duckduckbot',
      'facebookexternal',
      'facebookcatalog',
      'http://yandex.com/bots',
      'hubspot',
      'ia_archiver',
      'leikibot',
      'linkedinbot',
      'meta-externalagent',
      'mj12bot',
      'msnbot',
      'nessus',
      'petalbot',
      'pinterest',
      'prerender',
      'rogerbot',
      'screaming frog',
      'sebot-wa',
      'sitebulb',
      'slackbot',
      'slurp',
      'trendictionbot',
      'turnitin',
      'twitterbot',
      'vercel-screenshot',
      'vercelbot',
      'yahoo! slurp',
      'yandexbot',
      'zoombot',
      // Bot-like words, maybe we should block `bot` entirely?
      'bot.htm',
      'bot.php',
      '(bot;',
      'bot/',
      'crawler',
      // Ahrefs: https://ahrefs.com/seo/glossary/ahrefsbot
      'ahrefsbot',
      'ahrefssiteaudit',
      // Semrush bots: https://www.semrush.com/bot/
      'semrushbot',
      'siteauditbot',
      'splitsignalbot',
      // AI Crawlers
      'gptbot',
      'oai-searchbot',
      'chatgpt-user',
      'perplexitybot',
      // Uptime-like stuff
      'better uptime bot',
      'sentryuptimebot',
      'uptimerobot',
      // headless browsers
      'headlesschrome',
      'cypress',
      // a whole bunch of goog-specific crawlers
      // https://developers.google.com/search/docs/advanced/crawling/overview-google-crawlers
      'google-hoteladsverifier',
      'adsbot-google',
      'apis-google',
      'duplexweb-google',
      'feedfetcher-google',
      'google favicon',
      'google web preview',
      'google-read-aloud',
      'googlebot',
      'googleother',
      'google-cloudvertexbot',
      'googleweblight',
      'mediapartners-google',
      'storebot-google',
      'google-inspectiontool',
      'bytespider',
    ];
  }
  var _proto1 = BotValidator.prototype;
  _proto1.isBlockedUA = function isBlockedUA(ua, customBlockedUserAgents) {
    if (customBlockedUserAgents === void 0) {
      customBlockedUserAgents = [];
    }
    if (!ua) {
      return false;
    }
    var uaLower = ua.toLowerCase();
    return this.DEFAULT_BLOCKED_UA_STRS.concat(customBlockedUserAgents).some(function (blockedUA) {
      var blockedUaLower = blockedUA.toLowerCase();
      return uaLower.indexOf(blockedUaLower) !== -1;
    });
  };
  return BotValidator;
})();
var WebPixelManager = /*#__PURE__*/ (function (_BaseService5) {
  function WebPixelManager(storage, botValidator, trackingId, baseURL, nemuUtms) {
    var _this8;
    _this8 = _BaseService5.call(this) || this;
    _this8.storage = storage;
    _this8.botValidator = botValidator;
    _this8.trackingId = trackingId;
    _this8.baseURL = baseURL;
    _this8.nemuUtms = nemuUtms;
    _this8.STORAGE_KEY = 'nmu_wa';
    _this8.SESSION_TIMEOUT_SEC = 30 * 60;
    // 30 minutes
    _this8.QUEUE_DEBOUNCE_TIME_MS = 150;
    // 150 milliseconds
    _this8.QUEUE_MAX_WAIT_TIME_MS = 450;
    // 450 milliseconds
    _this8.SUPPORTED_EVENTS = [
      'page_view',
      'view_item',
      'add_to_cart',
      'begin_checkout',
      'add_payment_info',
      'session_start',
    ];
    _this8.eventQueue = [];
    _this8.debounceTimer = null;
    _this8.maxWaitTimer = null;
    return _this8;
  }
  _inheritsLoose(WebPixelManager, _BaseService5);
  var _proto10 = WebPixelManager.prototype;
  _proto10.getUnixTimestamp = function getUnixTimestamp() {
    var dateInSaoPauloTimezone = new Date().toLocaleString('en-US', {
      timeZone: 'America/Sao_Paulo',
    });
    return Math.floor(new Date(dateInSaoPauloTimezone).getTime() / 1000);
  };
  _proto10.generateRandomNumber = function generateRandomNumber() {
    return Math.floor(Math.random() * (9999999999 - 1000000000 + 1)) + 1000000000;
  };
  _proto10.generateId = function generateId() {
    var timestamp = this.getUnixTimestamp();
    if (!timestamp) {
      return null;
    }
    return 'nmu.' + this.getUnixTimestamp() + '.' + this.generateRandomNumber();
  };
  _proto10.getDeviceType = function getDeviceType() {
    var userAgent = navigator.userAgent || navigator.vendor || window.opera;
    var maxTouchPoints = navigator.maxTouchPoints || 0;
    var mobilePattern = /Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini|Mobile.*Firefox/i;
    var tabletPattern = /iPad|Android(?!.*Mobile)|Tablet|PlayBook|Silk/i;
    var isIPadOS = /Macintosh/i.test(userAgent) && maxTouchPoints > 1;
    if (isIPadOS || tabletPattern.test(userAgent)) {
      return 'tablet';
    }
    if (mobilePattern.test(userAgent)) {
      return 'mobile';
    }
    return 'desktop';
  };
  _proto10.getStoredData = function getStoredData() {
    return this.storage.getLocalStorageItem(this.STORAGE_KEY);
  };
  _proto10.setStoredData = function setStoredData(data) {
    this.storage.setLocalStorageItem(this.STORAGE_KEY, data);
  };
  _proto10.newSession = function newSession() {
    var now = this.getUnixTimestamp();
    return {
      sessionId: this.generateId(),
      startedAt: now,
      lastSentAt: null,
    };
  };
  _proto10.initializeNewData = function initializeNewData() {
    var newData = {
      id: this.generateId(),
      session: this.newSession(),
    };
    this.setStoredData(newData);
    return newData;
  };
  _proto10.isSessionExpired = function isSessionExpired(lastSentAt) {
    if (lastSentAt === null) {
      return true;
    }
    var now = this.getUnixTimestamp();
    return now - lastSentAt > this.SESSION_TIMEOUT_SEC;
  };
  _proto10.getOrCreateWebPixel = function getOrCreateWebPixel() {
    var storedData = this.getStoredData();
    if (!storedData) {
      return {
        webPixel: this.initializeNewData(),
        isNewSession: true,
      };
    }
    var isExpired = this.isSessionExpired(storedData.session.lastSentAt);
    if (!isExpired) {
      return {
        webPixel: storedData,
        isNewSession: false,
      };
    }
    storedData.session = this.newSession();
    this.setStoredData(storedData);
    return {
      webPixel: storedData,
      isNewSession: true,
    };
  };
  _proto10.sendEvent = function sendEvent(event) {
    var _this9 = this;
    this.eventQueue.push(event);
    if (this.debounceTimer) {
      clearTimeout(this.debounceTimer);
    }
    this.debounceTimer = setTimeout(function () {
      _this9.flushQueue();
    }, this.QUEUE_DEBOUNCE_TIME_MS);
    if (!this.maxWaitTimer) {
      this.maxWaitTimer = setTimeout(function () {
        _this9.flushQueue();
      }, this.QUEUE_MAX_WAIT_TIME_MS);
    }
  };
  _proto10.flushQueue = /*#__PURE__*/ (function () {
    var _flushQueue = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee53() {
        var events, storedData, url, body, _t0;
        return _regenerator().w(
          function (_context54) {
            while (1)
              switch ((_context54.p = _context54.n)) {
                case 0:
                  if (!(this.eventQueue.length === 0)) {
                    _context54.n = 1;
                    break;
                  }
                  return _context54.a(2);
                case 1:
                  events = [].concat(this.eventQueue);
                  this.eventQueue = [];
                  if (this.debounceTimer) {
                    clearTimeout(this.debounceTimer);
                    this.debounceTimer = null;
                  }
                  if (this.maxWaitTimer) {
                    clearTimeout(this.maxWaitTimer);
                    this.maxWaitTimer = null;
                  }
                  storedData = this.getStoredData();
                  if (storedData) {
                    storedData.session.lastSentAt = this.getUnixTimestamp();
                    this.setStoredData(storedData);
                  }
                  _context54.p = 2;
                  url = this.baseURL + '/events/' + this.trackingId;
                  body = JSON.stringify({
                    trackingId: this.trackingId,
                    events: events,
                  });
                  _context54.n = 3;
                  return this.sendBeaconOrFetch(url, body);
                case 3:
                  _context54.n = 5;
                  break;
                case 4:
                  _context54.p = 4;
                  _t0 = _context54.v;
                  console.error('[NEMU WEB PIXEL] Failed to send events', _t0);
                case 5:
                  return _context54.a(2);
              }
          },
          _callee53,
          this,
          [[2, 4]],
        );
      }),
    );
    function flushQueue() {
      return _flushQueue.apply(this, arguments);
    }
    return flushQueue;
  })();
  _proto10.sendSessionStartEvent = function sendSessionStartEvent(webPixel) {
    var eventName = 'session_start';
    var eventTimestamp = this.getUnixTimestamp();
    var enrichedEvent = this.enrichEvent(webPixel, eventName, eventTimestamp);
    this.sendEvent(enrichedEvent);
  };
  _proto10.normalizeEventName = function normalizeEventName(eventName) {
    return this.convertToSnakeCase(eventName);
  };
  _proto10.filterSupportedEvent = function filterSupportedEvent(normalizedEventName) {
    var foundEvent = this.SUPPORTED_EVENTS.find(function (supportedEvent) {
      return normalizedEventName.includes(supportedEvent);
    });
    return foundEvent || null;
  };
  _proto10.convertToSnakeCase = function convertToSnakeCase(text) {
    return text
      .replace(/-/g, '_')
      .replace(/([a-z])([A-Z])/g, '$1_$2')
      .toLowerCase();
  };
  _proto10.normalizeDataLayerEventName = function normalizeDataLayerEventName(eventDetail) {
    if (!eventDetail.event || typeof eventDetail.event !== 'string') {
      return null;
    }
    var normalizedEventName = this.normalizeEventName(eventDetail.event);
    eventDetail.event = normalizedEventName;
    return eventDetail;
  };
  _proto10.filterDataLayerEvent = function filterDataLayerEvent(eventDetail) {
    var supportedEvent = this.filterSupportedEvent(eventDetail.event);
    if (!supportedEvent) {
      return null;
    }
    return {
      event: supportedEvent,
    };
  };
  _proto10.enrichEvent = function enrichEvent(webPixel, eventName, eventTimestamp) {
    var utms = {};
    this.nemuUtms.forEach(function (value, key) {
      if (
        [
          'utm_source',
          'utm_medium',
          'utm_campaign',
          'utm_content',
          'utm_term',
          'utm_adsetName',
          'utm_campaignName',
          'utm_adName',
          'utm_campaignId',
          'utm_adsetId',
          'utm_adId',
        ].includes(key)
      ) {
        utms[key] = value;
      }
    });
    var sessionId = webPixel.session.sessionId;
    var referrer = document.referrer;
    var hostname = window.location.hostname;
    var path = window.location.pathname;
    var userAgent = navigator.userAgent;
    return {
      nmubp: webPixel.id,
      eventId: this.generateId(),
      trackingId: this.trackingId,
      event: eventName,
      eventTimestamp: eventTimestamp,
      sessionId: sessionId,
      payload: {
        utms: utms,
        referrer: referrer,
        hostname: hostname,
        path: path,
        userAgent: userAgent,
        deviceType: this.getDeviceType(),
      },
    };
  };
  _proto10.handleDataLayerEvent = function handleDataLayerEvent(webPixel, event) {
    var eventTimestamp = this.getUnixTimestamp();
    var normalizedDataLayerEvent = this.normalizeDataLayerEventName(event.detail);
    if (!normalizedDataLayerEvent) {
      return;
    }
    var filteredDataLayerEvent = this.filterDataLayerEvent(normalizedDataLayerEvent);
    if (!filteredDataLayerEvent) {
      return;
    }
    var enrichedEvent = this.enrichEvent(webPixel, filteredDataLayerEvent.event, eventTimestamp);
    this.sendEvent(enrichedEvent);
  };
  _proto10.setupDataLayerEventListener = function setupDataLayerEventListener(webPixel) {
    var _this0 = this;
    window.addEventListener('nemuDataLayerPush', function (event) {
      _this0.handleDataLayerEvent(webPixel, event);
    });
  };
  _proto10.processExistingDataLayerEvents = function processExistingDataLayerEvents() {
    if (!window.dataLayer || !Array.isArray(window.dataLayer)) {
      return;
    }
    window.dataLayer.forEach(function (event) {
      if (event && typeof event === 'object') {
        var customEvent = new CustomEvent('nemuDataLayerPush', {
          detail: event,
        });
        window.dispatchEvent(customEvent);
      }
    });
  };
  _proto10.setupDataLayerInterceptor = function setupDataLayerInterceptor() {
    window.dataLayer = window.dataLayer || [];
    this.processExistingDataLayerEvents();
    var originalPush = window.dataLayer.push;
    window.dataLayer.push = function () {
      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        args[_key3] = arguments[_key3];
      }
      args.forEach(function (event) {
        if (event && typeof event === 'object') {
          var customEvent = new CustomEvent('nemuDataLayerPush', {
            detail: event,
          });
          window.dispatchEvent(customEvent);
        }
      });
      return originalPush.apply(window.dataLayer, args);
    };
  };
  _proto10.setupPageLeaveListener = function setupPageLeaveListener() {
    var _this1 = this;
    var handlePageLeave = function handlePageLeave() {
      _this1.flushQueue();
    };
    window.addEventListener('visibilitychange', function () {
      if (document.visibilityState === 'hidden') {
        handlePageLeave();
      }
    });
  };
  _proto10.initialize = function initialize() {
    if (this.botValidator.isBlockedUA(navigator.userAgent)) {
      console.log('[NEMU WEB PIXEL] Bot detected, skipping initialization');
      return null;
    }
    var _this$getOrCreateWebP = this.getOrCreateWebPixel(),
      webPixel = _this$getOrCreateWebP.webPixel,
      isNewSession = _this$getOrCreateWebP.isNewSession;
    if (isNewSession) {
      this.sendSessionStartEvent(webPixel);
    }
    this.setupDataLayerEventListener(webPixel);
    this.setupDataLayerInterceptor();
    this.setupPageLeaveListener();
    return webPixel;
  };
  return WebPixelManager;
})(BaseService);
var Tracking = /*#__PURE__*/ (function () {
  function Tracking() {
    /* javascript-obfuscator:disable */
    this.id = '_sOL0dx2Ww';
    /* javascript-obfuscator:disable */
    this.src = 'https://trackings.nemu.com.br';
    /* javascript-obfuscator:disable */
    this.type = 'tracking';
    /* javascript-obfuscator:disable */
    this.platform = 'magento';
    /* javascript-obfuscator:disable */
    this.platforms = '[{"name":"facebook"},{"name":"google"},{"name":"instagram"},{"name":"pvclub"}]';
    /* javascript-obfuscator:disable */
    this.url_update_enabled = 'false';
    /* javascript-obfuscator:disable */
    this.blockExternalScripts = 'true';
    this.nemuUtms = void 0;
  }
  var _proto11 = Tracking.prototype;
  _proto11.onLoad = /*#__PURE__*/ (function () {
    var _onLoad = _asyncToGenerator(
      /*#__PURE__*/ _regenerator().m(function _callee56() {
        var _this10 = this;
        var storage,
          facebookPixelManager,
          scanner,
          platformsFilter,
          clientService,
          _document9,
          _URL2,
          _sessionCreated$lastH,
          _baseURL,
          sessionService,
          _sessionHistoryService,
          parser,
          productData,
          clientSessionId,
          clientHash,
          session,
          producer,
          initWebPixel,
          getLastSessionHistory,
          createTrackingSessionHistory,
          hasUTMs,
          isReferrerFromInternalSource,
          isPageReloaded,
          shouldLoadLastSession,
          hasLoaded,
          hasCreated,
          sessionCreated,
          queryParams,
          _error$response,
          _t1;
        return _regenerator().w(
          function (_context57) {
            while (1)
              switch ((_context57.p = _context57.n)) {
                case 0:
                  if (this.blockExternalScripts === 'true') {
                    removeInitialTrackingCookiesAndStorage();
                  }
                  storage = new Storage();
                  facebookPixelManager = new FacebookPixelManager(storage);
                  facebookPixelManager.initialize();
                  scanner = new UtmScanner({
                    full_url: window.location.search,
                  });
                  platformsFilter = new PlatformFilter({
                    platforms: JSON.parse(this.platforms),
                  });
                  clientService = new ClientService();
                  _context57.p = 1;
                  Logger.info(
                    JSON.stringify({
                      referrer: UtmScanner.extractOrigin(
                        (_document9 = document) == null ? void 0 : _document9.referrer,
                      ),
                      search: JSON.stringify(window.location.search, null, 2),
                      url: JSON.stringify(window.location, null, 2),
                    }),
                  );
                  _baseURL = (_URL2 = new URL(this.src)) == null ? void 0 : _URL2.origin;
                  if (_baseURL) {
                    _context57.n = 2;
                    break;
                  }
                  Logger.error('script element with src attribute not found.');
                  return _context57.a(2);
                case 2:
                  sessionService = new SessionService({
                    baseURL: _baseURL,
                  });
                  _sessionHistoryService = new SessionHistoryService({
                    baseURL: _baseURL,
                  });
                  parser = new UtmParser({
                    scanner: scanner,
                    platformsFilter: platformsFilter,
                    sessionHistoryService: _sessionHistoryService,
                    storage: storage,
                  });
                  productData = {};
                  clientSessionId = storage.getCookieByName('_nmu.' + this.id);
                  _context57.n = 3;
                  return clientService.getClientHash();
                case 3:
                  clientHash = _context57.v;
                  if (!(!!clientHash || !!clientSessionId)) {
                    _context57.n = 5;
                    break;
                  }
                  _context57.n = 4;
                  return sessionService.getBy({
                    trackingId: this.id,
                    clientHash: clientHash,
                    clientSessionId: clientSessionId,
                  });
                case 4:
                  session = _context57.v;
                case 5:
                  producer = new UtmProducer({
                    sessionHistoryService: _sessionHistoryService,
                  });
                  initWebPixel = function initWebPixel() {
                    var botValidator = new BotValidator();
                    var webPixelManager = new WebPixelManager(
                      storage,
                      botValidator,
                      _this10.id,
                      _baseURL,
                      _this10.nemuUtms,
                    );
                    webPixelManager.initialize();
                  };
                  getLastSessionHistory = /*#__PURE__*/ (function () {
                    var _ref45 = _asyncToGenerator(
                      /*#__PURE__*/ _regenerator().m(function _callee54() {
                        var lastHistory, queryParams;
                        return _regenerator().w(function (_context55) {
                          while (1)
                            switch (_context55.n) {
                              case 0:
                                _context55.n = 1;
                                return _sessionHistoryService.getLastBySessionId(_this10.id, session.id);
                              case 1:
                                lastHistory = _context55.v;
                                if (lastHistory) {
                                  _context55.n = 2;
                                  break;
                                }
                                storage.removeCookie('_nmu.' + _this10.id);
                                return _context55.a(2, false);
                              case 2:
                                _context55.n = 3;
                                return parser.parseUTMsToQueryParams({
                                  tracking: lastHistory == null ? void 0 : lastHistory.tracking,
                                  utms: removeEmptyObjectProperties(lastHistory),
                                });
                              case 3:
                                queryParams = _context55.v;
                                _this10.nemuUtms = queryParams;
                                producer.execute({
                                  tracking: lastHistory == null ? void 0 : lastHistory.tracking,
                                  queryParams: queryParams,
                                  baseURL: _baseURL,
                                  trackingSessionId: session.id,
                                  trackingType: _this10.type,
                                  trackingSessionHistoryId: lastHistory.id,
                                  url_update_enabled: _this10.url_update_enabled === 'true',
                                });
                                initWebPixel();
                                return _context55.a(2, true);
                            }
                        }, _callee54);
                      }),
                    );
                    return function getLastSessionHistory() {
                      return _ref45.apply(this, arguments);
                    };
                  })();
                  createTrackingSessionHistory = /*#__PURE__*/ (function () {
                    var _ref46 = _asyncToGenerator(
                      /*#__PURE__*/ _regenerator().m(function _callee55() {
                        var _history$lastHistory;
                        var history, queryParams;
                        return _regenerator().w(function (_context56) {
                          while (1)
                            switch (_context56.n) {
                              case 0:
                                Object.assign(
                                  productData,
                                  _extends(
                                    {
                                      utm_term: 'nemu_' + session.id,
                                    },
                                    removeEmptyObjectProperties(
                                      scanner.extractUTMsFromQueryParams(_this10.platform, _this10.id),
                                    ),
                                  ),
                                );
                                _context56.n = 1;
                                return _sessionHistoryService.add({
                                  trackingId: _this10.id,
                                  sessionId: session.id,
                                  clientHash: clientHash,
                                  productData: removeEmptyObjectProperties(
                                    _extends({}, productData, {
                                      utm_source: parser.parseUTMSrc({
                                        utm_source: productData == null ? void 0 : productData.utm_source,
                                      }),
                                    }),
                                  ),
                                  referrer: UtmScanner.extractOrigin(document.referrer),
                                  facebookParams: scanner.getFacebookParams(storage),
                                  platform: _this10.platform,
                                });
                              case 1:
                                history = _context56.v;
                                if (history) {
                                  _context56.n = 2;
                                  break;
                                }
                                return _context56.a(2, false);
                              case 2:
                                _context56.n = 3;
                                return parser.parseUTMsToQueryParams({
                                  tracking: history == null ? void 0 : history.tracking,
                                  utms: removeEmptyObjectProperties(history),
                                });
                              case 3:
                                queryParams = _context56.v;
                                _this10.nemuUtms = queryParams;
                                producer.execute({
                                  tracking: history == null ? void 0 : history.tracking,
                                  queryParams: queryParams,
                                  trackingType: _this10.type,
                                  baseURL: _baseURL,
                                  trackingSessionId: session.id,
                                  trackingSessionHistoryId:
                                    history == null || (_history$lastHistory = history.lastHistory) == null
                                      ? void 0
                                      : _history$lastHistory.id,
                                  url_update_enabled: _this10.url_update_enabled === 'true',
                                });
                                initWebPixel();
                                return _context56.a(2, true);
                            }
                        }, _callee55);
                      }),
                    );
                    return function createTrackingSessionHistory() {
                      return _ref46.apply(this, arguments);
                    };
                  })();
                  if (!session) {
                    _context57.n = 9;
                    break;
                  }
                  console.log('scanner', !scanner.containsUTMsInQueryParams(this.id));
                  hasUTMs = scanner.containsUTMsInQueryParams(this.id);
                  isReferrerFromInternalSource = scanner.isReferrerFromInternalSource();
                  isPageReloaded = scanner.isPageReloaded();
                  shouldLoadLastSession = !hasUTMs && (isReferrerFromInternalSource || isPageReloaded);
                  if (!shouldLoadLastSession) {
                    _context57.n = 7;
                    break;
                  }
                  _context57.n = 6;
                  return getLastSessionHistory();
                case 6:
                  hasLoaded = _context57.v;
                  if (!hasLoaded) {
                    _context57.n = 7;
                    break;
                  }
                  return _context57.a(2);
                case 7:
                  _context57.n = 8;
                  return createTrackingSessionHistory();
                case 8:
                  hasCreated = _context57.v;
                  if (!hasCreated) {
                    _context57.n = 9;
                    break;
                  }
                  return _context57.a(2);
                case 9:
                  if (scanner.containsUTMsInQueryParams(this.id)) {
                    Object.assign(
                      productData,
                      _extends(
                        {},
                        removeEmptyObjectProperties(scanner.extractUTMsFromQueryParams(this.platform, this.id)),
                      ),
                    );
                  }
                  _context57.n = 10;
                  return sessionService.add({
                    trackingId: this.id,
                    clientHash: clientHash,
                    productData: _extends({}, productData, {
                      utm_source: parser.parseUTMSrc({
                        utm_source: productData == null ? void 0 : productData.utm_source,
                      }),
                    }),
                    facebookParams: scanner.getFacebookParams(storage),
                    referrer: UtmScanner.extractOrigin(document.referrer),
                  });
                case 10:
                  sessionCreated = _context57.v;
                  if (sessionCreated) {
                    storage.setCookie('_nmu.' + this.id, sessionCreated.id);
                  }
                  _context57.n = 11;
                  return parser.parseUTMsToQueryParams({
                    tracking: sessionCreated == null ? void 0 : sessionCreated.tracking,
                    utms: removeEmptyObjectProperties(sessionCreated == null ? void 0 : sessionCreated.lastHistory),
                  });
                case 11:
                  queryParams = _context57.v;
                  this.nemuUtms = queryParams;
                  producer.execute({
                    tracking: sessionCreated == null ? void 0 : sessionCreated.tracking,
                    queryParams: queryParams,
                    trackingType: this.type,
                    baseURL: _baseURL,
                    trackingSessionId: sessionCreated.id,
                    trackingSessionHistoryId:
                      sessionCreated == null || (_sessionCreated$lastH = sessionCreated.lastHistory) == null
                        ? void 0
                        : _sessionCreated$lastH.id,
                    url_update_enabled: this.url_update_enabled === 'true',
                  });
                  initWebPixel();
                  _context57.n = 13;
                  break;
                case 12:
                  _context57.p = 12;
                  _t1 = _context57.v;
                  if (this.id) {
                    storage.removeCookie('_nmu.' + this.id);
                  }
                  Logger.error(
                    '' +
                      ((_t1 == null ||
                      (_error$response = _t1.response) == null ||
                      (_error$response = _error$response.data) == null
                        ? void 0
                        : _error$response.message) || _t1),
                  );
                case 13:
                  return _context57.a(2);
              }
          },
          _callee56,
          this,
          [[1, 12]],
        );
      }),
    );
    function onLoad() {
      return _onLoad.apply(this, arguments);
    }
    return onLoad;
  })();
  return Tracking;
})();
var trackingNemu = new Tracking();
trackingNemu.onLoad();

    </script>
</head>
<body>
    <h1>Validao Tracking</h1>
</body>
</html>